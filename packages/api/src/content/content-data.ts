// This file is auto-generated by the builder. Do not edit manually.

import type { ContentComponent } from "./content-schema";

export const contentSlugs = [
  "ascii-renderer",
  "background-pixel-stars",
  "background-shapes",
  "card-stack",
  "carousel-3d",
  "emerald-template",
  "expanding-header-menu",
  "filter-bar",
  "infinite-grid",
  "ios-volume-slider",
  "light-dark-toggle",
  "like-button",
  "line-chart",
  "radial-slider",
  "sidebar",
  "snail-timer",
  "sphere",
  "spreadsheet",
  "timeline",
  "tooltip-grid",
  "voice-dictator"
] as const;

export const contentComponents: Record<string, ContentComponent> = {
  "ascii-renderer": {
  "name": "ASCII Renderer",
  "description": "Take any 3D model and render it as ASCII art",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/ascii/ascii.mp4",
  "coverType": "video",
  "tags": [
    "entertainment",
    "pixel-art",
    "effects"
  ],
  "slug": "ascii-renderer",
  "type": "local",
  "dependencies": {
    "@react-three/drei": "^10.7.7",
    "@react-three/fiber": "^9.5.0",
    "react": "*",
    "react-dom": "*",
    "three": "^0.180.0"
  },
  "devDependencies": {},
  "sourceCode": {
    "/ascii-renderer.tsx": "\"use client\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport { OrbitControls } from \"@react-three/drei\";\nimport { Canvas, useFrame, useThree } from \"@react-three/fiber\";\nimport { AsciiEffect } from \"three/examples/jsm/effects/AsciiEffect.js\";\n\nexport const AsciiRenderer = () => {\n  return (\n    <Canvas>\n      <ambientLight intensity={0.5} />\n      <pointLight position={[10, 10, 10]} intensity={1} />\n      <directionalLight position={[-10, -10, -5]} intensity={1} />\n      <Torusknot />\n      <OrbitControls />\n      <Renderer />\n    </Canvas>\n  );\n};\n\nconst Torusknot = () => {\n  const meshRef = useRef<any>(null);\n\n  useFrame(\n    (state, delta) =>\n      (meshRef.current.rotation.x = meshRef.current.rotation.y += delta / 2),\n  );\n\n  return (\n    <mesh ref={meshRef} scale={1.25}>\n      <torusKnotGeometry args={[1, 0.2, 128, 32]} />\n      <meshStandardMaterial color=\"#ffffff\" />\n    </mesh>\n  );\n};\n\nconst Renderer = () => {\n  const { gl, scene, camera, size } = useThree();\n  const effectRef = useRef<AsciiEffect>(null);\n\n  useEffect(() => {\n    const effect = new AsciiEffect(gl, \" .:-+*=%@#\");\n\n    effect.domElement.style.position = \"absolute\";\n    effect.domElement.style.top = \"0px\";\n    effect.domElement.style.left = \"0px\";\n    effect.domElement.style.color = \"white\";\n    effect.domElement.style.backgroundColor = \"black\";\n    effect.domElement.style.pointerEvents = \"none\";\n\n    effect.setSize(size.width, size.height);\n\n    const container = gl.domElement.parentNode;\n    if (container) {\n      container.replaceChild(effect.domElement, gl.domElement);\n    }\n\n    effectRef.current = effect;\n\n    return () => {\n      if (container && effect.domElement.parentNode) {\n        container.replaceChild(gl.domElement, effect.domElement);\n      }\n    };\n  }, [gl, size]);\n\n  useFrame(() => {\n    if (effectRef.current) {\n      effectRef.current.render(scene, camera);\n    }\n  }, 1);\n\n  return null;\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { AsciiRenderer } from \"./ascii-renderer\";\n\nconst Preview = () => {\n  return <AsciiRenderer />;\n};\n\nexport default Preview;\n",
  "nextSlug": "background-pixel-stars"
},
  "background-pixel-stars": {
  "name": "Background Pixel Stars",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/background-pixel-stars/background-pixel-stars.mp4",
  "coverType": "video",
  "tags": [
    "design",
    "pixel-art",
    "effects"
  ],
  "slug": "background-pixel-stars",
  "type": "local",
  "dependencies": {
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/background-pixel-stars.tsx": "\"use client\";\n\nimport React, { memo, useCallback, useEffect, useRef } from \"react\";\n\n// 16-bit color palette (reduced color options)\nconst STAR_COLORS = [\n  \"#FFFFFF\", // White\n  \"#FFFFAA\", // Light yellow\n  \"#AAAAFF\", // Light blue\n  \"#FFAAAA\", // Light red\n  \"#AAFFAA\", // Light green\n  \"#FFAAFF\", // Light purple\n  \"#AAFFFF\", // Light cyan\n] as const;\n\n// Configuration constants\nconst starDensity = 0.00004; // Reduced density for larger stars\nconst twinkleProbability = 0.7;\nconst minTwinkleSpeed = 2;\nconst maxTwinkleSpeed = 4;\nconst pixelSize = 5;\nconst starRegenerationInterval = 5000; // Interval to regenerate stars (in ms)\nconst percentToRegenerate = 0.15; // Percentage of stars to regenerate at each interval\n\n// Shooting star configuration\nconst shootingStarPixelSize = 2;\nconst targetFps = 16; // 16 FPS for that retro feel\n\n// Type definitions\ntype BackgroundStar = {\n  x: number;\n  y: number;\n  color: string;\n  baseOpacity: number;\n  currentOpacity: number;\n  twinkle: boolean;\n  twinkleSpeed: number;\n  twinkleDirection: number; // -1 fading out, 1 fading in\n  twinkleTimer: number;\n};\n\ntype TrailPoint = {\n  x: number;\n  y: number;\n  opacity: number;\n};\n\ntype ShootingStar = {\n  id: number;\n  x: number;\n  y: number;\n  angle: number;\n  scale: number;\n  speed: number;\n  distance: number;\n  trail: TrailPoint[];\n};\n\ntype StartPoint = {\n  x: number;\n  y: number;\n  angle: number;\n};\n\nexport const BackgroundPixelStars = memo(\n  () => {\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\n    const animationFrameRef = useRef<number | null>(null);\n\n    // State references\n    const backgroundStarsRef = useRef<BackgroundStar[]>([]);\n    const shootingStarsRef = useRef<ShootingStar[]>([]);\n    const lastRenderTimeRef = useRef<number>(0);\n    const frameInterval: number = 1000 / targetFps;\n\n    // Get random starting point for shooting stars\n    const getRandomStartPoint = useCallback((): StartPoint => {\n      // Start from anywhere along the top edge\n      const x = Math.random() * window.innerWidth;\n\n      // Randomize the angle with a wider range (45-135 degrees)\n      // 90 degrees is straight down\n      // 45 degrees is down-right, 135 degrees is down-left\n      const angle = 45 + Math.random() * 90;\n\n      return { x, y: 0, angle };\n    }, []);\n\n    // Create a new shooting star\n    const createNewShootingStar = useCallback((): ShootingStar => {\n      const { x, y, angle } = getRandomStartPoint();\n      return {\n        id: Date.now(),\n        x,\n        y,\n        angle,\n        scale: 1,\n        speed: Math.random() * 5 + 8,\n        distance: 0,\n        trail: [], // Empty trail initially\n      };\n    }, [getRandomStartPoint]);\n\n    // Initialize background stars\n    const initBackgroundStars = useCallback((): void => {\n      if (!canvasRef.current) return;\n\n      const canvas = canvasRef.current;\n\n      // Clear existing stars\n      backgroundStarsRef.current = [];\n\n      // Generate new stars\n      const area = canvas.width * canvas.height;\n      const numStars = Math.floor(area * starDensity);\n\n      for (let i = 0; i < numStars; i++) {\n        const shouldTwinkle = Math.random() < twinkleProbability;\n        const gridX =\n          Math.floor(Math.random() * (canvas.width / pixelSize)) * pixelSize;\n        const gridY =\n          Math.floor(Math.random() * (canvas.height / pixelSize)) * pixelSize;\n        const colorIndex = Math.floor(Math.random() * STAR_COLORS.length);\n        const baseOpacity = Math.random() * 0.5 + 0.5;\n\n        backgroundStarsRef.current.push({\n          x: gridX,\n          y: gridY,\n          color: STAR_COLORS[colorIndex]!,\n          baseOpacity,\n          currentOpacity: baseOpacity,\n          twinkle: shouldTwinkle,\n          twinkleSpeed:\n            minTwinkleSpeed +\n            Math.random() * (maxTwinkleSpeed - minTwinkleSpeed),\n          twinkleDirection: -1, // -1 fading out, 1 fading in\n          twinkleTimer: 0,\n        });\n      }\n    }, []);\n\n    // Regenerate a portion of background stars\n    const regenerateBackgroundStars = useCallback((): void => {\n      if (!canvasRef.current || backgroundStarsRef.current.length === 0) return;\n\n      const canvas = canvasRef.current;\n      const numToRegenerate = Math.max(\n        1,\n        Math.floor(backgroundStarsRef.current.length * percentToRegenerate),\n      );\n\n      for (let i = 0; i < numToRegenerate; i++) {\n        const randomIndex = Math.floor(\n          Math.random() * backgroundStarsRef.current.length,\n        );\n\n        // Replace with a new star\n        const shouldTwinkle = Math.random() < twinkleProbability;\n        const gridX =\n          Math.floor(Math.random() * (canvas.width / pixelSize)) * pixelSize;\n        const gridY =\n          Math.floor(Math.random() * (canvas.height / pixelSize)) * pixelSize;\n        const colorIndex = Math.floor(Math.random() * STAR_COLORS.length);\n        const baseOpacity = Math.random() * 0.5 + 0.5;\n\n        backgroundStarsRef.current[randomIndex] = {\n          x: gridX,\n          y: gridY,\n          color: STAR_COLORS[colorIndex]!,\n          baseOpacity,\n          currentOpacity: baseOpacity,\n          twinkle: shouldTwinkle,\n          twinkleSpeed:\n            minTwinkleSpeed +\n            Math.random() * (maxTwinkleSpeed - minTwinkleSpeed),\n          twinkleDirection: -1,\n          twinkleTimer: 0,\n        };\n      }\n    }, []);\n\n    // Main animation loop\n    const animateCanvas = useCallback(\n      (timestamp: number): void => {\n        // Skip frames to limit to target FPS\n        if (timestamp - lastRenderTimeRef.current < frameInterval) {\n          animationFrameRef.current = requestAnimationFrame(animateCanvas);\n          return;\n        }\n\n        lastRenderTimeRef.current = timestamp;\n\n        if (!canvasRef.current) {\n          animationFrameRef.current = requestAnimationFrame(animateCanvas);\n          return;\n        }\n\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n\n        if (!ctx) {\n          animationFrameRef.current = requestAnimationFrame(animateCanvas);\n          return;\n        }\n\n        // Clear canvas\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        // 1. Draw and update background stars\n        backgroundStarsRef.current.forEach((star) => {\n          ctx.fillStyle = star.color;\n          ctx.globalAlpha = star.currentOpacity;\n          ctx.fillRect(star.x, star.y, pixelSize, pixelSize);\n\n          // Update twinkling\n          if (star.twinkle) {\n            // Update twinkle timer\n            star.twinkleTimer += 1 / targetFps;\n\n            if (star.twinkleTimer >= star.twinkleSpeed) {\n              star.twinkleTimer = 0;\n              star.twinkleDirection *= -1; // Reverse direction\n            }\n\n            // Calculate new opacity based on discrete steps\n            const progress = star.twinkleTimer / star.twinkleSpeed;\n            if (progress < 0.5) {\n              star.currentOpacity =\n                star.twinkleDirection < 0\n                  ? star.baseOpacity\n                  : star.baseOpacity * 0.3;\n            } else {\n              star.currentOpacity =\n                star.twinkleDirection < 0\n                  ? star.baseOpacity * 0.3\n                  : star.baseOpacity;\n            }\n          }\n        });\n\n        // 2. Update shooting stars\n        if (shootingStarsRef.current.length) {\n          shootingStarsRef.current = shootingStarsRef.current\n            .map((star) => {\n              // Calculate new position\n              const newX =\n                star.x + star.speed * Math.cos((star.angle * Math.PI) / 180);\n              const newY =\n                star.y + star.speed * Math.sin((star.angle * Math.PI) / 180);\n              const newDistance = star.distance + star.speed;\n\n              // Add current position to trail\n              const newTrail = [...star.trail];\n\n              // Only add to trail every few frames for pixelated effect\n              if (newDistance % 8 < star.speed) {\n                newTrail.push({\n                  x: star.x,\n                  y: star.y,\n                  opacity: 1.0,\n                });\n              }\n\n              // Update trail opacity and remove old trail pieces\n              const updatedTrail = newTrail\n                .map((point) => ({ ...point, opacity: point.opacity - 0.1 }))\n                .filter((point) => point.opacity > 0);\n\n              return {\n                ...star,\n                x: newX,\n                y: newY,\n                distance: newDistance,\n                trail: updatedTrail,\n              };\n            })\n            .filter(\n              (star) =>\n                // Remove stars that are out of bounds\n                star.x >= -30 &&\n                star.x <= window.innerWidth + 30 &&\n                star.y >= -30 &&\n                star.y <= window.innerHeight + 30,\n            );\n\n          // 3. Draw shooting stars\n          shootingStarsRef.current.forEach((star) => {\n            // Draw trail\n            star.trail.forEach((point) => {\n              ctx.save();\n              ctx.translate(point.x, point.y);\n              ctx.rotate((star.angle * Math.PI) / 180);\n              ctx.translate(-point.x, -point.y);\n\n              ctx.fillStyle = `rgba(180, 242, 255, ${point.opacity})`;\n              ctx.fillRect(\n                point.x,\n                point.y,\n                shootingStarPixelSize,\n                shootingStarPixelSize,\n              );\n\n              ctx.restore();\n            });\n\n            // Draw star (pixelated representation)\n            const starWidth = 4; // 4 pixels wide\n            const starHeight = 2; // 2 pixels high\n\n            ctx.save();\n            ctx.translate(star.x, star.y);\n            ctx.rotate((star.angle * Math.PI) / 180);\n            ctx.translate(-star.x, -star.y);\n\n            ctx.fillStyle = \"#ffffff\";\n            ctx.globalAlpha = 1.0;\n\n            for (let y = 0; y < starHeight; y++) {\n              for (let x = 0; x < starWidth; x++) {\n                // Skip some pixels for pixelated look\n                if ((x === 0 && y === 1) || (x === 3 && y === 0)) continue;\n\n                ctx.fillRect(\n                  star.x + x * shootingStarPixelSize,\n                  star.y + y * shootingStarPixelSize,\n                  shootingStarPixelSize,\n                  shootingStarPixelSize,\n                );\n              }\n            }\n\n            ctx.restore();\n          });\n        }\n\n        animationFrameRef.current = requestAnimationFrame(animateCanvas);\n      },\n      [frameInterval],\n    );\n\n    // Initialize the component\n    useEffect(() => {\n      if (!canvasRef.current) return;\n\n      // Set canvas dimensions\n      canvasRef.current.width = window.innerWidth;\n      canvasRef.current.height = window.innerHeight;\n\n      // Initialize background stars\n      initBackgroundStars();\n\n      // Start animation loop\n      animationFrameRef.current = requestAnimationFrame(animateCanvas);\n\n      // Create shooting stars periodically\n      const createShootingStar = (): void => {\n        const newStar = createNewShootingStar();\n        shootingStarsRef.current = [...shootingStarsRef.current, newStar];\n\n        // Set a random delay for creating the next star\n        const randomDelay = Math.random() * 4000 + 2000; // 2-6 seconds\n        setTimeout(createShootingStar, randomDelay);\n      };\n\n      // Create first shooting star\n      createShootingStar();\n\n      // Set up regeneration interval for background stars\n      const regenerationInterval = setInterval(\n        regenerateBackgroundStars,\n        starRegenerationInterval,\n      );\n\n      // Handle window resize\n      const handleResize = (): void => {\n        if (canvasRef.current) {\n          canvasRef.current.width = window.innerWidth;\n          canvasRef.current.height = window.innerHeight;\n          initBackgroundStars();\n        }\n      };\n\n      window.addEventListener(\"resize\", handleResize);\n\n      // Cleanup\n      return () => {\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n        clearInterval(regenerationInterval);\n        window.removeEventListener(\"resize\", handleResize);\n      };\n    }, [\n      animateCanvas,\n      createNewShootingStar,\n      initBackgroundStars,\n      regenerateBackgroundStars,\n    ]);\n\n    return (\n      <canvas ref={canvasRef} className=\"pointer-events-none fixed inset-0\" />\n    );\n  },\n  () => true,\n);\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { BackgroundPixelStars } from \"./background-pixel-stars\";\n\nconst Preview = () => {\n  return (\n    <div className=\"h-dvh w-dvw bg-black bg-[url('https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/vibedgames/bg.png')] bg-[size:10px]\">\n      <BackgroundPixelStars />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "ascii-renderer",
  "nextSlug": "background-shapes"
},
  "background-shapes": {
  "name": "Background Shapes",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/background-shapes/background-shapes.mp4",
  "coverType": "video",
  "tags": [
    "design",
    "geometric",
    "effects"
  ],
  "slug": "background-shapes",
  "type": "local",
  "dependencies": {
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/background-shapes.tsx": "import React, { useCallback, useEffect, useState } from \"react\";\n\n// Cell shape functions that return JSX instead of SVG strings\nconst Cell1 = ({ colors }: { colors: string[]; strokeWidth: number }) => (\n  <circle cx=\"50\" cy=\"50\" r=\"9.44\" fill={colors[0]} fillRule=\"evenodd\" />\n);\n\nconst Cell2 = ({\n  colors,\n  strokeWidth,\n}: {\n  colors: string[];\n  strokeWidth: number;\n}) => (\n  <>\n    <line\n      x1=\"25\"\n      x2=\"75\"\n      y1=\"25\"\n      y2=\"25\"\n      stroke={colors[0]}\n      strokeWidth={strokeWidth}\n    />\n    <line\n      x1=\"25\"\n      x2=\"75\"\n      y1=\"50\"\n      y2=\"50\"\n      stroke={colors[0]}\n      strokeWidth={strokeWidth}\n    />\n    <line\n      x1=\"25\"\n      x2=\"75\"\n      y1=\"75\"\n      y2=\"75\"\n      stroke={colors[0]}\n      strokeWidth={strokeWidth}\n    />\n  </>\n);\n\nconst Cell3 = ({\n  colors,\n  strokeWidth,\n}: {\n  colors: string[];\n  strokeWidth: number;\n}) => (\n  <>\n    <line\n      x1=\"25\"\n      x2=\"75\"\n      y1=\"25\"\n      y2=\"75\"\n      stroke={colors[0]}\n      strokeWidth={strokeWidth}\n    />\n    <line\n      x1=\"25\"\n      x2=\"75\"\n      y1=\"75\"\n      y2=\"25\"\n      stroke={colors[0]}\n      strokeWidth={strokeWidth}\n    />\n  </>\n);\n\nconst Cell4 = ({\n  colors,\n  strokeWidth,\n}: {\n  colors: string[];\n  strokeWidth: number;\n}) => (\n  <rect\n    width=\"50\"\n    height=\"50\"\n    x=\"25\"\n    y=\"25\"\n    fill=\"none\"\n    stroke={colors[0]}\n    strokeWidth={strokeWidth}\n  />\n);\n\nconst Cell5 = ({\n  colors,\n  strokeWidth,\n}: {\n  colors: string[];\n  strokeWidth: number;\n}) => (\n  <line\n    x1=\"25\"\n    x2=\"75\"\n    y1=\"75\"\n    y2=\"25\"\n    fill=\"none\"\n    stroke={colors[0]}\n    strokeWidth={strokeWidth}\n  />\n);\n\nconst Cell6 = () => null;\n\nconst Cell7 = () => (\n  <rect width=\"75\" height=\"75\" x=\"12.5\" y=\"12.5\" fill=\"rgba(255,255,255,0.1)\" />\n);\n\n// Simple seeded random number generator\nconst seedPRNG = (seed: number) => {\n  // Simple implementation - in production you might want a more robust seeded RNG\n  // This is a basic seeded RNG implementation\n  let seedValue = seed;\n  return () => {\n    seedValue = (seedValue * 9301 + 49297) % 233280;\n    return seedValue / 233280;\n  };\n};\n\ninterface ShapeConfig {\n  shape: ({\n    colors,\n    strokeWidth,\n  }: {\n    colors: string[];\n    strokeWidth: number;\n  }) => React.ReactElement | null;\n  weight: number;\n}\n\nconst shapesConfig: ShapeConfig[] = [\n  { shape: Cell1, weight: 1 },\n  { shape: Cell2, weight: 1 },\n  { shape: Cell3, weight: 1 },\n  { shape: Cell4, weight: 1 },\n  { shape: Cell5, weight: 1 },\n  { shape: Cell6, weight: 5 },\n  { shape: Cell7, weight: 3 },\n];\n\n// Create weighted selector\nconst createWeightedSelector = (\n  items: ShapeConfig[],\n  seededRandom: () => number,\n) => {\n  const weightedArray: ShapeConfig[] = [];\n\n  for (const item of items) {\n    for (let i = 0; i < item.weight; i++) {\n      weightedArray.push(item);\n    }\n  }\n\n  return () => weightedArray[Math.floor(seededRandom() * weightedArray.length)];\n};\n\n// Individual shape component that manages its own interval\ninterface ShapeProps {\n  x: number;\n  y: number;\n  colors: string[];\n  strokeWidth: number;\n  scale: number;\n  shapeId: string;\n  minInterval?: number;\n  maxInterval?: number;\n}\n\nconst Shape = ({\n  x,\n  y,\n  colors,\n  strokeWidth,\n  scale,\n  shapeId,\n  minInterval = 0,\n  maxInterval = 5000,\n}: ShapeProps) => {\n  const [currentShape, setCurrentShape] = useState<ShapeConfig>(() => {\n    // Initialize with a random shape\n    const seededRandom = seedPRNG(Math.random() * 1000);\n    const pickShape = createWeightedSelector(shapesConfig, seededRandom);\n    return pickShape();\n  });\n\n  useEffect(() => {\n    const getRandomInterval = () =>\n      Math.random() * (maxInterval - minInterval) + minInterval;\n\n    const updateShape = () => {\n      const seededRandom = seedPRNG(Math.random() * 1000);\n      const pickShape = createWeightedSelector(shapesConfig, seededRandom);\n      setCurrentShape(pickShape());\n    };\n\n    // Set initial random interval\n    let timeoutId = setTimeout(() => {\n      updateShape();\n\n      // Set up recurring random intervals\n      const setNextTimeout = () => {\n        timeoutId = setTimeout(() => {\n          updateShape();\n          setNextTimeout();\n        }, getRandomInterval());\n      };\n\n      setNextTimeout();\n    }, getRandomInterval());\n\n    return () => clearTimeout(timeoutId);\n  }, [minInterval, maxInterval]);\n\n  const ShapeComponent = currentShape.shape;\n\n  return (\n    <g transform={`translate(${x} ${y})`}>\n      <g transform={`scale(${scale})`}>\n        <ShapeComponent colors={colors} strokeWidth={strokeWidth} />\n      </g>\n    </g>\n  );\n};\n\ninterface BackgroundShapesProps {\n  width?: number;\n  height?: number;\n  cellSize?: number;\n  strokeWidth?: number;\n  colors?: string[];\n  className?: string;\n  minInterval?: number;\n  maxInterval?: number;\n}\n\nexport const BackgroundShapes = ({\n  width = 500,\n  height = 500,\n  cellSize = 20,\n  strokeWidth = 10,\n  colors = [\"white\"],\n  className = \"\",\n  minInterval = 1000,\n  maxInterval = 5000,\n}: BackgroundShapesProps) => {\n  const [shapes, setShapes] = useState<React.ReactNode[]>([]);\n  const borderSize = cellSize * 2;\n  const scale = 0.2;\n\n  useEffect(() => {\n    const newShapes: React.ReactNode[] = [];\n\n    // Generate shapes for each cell\n    for (let x = borderSize; x < width / 2; x += cellSize) {\n      for (let y = borderSize; y < height - borderSize; y += cellSize) {\n        // Left side\n        newShapes.push(\n          <Shape\n            key={`left-${x}-${y}`}\n            x={x}\n            y={y}\n            colors={colors}\n            strokeWidth={strokeWidth}\n            scale={scale}\n            shapeId={`left-${x}-${y}`}\n            minInterval={minInterval}\n            maxInterval={maxInterval}\n          />,\n        );\n\n        // Right side (mirrored)\n        newShapes.push(\n          <Shape\n            key={`right-${x}-${y}`}\n            x={width - cellSize - x}\n            y={y}\n            colors={colors}\n            strokeWidth={strokeWidth}\n            scale={scale}\n            shapeId={`right-${x}-${y}`}\n            minInterval={minInterval}\n            maxInterval={maxInterval}\n          />,\n        );\n      }\n    }\n\n    setShapes(newShapes);\n  }, [\n    width,\n    height,\n    cellSize,\n    strokeWidth,\n    colors,\n    borderSize,\n    scale,\n    minInterval,\n    maxInterval,\n  ]);\n\n  return (\n    <svg\n      width={width}\n      height={height}\n      viewBox={`0 0 ${width} ${height}`}\n      className={className}\n    >\n      {shapes}\n    </svg>\n  );\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { BackgroundShapes } from \"./background-shapes\";\n\nconst Preview = () => {\n  return (\n    <div className=\"h-full w-full bg-[#2164D6]\">\n      <BackgroundShapes width={window.innerWidth} height={window.innerHeight} />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "background-pixel-stars",
  "nextSlug": "card-stack"
},
  "card-stack": {
  "name": "Scrollable Card Stack",
  "description": "An infinite stack of cards placed with perspective one on top of another.",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/card-stack-1/card-stack-1.mp4",
  "coverType": "video",
  "tags": [
    "productivity",
    "minimal",
    "cards"
  ],
  "slug": "card-stack",
  "type": "local",
  "dependencies": {
    "@gsap/react": "^2.1.2",
    "gsap": "^3.14.2",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/card-stack.tsx": "import React from \"react\";\nimport { useGSAP } from \"@gsap/react\";\nimport gsap from \"gsap\";\n\ntype CardStackProps = {\n  cards: { src: string; href: string }[];\n  className?: string;\n};\n\nexport const CardStack = ({ cards }: CardStackProps) => {\n  const rootRef = React.useRef<HTMLDivElement>(null);\n\n  useGSAP(() => {\n    let incr = 0;\n\n    const root = rootRef.current;\n    const slides = root?.querySelectorAll(\".slide\");\n    const slideContent = root?.querySelectorAll(\".content\");\n\n    if (!root || !slides || !slideContent) {\n      return;\n    }\n\n    const deltaObject = { delta: 0 };\n\n    const baseDuration = slides.length / 2;\n    const staggerEach = 0.5;\n    const repeatDelay = baseDuration - staggerEach;\n\n    const deltaTo = gsap.quickTo(deltaObject, \"delta\", {\n      duration: 0.8,\n      ease: \"power1\",\n      onUpdate: () => {\n        tl.totalTime(deltaObject.delta);\n      },\n    });\n    const rotY = gsap.quickTo(root, \"rotationY\", {\n      duration: 0.3,\n      ease: \"power3\",\n    });\n    const rotX = gsap.quickTo(root, \"rotationX\", {\n      duration: 0.3,\n      ease: \"power3\",\n    });\n\n    const tl = gsap.timeline({ paused: true, smoothChildTiming: true });\n    tl.fromTo(\n      slides,\n      {\n        y: \"-15vw\",\n        z: \"-60vw\",\n        force3D: true,\n      },\n      {\n        y: \"0vw\",\n        z: \"0vw\",\n        ease: \"none\",\n        force3D: true,\n        immediateRender: false,\n        duration: baseDuration,\n        stagger: {\n          each: staggerEach,\n          repeat: -1,\n          repeatDelay: 0,\n        },\n      },\n    );\n\n    tl.fromTo(\n      slideContent,\n      {\n        y: \"10vh\",\n      },\n      {\n        y: 0,\n        ease: \"back.out(1.05)\",\n        duration: staggerEach,\n        stagger: {\n          each: staggerEach,\n          repeat: -1,\n          repeatDelay: repeatDelay,\n          onRepeat() {\n            this.targets()[0].style.transform = \"translateY(100vh)\";\n          },\n        },\n      },\n      \"<\",\n    );\n\n    tl.fromTo(\n      slideContent,\n      {\n        y: 0,\n      },\n      {\n        y: \"200vh\",\n        ease: \"power3.in\",\n        duration: staggerEach,\n        delay: repeatDelay,\n        stagger: {\n          each: staggerEach,\n          repeat: -1,\n          repeatDelay: repeatDelay,\n          onRepeat() {\n            this.targets()[0].style.transform = \"translateY(0vh)\";\n          },\n        },\n      },\n      \"<\",\n    );\n\n    const beginDistance = slides.length * 100;\n\n    tl.totalTime(beginDistance);\n\n    deltaTo(beginDistance + 0.01, beginDistance);\n\n    const snap = gsap.utils.snap(baseDuration / slides.length);\n\n    const handleWheel = (e: WheelEvent) => {\n      incr -= e.deltaY / 1000;\n      deltaTo(snap(incr + beginDistance));\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const valX = (e.clientY / window.innerHeight - 0.5) * 5;\n      const valY = (e.clientX / window.innerWidth - 0.5) * 10;\n      rotX(-valX);\n      rotY(valY);\n    };\n\n    window.addEventListener(\"wheel\", handleWheel, { passive: true });\n    root?.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      window.removeEventListener(\"wheel\", handleWheel);\n      root?.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  });\n\n  return (\n    <section className=\"effect h-screen overflow-hidden bg-[#121212] text-[#f1f1f1] [perspective:150vw]\">\n      <div className=\"root h-full [transform-style:preserve-3d]\" ref={rootRef}>\n        {cards.map((card) => (\n          <a\n            key={card.src}\n            className=\"slide absolute top-[calc(50%-5vw)] left-[calc(50%-20vw)] block [aspect-ratio:1.75] w-[40vw]\"\n            href={card.href}\n            target=\"_blank\"\n          >\n            <img\n              className=\"content h-full w-full rounded-[12px] object-cover\"\n              src={card.src}\n            />\n          </a>\n        ))}\n      </div>\n    </section>\n  );\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { CardStack } from \"./card-stack\";\n\nconst rootUrl =\n  \"https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/card-stack-1\";\n\nconst cards = [\n  { src: `${rootUrl}/uic.webp`, href: \"https://uicapsule.com\" },\n  { src: `${rootUrl}/kyh.webp`, href: \"https://kyh.io\" },\n  { src: `${rootUrl}/vg.webp`, href: \"https://vibedgames.com\" },\n  { src: `${rootUrl}/found.webp`, href: \"https://founding.so\" },\n  { src: `${rootUrl}/init.webp`, href: \"https://init.kyh.io\" },\n  { src: `${rootUrl}/tc.webp`, href: \"https://tc.kyh.io\" },\n  { src: `${rootUrl}/data.webp`, href: \"https://dataembed.com`\" },\n  { src: `${rootUrl}/ys.webp`, href: \"https://yourssincerely.org\" },\n];\n\nconst Preview = () => {\n  return <CardStack cards={cards} />;\n};\n\nexport default Preview;\n",
  "previousSlug": "background-shapes",
  "nextSlug": "carousel-3d"
},
  "carousel-3d": {
  "name": "3D Carousel",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/carousel-3d/carousel-3d.mp4",
  "coverType": "video",
  "tags": [
    "entertainment",
    "colorful",
    "carousels"
  ],
  "slug": "carousel-3d",
  "type": "local",
  "dependencies": {
    "@react-three/drei": "^10.7.7",
    "@react-three/fiber": "^9.5.0",
    "react": "*",
    "react-dom": "*",
    "three": "^0.180.0"
  },
  "devDependencies": {},
  "sourceCode": {
    "/carousel-3d.tsx": "import type { Group, Mesh, Texture } from \"three\";\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  Canvas,\n  extend,\n  Frameloop,\n  ThreeToJSXElements,\n  useFrame,\n  useLoader,\n  useThree,\n} from \"@react-three/fiber\";\nimport { DoubleSide, SRGBColorSpace, TextureLoader } from \"three\";\nimport {\n  abs,\n  add,\n  div,\n  length,\n  max,\n  mix,\n  mul,\n  positionLocal,\n  smoothstep,\n  sub,\n  texture,\n  uv,\n  vec4,\n} from \"three/tsl\";\nimport * as THREE from \"three/tsl\";\nimport { NodeMaterial, WebGPURenderer } from \"three/webgpu\";\n\ndeclare module \"@react-three/fiber\" {\n  interface ThreeElements extends ThreeToJSXElements<typeof THREE> {}\n}\n\nextend(THREE as any);\n\nexport const ImageCarouselCanvas = ({\n  backgroundColor = \"#6F6D66\",\n  children,\n}: {\n  backgroundColor?: string;\n  children: React.ReactNode;\n}) => {\n  const [frameloop, setFrameloop] = useState<Frameloop>(\"never\");\n\n  return (\n    <Canvas\n      shadows\n      camera={{ position: [0, 0, 12], fov: 45 }}\n      frameloop={frameloop}\n      gl={async (props) => {\n        const renderer = new WebGPURenderer(props as any);\n        renderer.init().then(() => {\n          setFrameloop(\"always\");\n        });\n        return renderer;\n      }}\n    >\n      <color attach=\"background\" args={[backgroundColor]} />\n      {children}\n    </Canvas>\n  );\n};\n\ntype ImageCarouselProps = {\n  images?: string[];\n  radius?: number;\n  imageWidth?: number;\n  cornerRadius?: number;\n  bendAmount?: number;\n  centerOpacity?: number;\n  adjacentOpacity?: number;\n  farOpacity?: number;\n  friction?: number;\n  wheelSensitivity?: number;\n  dragSensitivity?: number;\n  enableSnapping?: boolean;\n  autorotate?: boolean;\n  autorotateSpeed?: number;\n};\n\nexport const ImageCarousel = ({\n  images = [],\n  radius = 5,\n  imageWidth = 3,\n  cornerRadius = 0.15,\n  bendAmount = 0.1,\n  centerOpacity = 1.0,\n  adjacentOpacity = 1.0,\n  farOpacity = 1.0,\n  friction = 0.95,\n  wheelSensitivity = 0.002,\n  dragSensitivity = 0.0003,\n  enableSnapping = true,\n  autorotate = true,\n  autorotateSpeed = 0.02,\n}: ImageCarouselProps) => {\n  const groupRef = useRef<Group | null>(null);\n  const { gl, viewport } = useThree();\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // Smooth rotation state\n  const rotationRef = useRef(0);\n  const velocityRef = useRef(0);\n  const isDragging = useRef(false);\n  const lastMouseX = useRef(0);\n  const targetRotationRef = useRef(0);\n  const isSnapping = useRef(false);\n\n  // Animation state for fade-in and spin-in\n  const [isAnimatingIn, setIsAnimatingIn] = useState(true);\n  const animationProgress = useRef(0);\n  const initialRotation = useRef(-Math.PI * 0.5); // Start rotated 90 degrees\n\n  const textures = useLoader(TextureLoader, images, (loader) => {\n    loader.crossOrigin = \"anonymous\";\n  }) as Texture[];\n\n  // Set correct colorSpace for all textures\n  textures.forEach((texture) => {\n    texture.colorSpace = SRGBColorSpace;\n  });\n\n  // Mouse wheel handler\n  const handleWheel = (event) => {\n    event.preventDefault();\n    // Apply wheel sensitivity properly scaled\n    const wheelForce = event.deltaY * wheelSensitivity;\n    velocityRef.current += wheelForce;\n    isSnapping.current = false; // Stop snapping when user interacts\n  };\n\n  // Mouse drag handlers\n  const handleMouseDown = (event) => {\n    isDragging.current = true;\n    lastMouseX.current = event.clientX;\n    gl.domElement.style.cursor = \"grabbing\";\n  };\n\n  const handleMouseMove = (event) => {\n    if (!isDragging.current) return;\n\n    const deltaX = event.clientX - lastMouseX.current;\n    // Apply drag sensitivity properly scaled\n    const dragForce = deltaX * dragSensitivity;\n    velocityRef.current += dragForce;\n    lastMouseX.current = event.clientX;\n    isSnapping.current = false; // Stop snapping when user drags\n  };\n\n  const handleMouseUp = () => {\n    isDragging.current = false;\n    gl.domElement.style.cursor = \"grab\";\n  };\n\n  // Touch handlers for mobile\n  const handleTouchStart = (event) => {\n    isDragging.current = true;\n    lastMouseX.current = event.touches[0].clientX;\n  };\n\n  const handleTouchMove = (event) => {\n    if (!isDragging.current) return;\n\n    const deltaX = event.touches[0].clientX - lastMouseX.current;\n    // Apply drag sensitivity properly scaled\n    const dragForce = deltaX * dragSensitivity;\n    velocityRef.current += dragForce;\n    lastMouseX.current = event.touches[0].clientX;\n  };\n\n  const handleTouchEnd = () => {\n    isDragging.current = false;\n  };\n\n  // Event listeners setup\n  useEffect(() => {\n    const canvas = gl.domElement;\n\n    canvas.style.cursor = \"grab\";\n    canvas.addEventListener(\"wheel\", handleWheel, { passive: false });\n    canvas.addEventListener(\"mousedown\", handleMouseDown);\n    canvas.addEventListener(\"mousemove\", handleMouseMove);\n    canvas.addEventListener(\"mouseup\", handleMouseUp);\n    canvas.addEventListener(\"mouseleave\", handleMouseUp);\n\n    // Touch events\n    canvas.addEventListener(\"touchstart\", handleTouchStart, { passive: true });\n    canvas.addEventListener(\"touchmove\", handleTouchMove, { passive: true });\n    canvas.addEventListener(\"touchend\", handleTouchEnd);\n\n    return () => {\n      canvas.removeEventListener(\"wheel\", handleWheel);\n      canvas.removeEventListener(\"mousedown\", handleMouseDown);\n      canvas.removeEventListener(\"mousemove\", handleMouseMove);\n      canvas.removeEventListener(\"mouseup\", handleMouseUp);\n      canvas.removeEventListener(\"mouseleave\", handleMouseUp);\n      canvas.removeEventListener(\"touchstart\", handleTouchStart);\n      canvas.removeEventListener(\"touchmove\", handleTouchMove);\n      canvas.removeEventListener(\"touchend\", handleTouchEnd);\n    };\n  }, [gl.domElement]);\n\n  // Compute responsive image plane size from viewport\n  const baseAspect = 9 / 16; // 16:9 aspect ratio (height/width)\n  // Scale down images on smaller viewports, keep original size on large screens\n  const sizeScale = Math.min(1, viewport.width / 10);\n  const planeWidth = imageWidth * sizeScale;\n  const planeHeight = planeWidth * baseAspect;\n\n  // Smooth animation with friction and snapping\n  useFrame((state, delta) => {\n    if (!images.length) return;\n    if (groupRef.current) {\n      // Handle entrance animation\n      if (isAnimatingIn) {\n        animationProgress.current += delta * 0.5; // 2 seconds duration\n\n        if (animationProgress.current >= 1) {\n          animationProgress.current = 1;\n          setIsAnimatingIn(false);\n        }\n\n        // Smooth easing function\n        const easedProgress = 1 - Math.pow(1 - animationProgress.current, 3);\n\n        // Apply entrance animation\n        groupRef.current.rotation.y =\n          initialRotation.current +\n          (rotationRef.current - initialRotation.current) * easedProgress;\n\n        // Set opacity for fade-in effect\n        groupRef.current.children.forEach((child: any) => {\n          if (child.material) {\n            child.material.opacity = easedProgress;\n          }\n        });\n\n        return; // Skip normal rotation logic during entrance\n      }\n\n      // Handle autorotate\n      if (autorotate && !isDragging.current && !isSnapping.current) {\n        velocityRef.current += autorotateSpeed * delta;\n      }\n\n      const velocityThreshold = 0.002;\n\n      // Apply friction using delta time for frame-rate independence\n      const frictionFactor = Math.pow(friction, delta * 60); // Normalize to 60fps\n      velocityRef.current *= frictionFactor;\n\n      // Check if we should start snapping\n      if (\n        enableSnapping &&\n        !isDragging.current &&\n        !isSnapping.current &&\n        Math.abs(velocityRef.current) < velocityThreshold\n      ) {\n        // Calculate which image we're closest to\n        const anglePerImage = (Math.PI * 2) / images.length;\n        const currentRotation = rotationRef.current;\n\n        // Simple and reliable snapping logic\n        const currentAngle = -currentRotation; // Convert back to positive angle\n        const normalizedAngle =\n          ((currentAngle % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);\n\n        // Find which image we're closest to\n        const imageFloat = normalizedAngle / anglePerImage;\n        const nearestImageIndex = Math.round(imageFloat) % images.length;\n\n        // Calculate target rotation (keeping it negative as expected)\n        const targetRotation = -(nearestImageIndex * anglePerImage);\n\n        // Adjust target to be close to current rotation (avoid long rotations)\n        let bestTargetRotation = targetRotation;\n        const diff1 = Math.abs(targetRotation - currentRotation);\n        const diff2 = Math.abs(targetRotation + Math.PI * 2 - currentRotation);\n        const diff3 = Math.abs(targetRotation - Math.PI * 2 - currentRotation);\n\n        if (diff2 < diff1 && diff2 < diff3) {\n          bestTargetRotation = targetRotation + Math.PI * 2;\n        } else if (diff3 < diff1 && diff3 < diff2) {\n          bestTargetRotation = targetRotation - Math.PI * 2;\n        }\n\n        targetRotationRef.current = bestTargetRotation;\n        isSnapping.current = true;\n        velocityRef.current = 0;\n      }\n\n      // Handle snapping animation\n      if (isSnapping.current) {\n        let diff = targetRotationRef.current - rotationRef.current;\n\n        // Handle wraparound - choose shortest path\n        if (Math.abs(diff) > Math.PI) {\n          if (diff > 0) {\n            diff -= Math.PI * 2;\n          } else {\n            diff += Math.PI * 2;\n          }\n        }\n\n        const snapSpeed = 0.15;\n\n        if (Math.abs(diff) < 0.005) {\n          rotationRef.current = targetRotationRef.current;\n          isSnapping.current = false;\n        } else {\n          rotationRef.current += diff * snapSpeed;\n        }\n      } else {\n        // Update rotation normally with delta time\n        rotationRef.current += velocityRef.current * delta * 60; // Normalize to 60fps\n      }\n\n      // Apply smooth rotation to the group\n      groupRef.current.rotation.y = rotationRef.current;\n\n      // Update current index based on rotation\n      const anglePerImage = (Math.PI * 2) / images.length;\n      const currentAngle = -rotationRef.current;\n      const normalizedAngle =\n        ((currentAngle % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);\n      const newIndex =\n        Math.round(normalizedAngle / anglePerImage) % images.length;\n\n      if (newIndex !== currentIndex) {\n        setCurrentIndex(newIndex);\n      }\n    }\n  });\n\n  // Removed click-to-change functionality\n\n  const ImagePlane = ({\n    texture: imageTexture,\n    index,\n    total,\n  }: {\n    texture: Texture;\n    index: number;\n    total: number;\n  }) => {\n    const meshRef = useRef<Mesh | null>(null);\n    const angle = (index * Math.PI * 2) / total;\n    const x = Math.sin(angle) * radius;\n    const z = Math.cos(angle) * radius;\n\n    // Use fixed 16:9 aspect ratio for consistent appearance\n    const planeHeightForImage = planeWidth * (9 / 16);\n\n    // Calculate image position relative to current center\n    const getImagePosition = () => {\n      const totalImages = images.length;\n      let distance = Math.abs(index - currentIndex);\n\n      // Handle wraparound (e.g., if we have 6 images, image 0 and 5 are adjacent)\n      if (distance > totalImages / 2) {\n        distance = totalImages - distance;\n      }\n\n      return distance;\n    };\n\n    const getOpacity = () => {\n      const position = getImagePosition();\n\n      // Smooth opacity transitions between positions\n      if (position === 0) {\n        return centerOpacity; // Center image\n      } else if (position === 1) {\n        return adjacentOpacity; // Adjacent images\n      } else {\n        // Smooth interpolation for positions beyond adjacent\n        const maxPosition = Math.ceil(images.length / 2);\n        const normalizedPosition = Math.min(position, maxPosition);\n        const t = (normalizedPosition - 1) / (maxPosition - 1);\n        return adjacentOpacity + (farOpacity - adjacentOpacity) * t;\n      }\n    };\n\n    useFrame(() => {\n      if (meshRef.current) {\n        meshRef.current.lookAt(0, meshRef.current.position.y, 0);\n      }\n    });\n\n    // Create TSL material with rounded corners and cylindrical bending\n    const roundedCornersMaterial = useMemo(() => {\n      const material = new NodeMaterial();\n\n      // Individual plane cylindrical bending\n      const position = positionLocal;\n\n      // Bend each plane individually to look curved\n      // The bend should curve the plane inward toward the carousel center (like a cylinder segment)\n      const bendStrength = mul(bendAmount, 2.0); // More pronounced curvature\n      const normalizedX = div(position.x, planeWidth * 0.5); // Normalize to half-width for better curve\n      const curvature = mul(mul(normalizedX, normalizedX), bendStrength);\n      const bentZ = add(position.z, curvature); // Changed from sub to add for inward curve\n\n      material.positionNode = vec4(position.x, position.y, bentZ, position.w);\n\n      const uvCoords = uv();\n\n      const imageColor = texture(imageTexture, uvCoords);\n\n      // Calculate distance from center for rounded rectangle\n      const center = sub(uvCoords, 0.5);\n      const d = length(max(sub(abs(center), 0.5 - cornerRadius), 0.0));\n\n      // Create smooth mask for rounded corners\n      const mask = smoothstep(cornerRadius + 0.01, cornerRadius - 0.01, d);\n\n      // Mix transparent and image color based on mask\n      const finalColor = mix(vec4(0, 0, 0, 0), imageColor, mask);\n\n      material.colorNode = finalColor;\n      material.transparent = true;\n      material.side = DoubleSide;\n\n      return material;\n    }, [\n      imageTexture,\n      cornerRadius,\n      bendAmount,\n      planeWidth,\n      planeHeightForImage,\n    ]);\n\n    // Update opacity based on position\n    roundedCornersMaterial.opacity = getOpacity();\n\n    // Apply entrance animation opacity if still animating in\n    if (isAnimatingIn) {\n      roundedCornersMaterial.opacity = 0; // Start fully transparent\n    }\n\n    return (\n      <mesh\n        ref={meshRef}\n        position={[x, 0, z]}\n        material={roundedCornersMaterial}\n      >\n        <planeGeometry args={[planeWidth, planeHeightForImage, 32, 32]} />\n      </mesh>\n    );\n  };\n\n  if (!images.length) return null;\n\n  return (\n    <group ref={groupRef}>\n      {images.map((image, index) => (\n        <ImagePlane\n          key={`${image}-${index}`}\n          texture={textures[index]}\n          index={index}\n          total={images.length}\n        />\n      ))}\n      <pointLight position={[0, 2, 0]} intensity={0.5} />\n      <ambientLight intensity={0.3} />\n    </group>\n  );\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { ImageCarousel, ImageCarouselCanvas } from \"./carousel-3d\";\n\nconst rootUrl =\n  \"https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/carousel-3d\";\n\nconst cards = [\n  { src: `${rootUrl}/1.webp` },\n  { src: `${rootUrl}/2.webp` },\n  { src: `${rootUrl}/3.webp` },\n  { src: `${rootUrl}/4.webp` },\n  { src: `${rootUrl}/5.webp` },\n  { src: `${rootUrl}/6.webp` },\n  { src: `${rootUrl}/7.webp` },\n  { src: `${rootUrl}/8.webp` },\n];\n\nconst Preview = () => {\n  return (\n    <ImageCarouselCanvas>\n      <ImageCarousel images={cards.map((card) => card.src)} />\n    </ImageCarouselCanvas>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "card-stack",
  "nextSlug": "emerald-template"
},
  "emerald-template": {
  "name": "Emerald",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/prompt-animation/prompt-animation.mp4",
  "coverType": "video",
  "defaultSize": "full",
  "tags": [
    "business",
    "minimal",
    "landing-pages"
  ],
  "slug": "emerald-template",
  "type": "local",
  "dependencies": {
    "react": "*",
    "react-dom": "*",
    "@headless-tree/core": "^1.6.1",
    "@headless-tree/react": "^1.6.1",
    "@hookform/resolvers": "^5.2.2",
    "@tanstack/react-table": "^8.21.3",
    "class-variance-authority": "^0.7.1",
    "cmdk": "^1.1.1",
    "date-fns": "^4.1.0",
    "lucide-react": "^0.544.0",
    "motion": "^12.23.26",
    "next-themes": "^0.4.6",
    "radix-ui": "^1.4.3",
    "react-day-picker": "^9.13.0",
    "react-hook-form": "^7.69.0",
    "shiki": "^3.20.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.4.0",
    "tw-animate-css": "^1.4.0",
    "vaul": "^1.1.2"
  },
  "devDependencies": {},
  "sourceCode": {
    "/preview.css": ":root {\n  --background: hsl(240 10% 3.9%);\n  --foreground: hsl(0 0% 98%);\n  --card: hsl(240 10% 3.9%);\n  --card-foreground: hsl(0 0% 98%);\n  --popover: hsl(240 10% 3.9%);\n  --popover-foreground: hsl(0 0% 98%);\n  --primary: hsl(0 0% 98%);\n  --primary-foreground: hsl(240 5.9% 10%);\n  --secondary: hsl(240 3.7% 15.9%);\n  --secondary-foreground: hsl(0 0% 98%);\n  --muted: hsl(240 3.7% 15.9%);\n  --muted-foreground: hsl(240 5% 64.9%);\n  --accent: hsl(240 3.7% 15.9%);\n  --accent-foreground: hsl(0 0% 98%);\n  --destructive: hsl(0 62.8% 30.6%);\n  --destructive-foreground: hsl(0 0% 98%);\n  --border: hsl(240 3.7% 15.9%);\n  --input: hsl(240 3.7% 15.9%);\n  --ring: hsl(240 4.9% 83.9%);\n  --radius: 0.3rem;\n}\n\n.contained-page {\n  --viewport-padding: 16px;\n\n  display: grid;\n  grid-template-columns:\n    1fr\n    min(1024px, calc(100% - var(--viewport-padding) * 2))\n    1fr;\n  gap: 0 var(--viewport-padding);\n}\n\n.contained-page > * {\n  grid-column: 2;\n}\n\n.full-bleed {\n  width: 100%;\n  grid-column: 1 / 4;\n}\n\n@keyframes tilt {\n  0%,\n  50%,\n  100% {\n    transform: rotate(0deg);\n  }\n  25% {\n    transform: rotate(2deg);\n  }\n  75% {\n    transform: rotate(-2deg);\n  }\n}\n\n@keyframes disco {\n  from {\n    transform: translateY(-50%) rotate(0deg);\n  }\n  to {\n    transform: translateY(-50%) rotate(360deg);\n  }\n}\n\n@keyframes slide-across {\n  from {\n    transform: translateX(0);\n  }\n  to {\n    transform: translateX(-100%);\n  }\n}\n\n.animate-tilt {\n  animation: tilt 6s linear infinite;\n}\n\n.animate-disco {\n  animation: disco 6s linear infinite;\n}\n\n.animate-slide-across {\n  animation: slide-across linear infinite;\n}\n\n.container {\n  --border-radius: 12px;\n  --height: 400px;\n\n  text-align: start;\n  position: relative;\n}\n\n.container::before {\n  position: absolute;\n  top: -1px;\n  left: -1px;\n  z-index: -1;\n  width: calc(100% + 2px);\n  height: calc(100% + 2px);\n  background: linear-gradient(hsla(0, 0%, 100%, 0.1), transparent);\n  border-radius: var(--border-radius);\n  content: \"\";\n}\n\n.window {\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  background: linear-gradient(hsla(0, 0%, 100%, 0.06), transparent), #000;\n  border-radius: var(--border-radius);\n}\n\n.input {\n  position: relative;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  height: 86px;\n  padding: 0 32px;\n  color: #fff;\n  background-image: linear-gradient(transparent, rgba(0, 0, 0, 0.75));\n}\n\n.input::before {\n  position: absolute;\n  top: -10px;\n  left: 10%;\n  z-index: -1;\n  width: 80%;\n  height: 20px;\n  background-color: #16413d;\n  border-radius: 50%;\n  filter: blur(40px);\n  content: \"\";\n}\n\n.loading {\n  position: relative;\n  width: 100%;\n  height: 1px;\n  background: linear-gradient(hsla(0, 0%, 100%, 0.25), hsla(0, 0%, 100%, 0.05));\n}\n\n.loading::before,\n.loading::after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  background: linear-gradient(\n    90deg,\n    rgba(144, 224, 196, 0),\n    rgba(162, 183, 231, 0.5) 41%,\n    #059669 91%,\n    #6ee7b7 122%\n  );\n  transform-origin: 0 50%;\n  opacity: 0;\n  content: \"\";\n}\n\n.loading::before {\n  height: 4px;\n  filter: blur(4px) saturate(1.5);\n}\n\n.loading::after {\n  height: 1px;\n}\n\n.loading.active::before,\n.loading.active::after {\n  animation-name: loading;\n  animation-duration: 1.4s;\n  animation-timing-function: ease-in-out;\n  animation-fill-mode: forwards;\n}\n\n@keyframes loading {\n  0% {\n    transform: scaleX(0) translateX(-50%);\n    opacity: 1;\n  }\n  100% {\n    transform: scaleX(1) translateX(100%);\n  }\n}\n\n.output {\n  height: var(--height);\n  padding: 24px 32px;\n}\n\n.outputText {\n  min-height: calc(100% - 32px);\n  max-height: calc(100% - 32px);\n  overflow: hidden;\n  -webkit-mask-image: linear-gradient(0deg, transparent 0, #000 20%);\n  mask-image: linear-gradient(0deg, transparent 0, #000 20%);\n  white-space: pre-wrap;\n}\n\n.outputFooter {\n  position: absolute;\n  right: 32px;\n  bottom: 24px;\n  left: 32px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.cursor {\n  animation: cursor 1s infinite;\n  margin-left: 1px;\n}\n\n@keyframes cursor {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",
    "/_components/features-section.tsx": "import React from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\nimport {\n  ClipboardCheckIcon,\n  EyeIcon,\n  KeyIcon,\n  LockIcon,\n  SearchIcon,\n  TerminalSquareIcon,\n  UserIcon,\n  XIcon,\n} from \"lucide-react\";\n\nimport { HighlightCard } from \"./highlight-card\";\n\nconst SourceIcon = ({\n  Icon,\n  id,\n  className,\n}: {\n  Icon?: React.JSXElementConstructor<any>;\n  id?: string;\n  className?: string;\n}) => {\n  return (\n    <div\n      className={cn(\n        \"inline-flex justify-center rounded-full border border-dashed border-zinc-700 bg-zinc-900 p-3 text-white\",\n        className,\n      )}\n    >\n      {Icon && <Icon className=\"size-5\" />}\n      {id && (\n        <img\n          alt={id}\n          width={20}\n          height={20}\n          className=\"size-5\"\n          src={`https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/emerald-template/${id}.svg`}\n        />\n      )}\n    </div>\n  );\n};\n\nconst HomeCard = ({\n  className,\n  title,\n  description,\n  inline,\n  pattern,\n  children,\n}: {\n  className?: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  inline?: boolean;\n  pattern?: React.ReactNode;\n  children?: React.ReactNode;\n}) => {\n  return (\n    <HighlightCard\n      // size=\"lg\"\n      className={cn(\"grow\", className)}\n      pattern={pattern}\n      gridProps={{\n        y: -6,\n        squares: [\n          [-1, 2],\n          [1, 3],\n        ],\n      }}\n    >\n      <div\n        className={cn(\n          \"flex h-full items-center gap-5 text-center lg:gap-8 lg:text-start\",\n          inline ? \"flex-col\" : \"flex-col lg:flex-row\",\n        )}\n      >\n        <div className=\"flex min-w-[300px] shrink-0 flex-col gap-2 lg:gap-5\">\n          <h3 className=\"text-xl font-semibold sm:text-2xl\">{title}</h3>\n          <div className=\"text-start text-sm text-zinc-300 sm:text-base\">\n            {description}\n          </div>\n        </div>\n        {children}\n      </div>\n    </HighlightCard>\n  );\n};\n\nconst HomeCardDescriptionList = ({ points }: { points: React.ReactNode[] }) => (\n  <ul className=\"flex flex-col gap-1\">\n    {points.map((point, index) => (\n      <li className=\"flex items-start gap-2.5\" key={index}>\n        <svg\n          className=\"mt-1.5 h-4 w-4 flex-none text-green-500\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M5 13l4 4L19 7\"\n          />\n        </svg>\n        {point}\n      </li>\n    ))}\n  </ul>\n);\n\nexport const FeaturesSection = () => {\n  return (\n    <div className=\"mt-8 flex flex-col gap-8 lg:flex-row\">\n      <HomeCard\n        title=\"Prebuilt templates\"\n        description={\n          <HomeCardDescriptionList\n            points={[\n              \"Created by top operators\",\n              \"Customize them to fit your needs\",\n              \"Share them with your team\",\n            ]}\n          />\n        }\n        inline\n      >\n        <div className=\"relative h-80 w-full rounded-2xl border border-dashed border-zinc-700\">\n          <SearchIcon className=\"absolute top-4 left-6 h-4 w-4 text-zinc-700\" />\n          <XIcon className=\"absolute top-4 right-6 h-4 w-4 text-zinc-700\" />\n          <p className=\"absolute top-[14px] left-12 text-sm text-zinc-700\">\n            Build a churn analysis dashboard\n          </p>\n          <div className=\"absolute inset-x-4 inset-y-0 z-10 border-x border-dashed border-zinc-700\" />\n          <div className=\"absolute inset-x-0 top-0 h-12 border-b border-dashed border-zinc-700\" />\n          <div className=\"absolute inset-x-0 bottom-0 z-0 flex h-10 flex-row items-center gap-2 overflow-hidden border-t border-dashed border-zinc-700 px-6 text-xs text-zinc-700\">\n            <div className=\"rounded-md border border-dashed border-zinc-700 px-2 py-1 whitespace-nowrap\">\n              Reference 1\n            </div>\n            <div className=\"rounded-md border border-dashed border-zinc-700 px-2 py-1 whitespace-nowrap\">\n              Reference 2\n            </div>\n          </div>\n          <div className=\"absolute inset-x-8 inset-y-16 flex animate-pulse flex-col gap-4\">\n            <div className=\"h-2 w-4/5 rounded bg-zinc-700\" />\n            <div className=\"h-2 w-2/3 rounded bg-zinc-700\" />\n            <div className=\"h-2 w-1/3 rounded bg-zinc-700\" />\n            <div className=\"h-2 w-1/2 rounded bg-zinc-700\" />\n          </div>\n        </div>\n      </HomeCard>\n      <HomeCard\n        className=\"overflow-hidden text-xs\"\n        title=\"Private and secure by default\"\n        description={\n          <HomeCardDescriptionList\n            points={[\n              \"Built in permission and access control\",\n              \"End to end encryption\",\n              \"BYO database, model, or interface\",\n            ]}\n          />\n        }\n        pattern={\n          <div className=\"pointer-events-none absolute top-0 left-0 w-full bg-gradient-to-b from-transparent to-zinc-800 bg-clip-text font-mono text-xs leading-4 tracking-[4px] break-all text-transparent\">\n            0000101001010011011001010110001101110101011100100110100101110100011110010010000001100001011011100110010000100000010100000111001001101001011101100110000101100011011110010000101001010000011100100110100101110110011000010110001101111001001000000110000101101110011001000010000001110011011001010110001101110101011100100110100101110100011110010010000001100001011100100110010100100000011101000110111101101111001000000110100101101101011100000110111101110010011101000110000101101110011101000010000001100110011011110111001000100000011011000110010101100111011000010110110001100101011100110110010100100000010000110110110001100001011110010010000001100100011011110110010101110011001000000110111001101111011101000010000000001010010100110110010101100011011101010111001001101001011101000111100100100000011000010110111001100100001000000101000001110010011010010111011001100001011000110111100100001010010100000111001001101001011101100110000101100011011110010010000001100001011011100110010000100000011100110110010101100011011101010111001001101001011101000111100100100000011000010111001001100101001000000111010001101111011011110010000001101001011011010111000001101111011100100111010001100001011011100111010000100000011001100110111101110010001000000110110001100101011001110110000101101100011001010111001101100101001000000100001101101100011000010111100100100000011001000110111101100101011100110010000001101110011011110111010000100000000010100101001101100101011000110111010101110010011010010111010001111001001000000110000101101110011001000010000001010000011100100110100101110110011000010110001101111001000010100101000001110010011010010111011001100001011000110111100100100000011000010110111001100110111101110010001000000110110001100101011001110110000101101100011001010111001101100101001000000100001101101100011000010111100100100000011001000110111101100101011100110010000001101110011011110111010000100000000010100101001101100101011000110111010101110010011010010111010001111001001000000110000101101110011001000010000001010000011100100110100101110110011000010110001101111001000010100101000001110010011010010111011001100001011000110111100100100000011000010110110100110100101110110011000010110001101111001001000000110000101101101001101001011101100110000101100011011110010010000001100001011011\n          </div>\n        }\n        inline\n      >\n        <div className=\"mt-10 grid w-full grid-cols-3 gap-5\">\n          <div className=\"flex flex-col items-center\">\n            <SourceIcon className=\"rounded\" Icon={KeyIcon} />\n            Secure\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <SourceIcon className=\"rounded\" Icon={LockIcon} />\n            Encrypted\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <SourceIcon className=\"rounded\" Icon={ClipboardCheckIcon} />\n            Compliant\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <SourceIcon className=\"rounded\" Icon={UserIcon} />\n            Access Control\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <SourceIcon className=\"rounded\" Icon={EyeIcon} />\n            Observable\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <SourceIcon className=\"rounded\" Icon={TerminalSquareIcon} />\n            Scriptable\n          </div>\n        </div>\n      </HomeCard>\n    </div>\n  );\n};\n",
    "/_components/grid-pattern.tsx": "import React, { useId } from \"react\";\n\nexport type GridPatternProps = {\n  width: number;\n  height: number;\n  x?: number | string;\n  y?: number | string;\n  squares?: number[][];\n} & React.SVGProps<SVGSVGElement>;\n\nexport const GridPattern = ({\n  width,\n  height,\n  x,\n  y,\n  squares,\n  ...props\n}: GridPatternProps) => {\n  const patternId = useId();\n\n  return (\n    <svg aria-hidden=\"true\" {...props}>\n      <defs>\n        <pattern\n          id={patternId}\n          width={width}\n          height={height}\n          patternUnits=\"userSpaceOnUse\"\n          x={x}\n          y={y}\n        >\n          <path d={`M.5 ${height}V.5H${width}`} fill=\"none\" />\n        </pattern>\n      </defs>\n      <rect\n        width=\"100%\"\n        height=\"100%\"\n        strokeWidth={0}\n        fill={`url(#${patternId})`}\n      />\n      {squares && (\n        <svg x={x} y={y} className=\"overflow-visible\">\n          {squares.map(([x, y]) => (\n            <rect\n              strokeWidth=\"0\"\n              key={`${x}-${y}`}\n              width={width + 1}\n              height={height + 1}\n              x={(x ?? 0) * width}\n              y={(y ?? 0) * height}\n            />\n          ))}\n        </svg>\n      )}\n    </svg>\n  );\n};\n",
    "/_components/chain-of-thought.tsx": "\"use client\";\n\nimport type { LucideIcon } from \"lucide-react\";\nimport type { ComponentProps } from \"react\";\nimport React, { createContext, memo, useContext } from \"react\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { Badge } from \"../ui/badge.tsx\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"../ui/collapsible.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { BrainIcon, DotIcon } from \"lucide-react\";\n\ntype ChainOfThoughtContextValue = {\n  isOpen: boolean;\n  setIsOpen: (open: boolean) => void;\n};\n\nconst ChainOfThoughtContext = createContext<ChainOfThoughtContextValue | null>(\n  null,\n);\n\nconst useChainOfThought = () => {\n  const context = useContext(ChainOfThoughtContext);\n  if (!context) {\n    throw new Error(\n      \"ChainOfThought components must be used within ChainOfThought\",\n    );\n  }\n  return context;\n};\n\nexport type ChainOfThoughtProps = ComponentProps<\"div\"> & {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n};\n\nexport const ChainOfThought = memo(\n  ({\n    className,\n    open,\n    defaultOpen = false,\n    onOpenChange,\n    children,\n    ...props\n  }: ChainOfThoughtProps) => {\n    const [isOpen, setIsOpen] = useControllableState({\n      prop: open,\n      defaultProp: defaultOpen,\n      onChange: onOpenChange,\n    });\n\n    return (\n      <ChainOfThoughtContext.Provider value={{ isOpen, setIsOpen }}>\n        <div\n          className={cn(\"not-prose max-w-prose space-y-4\", className)}\n          {...props}\n        >\n          {children}\n        </div>\n      </ChainOfThoughtContext.Provider>\n    );\n  },\n);\n\nexport type ChainOfThoughtHeaderProps = ComponentProps<\n  typeof CollapsibleTrigger\n>;\n\nexport const ChainOfThoughtHeader = memo(\n  ({ className, children, ...props }: ChainOfThoughtHeaderProps) => {\n    const { isOpen, setIsOpen } = useChainOfThought();\n\n    return (\n      <Collapsible onOpenChange={setIsOpen} open={isOpen}>\n        <CollapsibleTrigger\n          className={cn(\n            \"text-muted-foreground flex w-full items-center gap-2 text-sm transition-colors\",\n            className,\n          )}\n          {...props}\n        >\n          <BrainIcon className=\"size-4\" />\n          <span className=\"flex-1 text-left\">\n            {children ?? \"Chain of Thought\"}\n          </span>\n        </CollapsibleTrigger>\n      </Collapsible>\n    );\n  },\n);\n\nexport type ChainOfThoughtStepProps = ComponentProps<\"div\"> & {\n  icon?: LucideIcon;\n  label: string;\n  description?: string;\n  status?: \"complete\" | \"active\" | \"pending\";\n};\n\nexport const ChainOfThoughtStep = memo(\n  ({\n    className,\n    icon: Icon = DotIcon,\n    label,\n    description,\n    status = \"complete\",\n    children,\n    ...props\n  }: ChainOfThoughtStepProps) => {\n    const statusStyles = {\n      complete: \"text-muted-foreground\",\n      active: \"text-emerald-600\",\n      pending: \"text-muted-foreground/50\",\n    };\n\n    return (\n      <div\n        className={cn(\n          \"flex gap-2 text-sm\",\n          statusStyles[status],\n          \"fade-in-0 slide-in-from-top-2 animate-in\",\n          className,\n        )}\n        {...props}\n      >\n        <div className=\"relative mt-0.5\">\n          <Icon className=\"size-4\" />\n          <div className=\"bg-border absolute top-7 bottom-0 left-1/2 -mx-px w-px\" />\n        </div>\n        <div className=\"flex-1 space-y-2\">\n          <div>{label}</div>\n          {description && (\n            <div className=\"text-muted-foreground text-xs\">{description}</div>\n          )}\n          {children}\n        </div>\n      </div>\n    );\n  },\n);\n\nexport type ChainOfThoughtSearchResultsProps = ComponentProps<\"div\">;\n\nexport const ChainOfThoughtSearchResults = memo(\n  ({ className, ...props }: ChainOfThoughtSearchResultsProps) => (\n    <div className={cn(\"flex items-center gap-2\", className)} {...props} />\n  ),\n);\n\nexport type ChainOfThoughtSearchResultProps = ComponentProps<typeof Badge>;\n\nexport const ChainOfThoughtSearchResult = memo(\n  ({ className, children, ...props }: ChainOfThoughtSearchResultProps) => (\n    <Badge\n      className={cn(\"gap-1 px-2 py-0.5 text-xs font-normal\", className)}\n      variant=\"secondary\"\n      {...props}\n    >\n      {children}\n    </Badge>\n  ),\n);\n\nexport type ChainOfThoughtContentProps = ComponentProps<\n  typeof CollapsibleContent\n>;\n\nexport const ChainOfThoughtContent = memo(\n  ({ className, children, ...props }: ChainOfThoughtContentProps) => {\n    const { isOpen } = useChainOfThought();\n\n    return (\n      <Collapsible open={isOpen}>\n        <CollapsibleContent\n          className={cn(\n            \"mt-2 space-y-3\",\n            \"data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground data-[state=closed]:animate-out data-[state=open]:animate-in outline-none\",\n            className,\n          )}\n          {...props}\n        >\n          {children}\n        </CollapsibleContent>\n      </Collapsible>\n    );\n  },\n);\n\nexport type ChainOfThoughtImageProps = ComponentProps<\"div\"> & {\n  caption?: string;\n};\n\nexport const ChainOfThoughtImage = memo(\n  ({ className, children, caption, ...props }: ChainOfThoughtImageProps) => (\n    <div className={cn(\"mt-2 space-y-2\", className)} {...props}>\n      <div className=\"bg-muted relative flex max-h-[22rem] items-center justify-center overflow-hidden rounded-lg p-3\">\n        {children}\n      </div>\n      {caption && <p className=\"text-muted-foreground text-xs\">{caption}</p>}\n    </div>\n  ),\n);\n\nChainOfThought.displayName = \"ChainOfThought\";\nChainOfThoughtHeader.displayName = \"ChainOfThoughtHeader\";\nChainOfThoughtStep.displayName = \"ChainOfThoughtStep\";\nChainOfThoughtSearchResults.displayName = \"ChainOfThoughtSearchResults\";\nChainOfThoughtSearchResult.displayName = \"ChainOfThoughtSearchResult\";\nChainOfThoughtContent.displayName = \"ChainOfThoughtContent\";\nChainOfThoughtImage.displayName = \"ChainOfThoughtImage\";\n",
    "/_components/footer.tsx": "import React from \"react\";\n\nimport { Logo } from \"./logo\";\nimport { WaitlistForm } from \"./waitlist-form\";\n\nexport const Footer = () => {\n  return (\n    <footer className=\"mt-20 border-t border-white/10 text-sm sm:mt-24\">\n      <div className=\"mx-auto max-w-5xl px-5 py-10 md:pt-16 md:pb-12\">\n        <div className=\"flex w-full justify-between pb-10 md:pb-12\">\n          <div className=\"hidden md:block\">\n            <Logo />\n          </div>\n          <div className=\"flex w-full justify-between md:w-auto md:gap-20\">\n            <ul className=\"flex flex-col gap-2\">\n              <p className=\"text-muted-foreground\">Resources</p>\n              <li>\n                <a href=\"/docs\">Documentation</a>\n              </li>\n              <li>\n                <a href=\"/blog\">Blog</a>\n              </li>\n            </ul>\n            <ul className=\"flex flex-col gap-2\">\n              <p className=\"text-muted-foreground\">Company</p>\n              <li>\n                <a href=\"/about\">About</a>\n              </li>\n              <li>\n                <a href=\"/terms\">Terms of Use</a>\n              </li>\n              <li>\n                <a href=\"/privacy\">Privacy Policy</a>\n              </li>\n            </ul>\n            <ul className=\"flex flex-col gap-2\">\n              <p className=\"text-muted-foreground\">Support</p>\n              <li>\n                <a href=\"/help\">Help center</a>\n              </li>\n              <li>\n                <a href=\"/contact\">Contact</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div className=\"flex flex-col justify-between gap-5 border-t border-white/10 py-8 md:flex-row\">\n          <div className=\"w-full md:w-[30%]\">\n            <p>\n              Subscribe to receive our latest updates right to your inbox \n            </p>\n          </div>\n          <div className=\"flex items-center gap-2 md:ml-auto\">\n            <WaitlistForm />\n          </div>\n        </div>\n        <SmallPrint />\n      </div>\n    </footer>\n  );\n};\n\nconst TwitterIcon = (props: React.SVGProps<SVGSVGElement>) => {\n  return (\n    <svg viewBox=\"0 0 20 20\" aria-hidden=\"true\" {...props}>\n      <path d=\"M16.712 6.652c.01.146.01.29.01.436 0 4.449-3.267 9.579-9.242 9.579v-.003a8.963 8.963 0 0 1-4.98-1.509 6.379 6.379 0 0 0 4.807-1.396c-1.39-.027-2.608-.966-3.035-2.337.487.097.99.077 1.467-.059-1.514-.316-2.606-1.696-2.606-3.3v-.041c.45.26.956.404 1.475.42C3.18 7.454 2.74 5.486 3.602 3.947c1.65 2.104 4.083 3.382 6.695 3.517a3.446 3.446 0 0 1 .94-3.217 3.172 3.172 0 0 1 4.596.148 6.38 6.38 0 0 0 2.063-.817 3.357 3.357 0 0 1-1.428 1.861 6.283 6.283 0 0 0 1.865-.53 6.735 6.735 0 0 1-1.62 1.744Z\" />\n    </svg>\n  );\n};\n\nconst GitHubIcon = (props: React.SVGProps<SVGSVGElement>) => {\n  return (\n    <svg viewBox=\"0 0 20 20\" aria-hidden=\"true\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M10 1.667c-4.605 0-8.334 3.823-8.334 8.544 0 3.78 2.385 6.974 5.698 8.106.417.075.573-.182.573-.406 0-.203-.011-.875-.011-1.592-2.093.397-2.635-.522-2.802-1.002-.094-.246-.5-1.005-.854-1.207-.291-.16-.708-.556-.01-.567.656-.01 1.124.62 1.281.876.75 1.292 1.948.93 2.427.705.073-.555.291-.93.531-1.143-1.854-.213-3.791-.95-3.791-4.218 0-.929.322-1.698.854-2.296-.083-.214-.375-1.09.083-2.265 0 0 .698-.224 2.292.876a7.576 7.576 0 0 1 2.083-.288c.709 0 1.417.096 2.084.288 1.593-1.11 2.291-.875 2.291-.875.459 1.174.167 2.05.084 2.263.53.599.854 1.357.854 2.297 0 3.278-1.948 4.005-3.802 4.219.302.266.563.78.563 1.58 0 1.143-.011 2.061-.011 2.35 0 .224.156.491.573.405a8.365 8.365 0 0 0 4.11-3.116 8.707 8.707 0 0 0 1.567-4.99c0-4.721-3.73-8.545-8.334-8.545Z\"\n      />\n    </svg>\n  );\n};\n\nconst SocialLink = ({\n  href,\n  icon: Icon,\n  children,\n}: {\n  href: string;\n  icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n  children: React.ReactNode;\n}) => {\n  return (\n    <a href={href} className=\"group\">\n      <span className=\"sr-only\">{children}</span>\n      <Icon className=\"h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500\" />\n    </a>\n  );\n};\n\nexport const SmallPrint = () => {\n  return (\n    <div className=\"flex flex-col items-center justify-between gap-5 border-t border-white/10 pt-8 sm:flex-row\">\n      <p className=\"text-xs text-zinc-400\">\n        &copy; Copyright {new Date().getFullYear()}. All rights reserved.\n      </p>\n      <div className=\"flex gap-4\">\n        <SocialLink href={\"\"} icon={TwitterIcon}>\n          Follow us on Twitter\n        </SocialLink>\n        <SocialLink href={\"\"} icon={GitHubIcon}>\n          Follow us on GitHub\n        </SocialLink>\n      </div>\n    </div>\n  );\n};\n",
    "/_components/header.tsx": "\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { buttonVariants } from \"../ui/button.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { useScroll } from \"motion/react\";\n\nimport { Logo } from \"./logo\";\n\nconst baseContainerClassName = \"sticky top-0 z-40 w-full bg-transparent\";\n\nexport const Header = () => {\n  const [containerClassName, setContainerClassName] = useState(\n    baseContainerClassName,\n  );\n\n  const { scrollY } = useScroll();\n\n  useEffect(() => {\n    const subscription = scrollY.on(\"change\", () => {\n      if (scrollY.get() > 100) {\n        setContainerClassName(cn(baseContainerClassName, \"backdrop-blur\"));\n      } else {\n        setContainerClassName(baseContainerClassName);\n      }\n    });\n    return () => subscription();\n  }, [scrollY]);\n\n  return (\n    <header className={containerClassName}>\n      <div className=\"mx-auto flex h-16 w-full max-w-5xl items-center justify-between gap-4 px-5\">\n        <div className=\"flex-1\">\n          <a href=\"/\">\n            <Logo />\n          </a>\n        </div>\n        <nav className=\"flex flex-1 justify-center\">\n          <ul className=\"flex gap-3 text-sm md:gap-8\">\n            <li>\n              <a href=\"/\">Home</a>\n            </li>\n            <li>\n              <a href=\"/docs\">Documentation</a>\n            </li>\n          </ul>\n        </nav>\n        <div className=\"flex flex-1 justify-end\">\n          <a\n            className={cn(\n              buttonVariants({ variant: \"secondary\", size: \"sm\" }),\n              \"ml-4 w-24 rounded-full px-5\",\n            )}\n            href=\"/auth/login\"\n          >\n            Login\n          </a>\n        </div>\n      </div>\n    </header>\n  );\n};\n",
    "/_components/hero-section.tsx": "import React from \"react\";\n\nimport { GridPattern } from \"./grid-pattern\";\nimport { HeroExample } from \"./hero-example\";\n\nconst HeroPattern = () => {\n  return (\n    <div className=\"absolute inset-0 -z-10 [mask-image:linear-gradient(white,transparent_75%)]\">\n      <GridPattern\n        width={72}\n        height={56}\n        x=\"-12\"\n        y=\"4\"\n        squares={[\n          [4, 3],\n          [2, 1],\n          [7, 3],\n          [10, 6],\n        ]}\n        className=\"h-full w-full fill-white/[0.025] stroke-white/5 mix-blend-overlay\"\n      />\n    </div>\n  );\n};\n\nexport const HeroSection = () => {\n  return (\n    <>\n      <HeroPattern />\n      <section className=\"px-5 pt-[70px] sm:pt-[100px]\">\n        <h1 className=\"mx-auto mt-3 max-w-xl text-3xl font-semibold sm:text-4xl\">\n          <span className=\"block bg-gradient-to-b from-emerald-300 to-green-600 bg-clip-text text-transparent\">\n            Generate software products\n          </span>\n          <span>on your organization data</span>\n        </h1>\n        <p className=\"mx-auto mt-6 max-w-md text-base whitespace-pre-line text-zinc-400\">\n          Everyone on your team should be able to build software to automate\n          their own day to day workflows\n        </p>\n        <div className=\"mt-8 grid items-start justify-center gap-4\">\n          <a className=\"group relative text-xs\" href=\"\">\n            <div className=\"animate-tilt absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-600 to-teal-600 opacity-75 blur transition group-hover:opacity-100\" />\n            <div className=\"relative flex items-center rounded-full bg-black bg-gradient-to-t from-zinc-900 px-7 py-2.5 text-emerald-400 transition group-hover:text-zinc-100\">\n              Start Building &rarr;\n            </div>\n          </a>\n          <span className=\"text-muted-foreground text-sm\">See samples</span>\n        </div>\n      </section>\n      <div className=\"full-bleed relative\">\n        <video\n          preload=\"metadata\"\n          loop\n          autoPlay\n          muted\n          playsInline\n          className=\"pointer-events-none absolute inset-0 w-full translate-y-10 [mask-image:linear-gradient(transparent_10%,black,transparent)] opacity-50 mix-blend-lighten hue-rotate-[250deg]\"\n        >\n          <source src=\"https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/emerald-template/home-hero-bg.mov\" />\n        </video>\n        <HeroExample />\n      </div>\n    </>\n  );\n};\n",
    "/_components/highlight-card.tsx": "import type { MotionValue } from \"motion/react\";\nimport React from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { motion, useMotionTemplate, useMotionValue } from \"motion/react\";\n\nimport type { GridPatternProps } from \"./grid-pattern\";\nimport { GridPattern } from \"./grid-pattern\";\n\nconst Pattern = ({\n  mouseX,\n  mouseY,\n  ...gridProps\n}: {\n  mouseX: MotionValue<any>;\n  mouseY: MotionValue<any>;\n  gridProps?: Omit<GridPatternProps, \"width\" | \"height\">;\n}) => {\n  const maskImage = useMotionTemplate`radial-gradient(1000px at ${mouseX}px ${mouseY}px, rgba(255,255,255,.5), transparent 40%)`;\n  const style = { maskImage, WebkitMaskImage: maskImage };\n\n  return (\n    <div className=\"pointer-events-none\">\n      <div className=\"absolute inset-0 rounded-2xl [mask-image:linear-gradient(white,transparent)] transition duration-300 group-hover:opacity-50\">\n        <GridPattern\n          width={72}\n          height={56}\n          x=\"50%\"\n          className=\"absolute inset-x-0 inset-y-[-30%] h-[160%] w-full fill-white/[0.025] stroke-white/5\"\n          {...gridProps}\n        />\n      </div>\n      <motion.div\n        className=\"absolute inset-0 rounded-2xl bg-gradient-to-r from-[#202e26] to-[#28342e] opacity-0 transition duration-300 group-hover:opacity-100\"\n        style={style}\n      />\n      <motion.div\n        className=\"absolute inset-0 rounded-2xl opacity-0 mix-blend-overlay transition duration-300 group-hover:opacity-100\"\n        style={style}\n      >\n        <GridPattern\n          width={72}\n          height={56}\n          x=\"50%\"\n          className=\"absolute inset-x-0 inset-y-[-30%] h-[160%] w-full fill-white/[0.025] stroke-white/10\"\n          {...gridProps}\n        />\n      </motion.div>\n    </div>\n  );\n};\n\nexport const HighlightCard = ({\n  className,\n  gridProps,\n  children,\n  pattern = null,\n  ...props\n}: {\n  className?: string;\n  gridProps?: Omit<GridPatternProps, \"width\" | \"height\">;\n  pattern?: React.ReactNode;\n  children?: React.ReactNode;\n} & React.ComponentProps<typeof Card>) => {\n  const mouseX = useMotionValue(0);\n  const mouseY = useMotionValue(0);\n\n  const onMouseMove = ({\n    currentTarget,\n    clientX,\n    clientY,\n  }: React.MouseEvent) => {\n    const { left, top } = currentTarget.getBoundingClientRect();\n    mouseX.set(clientX - left);\n    mouseY.set(clientY - top);\n  };\n\n  return (\n    <Card\n      className={cn(\n        \"group shadow-highlight relative rounded-2xl bg-zinc-900/90\",\n        className,\n      )}\n      onMouseMove={onMouseMove}\n      {...props}\n    >\n      {pattern}\n      <Pattern {...gridProps} mouseX={mouseX} mouseY={mouseY} />\n      <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/0 ring-inset group-hover:ring-white/5\" />\n      <div className=\"relative h-full\">{children}</div>\n    </Card>\n  );\n};\n\nconst Card = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    data-slot=\"card\"\n    className={cn(\n      \"bg-card flex flex-col gap-3 overflow-hidden border p-3\",\n      className,\n    )}\n    {...props}\n  />\n);\n",
    "/_components/infinite-loop.tsx": "import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\n\nexport const InfiniteLooper = ({\n  speed = 70,\n  direction = \"right\",\n  children,\n  className,\n  containerClassName,\n}: {\n  speed?: number;\n  direction?: \"right\" | \"left\";\n  children: React.ReactNode;\n  className?: string;\n  containerClassName?: string;\n}) => {\n  const [animating, setAnimating] = useState(true);\n  const [looperInstances, setLooperInstances] = useState(1);\n  const outerRef = useRef<HTMLDivElement>(null);\n  const innerRef = useRef<HTMLDivElement>(null);\n\n  const setupInstances = useCallback(() => {\n    if (!innerRef?.current || !outerRef?.current) return;\n\n    const resetAnimation = () => {\n      if (innerRef?.current) {\n        setAnimating(false);\n\n        setTimeout(() => {\n          if (innerRef?.current) {\n            setAnimating(true);\n          }\n        }, 10);\n      }\n    };\n\n    const { width } = innerRef.current.getBoundingClientRect();\n    const { width: parentWidth } = outerRef.current.getBoundingClientRect();\n\n    const widthDeficit = parentWidth - width;\n    const instanceWidth = width / innerRef.current.children.length;\n\n    if (widthDeficit) {\n      setLooperInstances(\n        looperInstances + Math.ceil(widthDeficit / instanceWidth) + 1,\n      );\n    }\n\n    resetAnimation();\n  }, [looperInstances]);\n\n  useEffect(() => setupInstances(), [setupInstances]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", setupInstances);\n\n    return () => {\n      window.removeEventListener(\"resize\", setupInstances);\n    };\n  }, [looperInstances, setupInstances]);\n\n  return (\n    <div\n      className={cn(\"w-full overflow-hidden\", containerClassName)}\n      ref={outerRef}\n    >\n      <div\n        className={cn(\"flex w-fit justify-center\", className)}\n        ref={innerRef}\n      >\n        {[...Array(looperInstances)].map((_, index) => (\n          <div\n            key={index}\n            className={cn(\"flex w-max\", animating && \"animate-slide-across\")}\n            style={{\n              animationDuration: `${speed}s`,\n              animationDirection: direction === \"right\" ? \"reverse\" : \"normal\",\n            }}\n          >\n            {children}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n",
    "/_components/integrations-section.tsx": "import React from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\n\nimport { HighlightCard } from \"./highlight-card\";\nimport { InfiniteLooper } from \"./infinite-loop\";\n\nconst HomeCard = ({\n  className,\n  title,\n  description,\n  inline,\n  pattern,\n  children,\n}: {\n  className?: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  inline?: boolean;\n  pattern?: React.ReactNode;\n  children?: React.ReactNode;\n}) => {\n  return (\n    <HighlightCard\n      // size=\"lg\"\n      className={cn(\"grow\", className)}\n      pattern={pattern}\n      gridProps={{\n        y: -6,\n        squares: [\n          [-1, 2],\n          [1, 3],\n        ],\n      }}\n    >\n      <div\n        className={cn(\n          \"flex h-full items-center gap-5 text-center lg:gap-8 lg:text-start\",\n          inline ? \"flex-col\" : \"flex-col lg:flex-row\",\n        )}\n      >\n        <div className=\"flex min-w-[300px] shrink-0 flex-col gap-2 lg:gap-5\">\n          <h3 className=\"text-xl font-semibold sm:text-2xl\">{title}</h3>\n          <div className=\"text-start text-sm text-zinc-300 sm:text-base\">\n            {description}\n          </div>\n        </div>\n        {children}\n      </div>\n    </HighlightCard>\n  );\n};\n\nconst HomeCardDescriptionList = ({ points }: { points: React.ReactNode[] }) => (\n  <ul className=\"flex flex-col gap-1\">\n    {points.map((point, index) => (\n      <li className=\"flex items-start gap-2.5\" key={index}>\n        <svg\n          className=\"mt-1.5 h-4 w-4 flex-none text-green-500\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M5 13l4 4L19 7\"\n          />\n        </svg>\n        {point}\n      </li>\n    ))}\n  </ul>\n);\n\nconst QuestionCard = ({ children }: { children: React.ReactNode }) => {\n  return (\n    <div className=\"mr-3 rounded border border-dashed border-zinc-700 bg-zinc-900 p-3 text-xs text-white\">\n      {children}\n    </div>\n  );\n};\n\nexport const IntegrationsSection = () => {\n  return (\n    <HomeCard\n      className=\"mt-8 lg:pl-10\"\n      title=\"We'll go where you go\"\n      description={\n        <HomeCardDescriptionList\n          points={[\n            \"Direct data integrations with the tools you already use\",\n            \"Multi-platform to work where you work\",\n          ]}\n        />\n      }\n    >\n      <div className=\"w-full overflow-hidden\">\n        <h3 className=\"text-center text-xs\">Things people have asked:</h3>\n        <InfiniteLooper containerClassName=\"mt-3\">\n          <QuestionCard>When does the next fundraise start?</QuestionCard>\n          <QuestionCard>Whats the latest on the Block deal?</QuestionCard>\n          <QuestionCard>Who is managing design system project?</QuestionCard>\n        </InfiniteLooper>\n        <InfiniteLooper containerClassName=\"mt-3\" speed={120} direction=\"left\">\n          <QuestionCard>Can you summarize the last all hands?</QuestionCard>\n          <QuestionCard>Whats does the Grow team do?</QuestionCard>\n          <QuestionCard>\n            Can you provide a changelog of everything shipped in TC this week?\n          </QuestionCard>\n          <QuestionCard>Whats our HR policy on working from home?</QuestionCard>\n        </InfiniteLooper>\n        <InfiniteLooper containerClassName=\"mt-3\" speed={30}>\n          <QuestionCard>Who do I contact to get Airtable access?</QuestionCard>\n          <QuestionCard>\n            Who is responsible for the design of the landing experience?\n          </QuestionCard>\n        </InfiniteLooper>\n      </div>\n    </HomeCard>\n  );\n};\n",
    "/_components/hero-example.tsx": "\"use client\";\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Badge } from \"../ui/badge.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\nimport {\n  BarChart3,\n  BookOpen,\n  CheckCircle,\n  FileText,\n  GitBranch,\n  Search,\n  Shield,\n  Users,\n} from \"lucide-react\";\nimport {\n  AnimatePresence,\n  motion,\n  useInView,\n  useMotionValueEvent,\n  useScroll,\n  useTransform,\n} from \"motion/react\";\n\nimport {\n  ChainOfThought,\n  ChainOfThoughtContent,\n  ChainOfThoughtHeader,\n  ChainOfThoughtStep,\n} from \"./chain-of-thought\";\n\nconst scrollYProgressMap = [0, 0.1];\n\nexport const HeroExample = () => {\n  const [isScaled, setIsScaled] = useState(false);\n  const ref = useRef(null);\n  const isInView = useInView(ref, {\n    amount: 1,\n  });\n  const { scrollYProgress } = useScroll();\n  const y = useTransform(scrollYProgress, scrollYProgressMap, [21.28, 0]);\n  const z = useTransform(scrollYProgress, scrollYProgressMap, [-74.56, 0]);\n  const rotateX = useTransform(scrollYProgress, scrollYProgressMap, [40, 0]);\n  const scale = useTransform(scrollYProgress, scrollYProgressMap, [0.9, 1]);\n\n  useMotionValueEvent(scale, \"change\", (latest) => {\n    if (latest > 0.97) {\n      setIsScaled(true);\n    } else {\n      setIsScaled(false);\n    }\n  });\n\n  const shouldRun = isScaled && isInView;\n\n  return (\n    <>\n      <AnimatePresence>\n        {shouldRun && (\n          <motion.div\n            className=\"pointer-events-none fixed inset-0 bg-transparent backdrop-blur transition\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          />\n        )}\n      </AnimatePresence>\n      <motion.div\n        ref={ref}\n        className=\"mx-auto mt-10 max-w-[900px] px-3 shadow\"\n        style={{\n          transformPerspective: 3312,\n          y,\n          z,\n          rotateX,\n          scale,\n        }}\n      >\n        <ExampleChat start={shouldRun} />\n      </motion.div>\n    </>\n  );\n};\n\nconst samples = [\n  {\n    input:\n      \"Can you provide a changelog of everything shipped in Dataembed this week?\",\n    output: {\n      reasoning: [\n        {\n          text: \"Searching through Asana tickets for this week...\",\n          icon: Search,\n        },\n        {\n          text: \"Checking GitHub commits and pull requests...\",\n          icon: GitBranch,\n        },\n        {\n          text: \"Analyzing version releases and deployments...\",\n          icon: BarChart3,\n        },\n        { text: \"Compiling changelog information...\", icon: FileText },\n      ],\n      text: `\nAccording to Asana and Github commits, the following things were completed this week:\n\nVersion 1.1.2 launch - ${new Date().toLocaleDateString()}:\n- Added a new feature for sentiment analysis, allowing users to analyze the sentiment of text inputs\n- Improved the accuracy of the image recognition module by integrating the Azure deep learning model\n- Fixed a bug that caused the application to crash when processing large datasets\n- Optimized the performance of the recommendation engine\n      `.trim(),\n      references: [\n        { source: \"asana\", content: \"Ticket #1704\" },\n        { source: \"github\", content: \"PR #102\" },\n      ],\n    },\n  },\n  {\n    input: \"Who is responsible for the new landing experience?\",\n    output: {\n      reasoning: [\n        {\n          text: \"Looking up project ownership in team directory...\",\n          icon: Users,\n        },\n        { text: \"Checking project documentation and specs...\", icon: BookOpen },\n        {\n          text: \"Finding team lead and stakeholder information...\",\n          icon: Search,\n        },\n        { text: \"Gathering project context and background...\", icon: FileText },\n      ],\n      text: `\nThe team responsible for \"Project Neue\", the new landing page, is the Grow team. It is an initiative launched by Kevin Wu to showcase our free training and resources programs, to help people acquire the digital skills they need to succeed in the modern economy.\n\nThe initiative aims to bridge the digital skills gap and provide opportunities for individuals and businesses to learn and grow.\n\nThe Grow team collaborates with various partners, including educational institutions, nonprofits, and local communities, to deliver in-person workshops, online training courses, and other resources. \n      `.trim(),\n      references: [\n        { source: \"site\", content: \"Grow Team\" },\n        { source: \"notion\", content: \"Project Neue\" },\n        { source: \"person\", content: \"Kevin Wu (Grow)\" },\n      ],\n    },\n  },\n  {\n    input: \"Whats our HR policy on working from home?\",\n    output: {\n      reasoning: [\n        { text: \"Searching HR policy documents...\", icon: Search },\n        {\n          text: \"Checking employee handbook for remote work...\",\n          icon: BookOpen,\n        },\n        { text: \"Looking up recent policy updates...\", icon: Shield },\n        { text: \"Verifying current guidelines...\", icon: CheckCircle },\n      ],\n      text: \"According to the latest onboarding docs, we have a flexible work policy. You can work from home as long as you get your work done and are available for meetings.\",\n      references: [\n        { source: \"ppt\", content: \"Onboarding 101\" },\n        { source: \"person\", content: \"Patty (HR)\" },\n      ],\n    },\n  },\n];\n\nconst wait = (delay: number) => {\n  let timeout: ReturnType<typeof setTimeout>;\n\n  const promise = new Promise((resolve) => {\n    timeout = setTimeout(resolve, delay);\n  });\n\n  return {\n    promise,\n    cancel: () => clearTimeout(timeout),\n  };\n};\n\nconst AnimatedIcon = React.memo(\n  ({\n    stepIndex,\n    staticIcon,\n    currentStepIndex,\n  }: {\n    stepIndex: number;\n    staticIcon: any;\n    currentStepIndex: number;\n  }) => {\n    const status =\n      stepIndex < currentStepIndex\n        ? \"complete\"\n        : stepIndex === currentStepIndex\n          ? \"active\"\n          : \"pending\";\n\n    return (\n      <AnimatePresence mode=\"wait\">\n        {status === \"active\" ? (\n          <motion.div\n            key=\"spinner\"\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.8, opacity: 0 }}\n            transition={{\n              duration: 0.2,\n              ease: \"easeOut\",\n            }}\n          >\n            <Spinner />\n          </motion.div>\n        ) : status === \"complete\" && staticIcon ? (\n          <motion.div\n            key=\"icon\"\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{\n              duration: 0.3,\n              ease: \"easeOut\",\n            }}\n          >\n            {React.createElement(staticIcon, { size: 16 })}\n          </motion.div>\n        ) : (\n          <motion.div\n            key=\"pending\"\n            initial={{ scale: 1, opacity: 0.3 }}\n            animate={{ scale: 1, opacity: 0.3 }}\n          >\n            {staticIcon && React.createElement(staticIcon, { size: 16 })}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    );\n  },\n);\n\nconst MemoizedChainOfThoughtStep = React.memo(\n  ({\n    stepIndex,\n    staticIcon,\n    label,\n    currentStepIndex,\n  }: {\n    stepIndex: number;\n    staticIcon: any;\n    label: string;\n    currentStepIndex: number;\n  }) => {\n    const status =\n      stepIndex < currentStepIndex\n        ? \"complete\"\n        : stepIndex === currentStepIndex\n          ? \"active\"\n          : \"pending\";\n\n    return (\n      <ChainOfThoughtStep\n        icon={() => (\n          <AnimatedIcon\n            stepIndex={stepIndex}\n            staticIcon={staticIcon}\n            currentStepIndex={currentStepIndex}\n          />\n        )}\n        label={label}\n        status={status}\n      />\n    );\n  },\n);\n\nexport const ExampleChat = ({ start }: { start: boolean }) => {\n  const promisesRef = useRef<any[]>([]);\n  const [currentSampleIndex, setCurrentSampleIndex] = useState(0);\n  const [showQuestion, setShowQuestion] = useState(true);\n  const [showLoading, setShowLoading] = useState(false);\n  const [showChainOfThought, setShowChainOfThought] = useState(false);\n  const [chainOfThoughtOpen, setChainOfThoughtOpen] = useState(true);\n  const [showAnswer, setShowAnswer] = useState(false);\n  const [showFooter, setShowFooter] = useState(false);\n  const [currentStepIndex, setCurrentStepIndex] = useState(-1);\n  const [thinkingStartTime, setThinkingStartTime] = useState<number | null>(\n    null,\n  );\n  const [thinkingDuration, setThinkingDuration] = useState<number | null>(null);\n  const [isThinkingComplete, setIsThinkingComplete] = useState(false);\n\n  useEffect(() => {\n    if (!start) {\n      promisesRef.current.forEach((cancel) => cancel());\n      promisesRef.current = [];\n      clearAll();\n    } else {\n      setShowQuestion(true);\n    }\n  }, [start]);\n\n  const clearAll = () => {\n    setShowQuestion(false);\n    setShowLoading(false);\n    setShowChainOfThought(false);\n    setChainOfThoughtOpen(true);\n    setShowAnswer(false);\n    setShowFooter(false);\n    setThinkingStartTime(null);\n    setThinkingDuration(null);\n    setIsThinkingComplete(false);\n  };\n\n  const showResults = async () => {\n    setShowLoading(true);\n    const afterShowLoading = wait(1000);\n    promisesRef.current.push(afterShowLoading.cancel);\n    await afterShowLoading.promise;\n\n    const startTime = Date.now();\n    setThinkingStartTime(startTime);\n    setShowChainOfThought(true);\n    setChainOfThoughtOpen(true);\n    setCurrentStepIndex(-1);\n    setIsThinkingComplete(false);\n\n    const currentSample = samples[currentSampleIndex];\n    for (let i = 0; i < currentSample.output.reasoning.length; i++) {\n      setCurrentStepIndex(i);\n      const stepDelay = wait(800); // Each step takes 800ms\n      promisesRef.current.push(stepDelay.cancel);\n      await stepDelay.promise;\n    }\n\n    const afterAllSteps = wait(500);\n    promisesRef.current.push(afterAllSteps.cancel);\n    await afterAllSteps.promise;\n\n    const endTime = Date.now();\n    const duration = Math.round((endTime - startTime) / 1000);\n    setThinkingDuration(duration);\n    setIsThinkingComplete(true);\n\n    setChainOfThoughtOpen(false);\n    const afterCollapse = wait(300); // Wait for collapse animation\n    promisesRef.current.push(afterCollapse.cancel);\n    await afterCollapse.promise;\n\n    setShowAnswer(true);\n    const afterShowAnswer = wait(1000);\n    promisesRef.current.push(afterShowAnswer.cancel);\n    await afterShowAnswer.promise;\n\n    setShowFooter(true);\n    const afterShowFooter = wait(5000);\n    promisesRef.current.push(afterShowFooter.cancel);\n    await afterShowFooter.promise;\n\n    clearAll();\n    const afterClearAll = wait(1000);\n    promisesRef.current.push(afterClearAll.cancel);\n    await afterClearAll.promise;\n\n    setCurrentSampleIndex((currentSampleIndex + 1) % samples.length);\n    setShowQuestion(true);\n  };\n\n  const currentSample = samples[currentSampleIndex];\n\n  const chainOfThoughtHeaderText = useMemo(() => {\n    if (isThinkingComplete && thinkingDuration !== null) {\n      return `Thought for ${thinkingDuration} second${thinkingDuration !== 1 ? \"s\" : \"\"}`;\n    }\n    return \"Thinking...\";\n  }, [isThinkingComplete, thinkingDuration]);\n\n  const reasoningSteps = useMemo(() => {\n    return currentSample?.output.reasoning.map((step, index) => (\n      <MemoizedChainOfThoughtStep\n        key={index}\n        stepIndex={index}\n        staticIcon={step.icon}\n        label={step.text}\n        currentStepIndex={currentStepIndex}\n      />\n    ));\n  }, [currentSample?.output.reasoning, currentStepIndex]);\n\n  return (\n    <section className={`container shadow-2xl shadow-emerald-900/50`}>\n      <section className=\"window\">\n        <div className=\"input\">\n          <Typewriter\n            start={start && showQuestion}\n            text={currentSample?.input ?? \"\"}\n            onTyped={() => showResults()}\n          />\n        </div>\n        <div className={cn(\"loading\", showLoading && \"active\")} />\n        <div className=\"output\">\n          <AnimatePresence>\n            {start && showChainOfThought && (\n              <motion.div\n                className=\"chainOfThought\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 20 }}\n              >\n                <ChainOfThought open={chainOfThoughtOpen}>\n                  <ChainOfThoughtHeader>\n                    {chainOfThoughtHeaderText}\n                  </ChainOfThoughtHeader>\n                  <ChainOfThoughtContent>\n                    {reasoningSteps}\n                  </ChainOfThoughtContent>\n                </ChainOfThought>\n              </motion.div>\n            )}\n          </AnimatePresence>\n          <AnimatePresence>\n            {start && showAnswer && (\n              <motion.div\n                className=\"outputText\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 20 }}\n              >\n                <Typewriter\n                  start\n                  text={currentSample?.output.text ?? \"\"}\n                  splitType=\"words\"\n                  hideCursor\n                />\n              </motion.div>\n            )}\n          </AnimatePresence>\n          <AnimatePresence>\n            {start && showFooter && (\n              <motion.footer\n                className=\"outputFooter\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n              >\n                <ul className=\"flex gap-2\">\n                  {currentSample?.output.references.map((reference) => (\n                    <Badge key={reference.content}>{reference.content}</Badge>\n                  ))}\n                </ul>\n              </motion.footer>\n            )}\n          </AnimatePresence>\n        </div>\n      </section>\n    </section>\n  );\n};\n\nconst Typewriter = ({\n  start,\n  text,\n  onTyped,\n  onCleared,\n  splitType = \"letters\",\n  hideCursor,\n}: {\n  start: boolean;\n  text: string;\n  onTyped?: () => void;\n  onCleared?: () => void;\n  splitType?: \"letters\" | \"words\";\n  hideCursor?: boolean;\n}) => {\n  const textContainerRef = useRef<HTMLDivElement>(null);\n  const animatingRef = useRef(false);\n  const finishedRef = useRef(false);\n\n  useEffect(() => {\n    let i = 0;\n    const splitBy = splitType === \"letters\" ? \"\" : \" \";\n    const splitText = text.split(splitBy);\n\n    const write = () => {\n      if (!textContainerRef.current || finishedRef.current) return;\n      if (i < splitText.length) {\n        animatingRef.current = true;\n        textContainerRef.current.innerHTML = splitText\n          .slice(0, i + 1)\n          .join(splitBy);\n        i++;\n        setTimeout(write, 25);\n      } else {\n        animatingRef.current = false;\n        finishedRef.current = true;\n        i = 0;\n        onTyped?.();\n      }\n    };\n\n    const clear = () => {\n      if (!textContainerRef.current || !finishedRef.current) return;\n      if (i < splitText.length) {\n        animatingRef.current = true;\n        textContainerRef.current.innerHTML = splitText\n          .slice(0, text.length - i)\n          .join(splitBy);\n        i++;\n        setTimeout(clear, 5);\n      } else {\n        animatingRef.current = false;\n        finishedRef.current = false;\n        i = 0;\n        textContainerRef.current.innerHTML = \"\";\n        onCleared?.();\n      }\n    };\n\n    if (animatingRef.current) return;\n\n    if (start) {\n      write();\n    } else {\n      clear();\n    }\n  }, [textContainerRef, start, text, onTyped, onCleared, splitType]);\n\n  return (\n    <div>\n      <span ref={textContainerRef} />\n      {!hideCursor && <span className=\"cursor\">|</span>}\n    </div>\n  );\n};\n\nconst Spinner = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path d=\"M2,12A10.94,10.94,0,0,1,5,4.65c-.21-.19-.42-.36-.62-.55h0A11,11,0,0,0,12,23c.34,0,.67,0,1-.05C6,23,2,17.74,2,12Z\">\n      <animateTransform\n        attributeName=\"transform\"\n        type=\"rotate\"\n        dur=\"0.6s\"\n        values=\"0 12 12;360 12 12\"\n        repeatCount=\"indefinite\"\n      />\n    </path>\n  </svg>\n);\n",
    "/_components/logo.tsx": "import React from \"react\";\n\nexport const Logo = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    width=\"32\"\n    height=\"32\"\n    viewBox=\"0 0 606.59 688\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path\n      fillRule=\"evenodd\"\n      strokeWidth=\"5\"\n      d=\"M518.854155,773.039047 C494.000914,731.902161 470.162892,638.706311 470.162892,511.967229 C470.162892,492.317684 470.761134,473.527799 471.821153,455.554864 C460.599977,449.907842 449.739952,444.739556 439.333432,440.105112 C437.601425,463.725069 436.719913,487.867158 436.719913,511.967229 C436.719913,613.964251 452.35347,716.703142 482.677044,776.748393 L301.522693,672.215101 C335.315795,672.183415 425.688272,619.850986 424.56071,608.209771 C359.762397,634.44108 309.926341,642.523803 283.450678,637.214995 C279.411854,632.058419 274.132436,627.913044 268.035604,625.280339 L268.035604,398.664452 C274.148977,396.008326 279.444248,391.852619 283.488585,386.674 C323.980208,378.611942 419.003536,401.80758 538.365948,473.081437 C554.307586,482.602436 569.298101,492.218493 583.433985,501.815952 C593.531045,494.765095 603.049161,487.779677 611.995225,480.903783 C593.786056,468.197638 574.846315,455.934409 555.520611,444.392386 C457.484017,385.858426 362.711565,351.793751 301.526828,351.716602 L482.656367,247.194332 C466.743676,278.735137 468.224119,379.776753 478.996614,384.801762 C488.149443,322.820213 503.291587,276.667271 518.833478,250.903678 C525.263892,250.002 531.198069,247.563544 536.250045,243.952012 L732.82912,357.385667 C732.753306,358.376204 732.677492,359.35503 732.677492,360.366232 L732.677492,362.422387 C732.677492,366.785432 733.414956,370.974892 734.724472,374.902596 C714.123713,416.810971 647.035125,485.952902 538.365948,550.851644 C521.445619,560.958147 505.035312,570.065159 489.183272,578.27876 C490.065472,590.791344 491.168223,602.726001 492.470847,614.084107 C513.126744,603.781976 534.25131,592.248907 555.520611,579.540695 C642.134777,527.818569 721.7258,461.756395 756.496904,404.995482 L756.496904,619.02508 C737.743252,588.396974 648.971831,536.869786 639.701834,543.692641 C689.566836,584.535397 721.581064,622.375546 734.683119,649.140008 C733.401172,653.03396 732.677492,657.191734 732.677492,661.521026 L732.677492,663.577182 C732.677492,664.578051 732.753306,665.56721 732.82912,666.557746 L536.250045,779.990712 C531.204961,776.37918 525.284569,773.942791 518.854155,773.039047 Z M813.589783,363.027807 L813.589783,360.972712 C813.589783,339.170804 795.931864,321.499052 774.162014,321.499052 L772.106049,321.499052 C763.559011,321.499052 755.665206,324.250883 749.208513,328.882936 L553.087335,215.508471 C553.162973,214.519822 553.23861,213.529108 553.23861,212.528755 L553.23861,210.47366 C553.23861,188.670375 535.587567,171 513.817717,171 L511.761752,171 C489.991902,171 472.340171,188.670375 472.340171,210.47366 L472.340171,212.528755 C472.340171,213.529108 472.416496,214.519822 472.492134,215.508471 L276.370956,328.882936 C269.90945,324.250883 262.023209,321.499052 253.475483,321.499052 L251.423644,321.499052 C229.648293,321.499052 212,339.170804 212,360.972712 L212,363.027807 C212,379.253075 221.78543,393.171955 235.763242,399.251181 L235.763242,625.750196 C221.78543,631.817718 212,645.746925 212,661.972193 L212,664.027288 C212,685.818869 229.648293,703.500948 251.423644,703.500948 L253.475483,703.500948 C262.023209,703.500948 269.90945,700.749117 276.370956,696.117064 L472.492134,809.491529 C472.416496,810.471228 472.340171,811.459876 472.340171,812.471245 L472.340171,814.525651 C472.340171,836.317921 489.991902,854 511.761752,854 L513.817717,854 C535.587567,854 553.23861,836.317921 553.23861,814.525651 L553.23861,812.471245 C553.23861,811.459876 553.162973,810.471228 553.087335,809.491529 L749.208513,696.117064 C755.665206,700.749117 763.559011,703.500948 772.106049,703.500948 L774.162014,703.500948 C795.931864,703.500948 813.589783,685.818869 813.589783,664.027288 L813.589783,661.972193 C813.589783,645.746925 803.798164,631.817718 789.812102,625.750196 L789.812102,399.251181 C803.798164,393.182282 813.589783,379.253075 813.589783,363.027807 L813.589783,363.027807 Z\"\n      transform=\"translate(-209.5 -168.5)\"\n    />\n  </svg>\n);\n",
    "/_components/workflow-section.tsx": "import React, { useEffect, useRef, useState } from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\nimport {\n  ApertureIcon,\n  AppWindowIcon,\n  BracesIcon,\n  DatabaseIcon,\n  FileSpreadsheetIcon,\n  GithubIcon,\n  GlobeIcon,\n  UploadIcon,\n} from \"lucide-react\";\nimport { motion } from \"motion/react\";\n\nimport { HighlightCard } from \"./highlight-card\";\nimport { Logo } from \"./logo\";\n\nconst hightlightedTransform = {\n  0: 0,\n  1: -100,\n  2: -170,\n};\n\nconst SourceIcon = ({\n  Icon,\n  id,\n  className,\n}: {\n  Icon?: React.JSXElementConstructor<any>;\n  id?: string;\n  className?: string;\n}) => {\n  return (\n    <div\n      className={cn(\n        \"inline-flex justify-center rounded-full border border-dashed border-zinc-700 bg-zinc-900 p-3 text-white\",\n        className,\n      )}\n    >\n      {Icon && <Icon className=\"size-5\" />}\n      {id && (\n        <img\n          alt={id}\n          width={20}\n          height={20}\n          className=\"size-5\"\n          src={`https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/emerald-template/${id}.svg`}\n        />\n      )}\n    </div>\n  );\n};\n\nconst Lines = ({\n  className,\n  width,\n  height,\n  radius,\n  strokeWidth,\n  highlightStrokeWidth,\n  strokeDasharray,\n  invert,\n}: {\n  className?: string;\n  width: number;\n  height: number;\n  radius: number;\n  strokeWidth: number;\n  highlightStrokeWidth: number;\n  strokeDasharray: number;\n  invert?: boolean;\n}) => {\n  const topLinesHeight = Math.round(height / 3);\n  const bottomLineHeight = height - topLinesHeight;\n  const thirdWidth = Math.round(width / 3);\n  const halfWidth = Math.round(width / 2);\n  const sixthWidth = Math.round(width / 6);\n\n  const path = `M1 0v${\n    topLinesHeight - radius\n  }a${radius} ${radius} 0 00${radius} ${radius}h${halfWidth - radius}M${\n    width - 1\n  } 0v${topLinesHeight - radius}a${radius} ${radius} 0 01-${radius} ${radius}H${\n    halfWidth + 1\n  }v${bottomLineHeight}m-${sixthWidth} -${height}v${topLinesHeight}m${thirdWidth} -${topLinesHeight}v${topLinesHeight}`;\n\n  const animate = invert\n    ? {\n        x1: [0, 0],\n        y1: [2.5 * height, -2 * height],\n        x2: [0, 0],\n        y2: [2 * height, -2.5 * height],\n      }\n    : {\n        x1: [0, 0],\n        y1: [-2.5 * height, 2 * height],\n        x2: [0, 0],\n        y2: [-2 * height, 2.5 * height],\n      };\n\n  const animateId = `pulse-${invert ? \"inverted\" : \"normal\"}`;\n\n  return (\n    <svg\n      className={cn(invert && \"rotate-180\", className)}\n      viewBox={`0 0 ${width} ${height}`}\n      fill=\"none\"\n    >\n      <path\n        d={path}\n        stroke=\"#ffffff20\"\n        strokeDasharray={strokeDasharray}\n        strokeWidth={strokeWidth}\n      />\n      <path\n        d={path}\n        stroke={`url(#${animateId})`}\n        strokeLinecap=\"round\"\n        strokeWidth={highlightStrokeWidth}\n        strokeDasharray={strokeDasharray}\n      />\n      <defs>\n        <motion.linearGradient\n          animate={animate}\n          transition={{\n            duration: 2,\n            repeat: Infinity,\n          }}\n          id={animateId}\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stopColor={\"oklch(0.696 0.17 162.48)\"} stopOpacity=\"0\" />\n          <stop stopColor={\"oklch(0.696 0.17 162.48)\"} stopOpacity=\"0.4\" />\n          <stop\n            offset=\"1\"\n            stopColor={\"oklch(0.696 0.17 162.48)\"}\n            stopOpacity=\"0\"\n          />\n        </motion.linearGradient>\n      </defs>\n    </svg>\n  );\n};\n\nconst HomeCard = ({\n  className,\n  title,\n  description,\n  inline,\n  pattern,\n  children,\n}: {\n  className?: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  inline?: boolean;\n  pattern?: React.ReactNode;\n  children?: React.ReactNode;\n}) => {\n  return (\n    <HighlightCard\n      // size=\"lg\"\n      className={cn(\"grow\", className)}\n      pattern={pattern}\n      gridProps={{\n        y: -6,\n        squares: [\n          [-1, 2],\n          [1, 3],\n        ],\n      }}\n    >\n      <div\n        className={cn(\n          \"flex h-full items-center gap-5 text-center lg:gap-8 lg:text-start\",\n          inline ? \"flex-col\" : \"flex-col lg:flex-row\",\n        )}\n      >\n        <div className=\"flex min-w-[300px] shrink-0 flex-col gap-2 lg:gap-5\">\n          <h3 className=\"text-xl font-semibold sm:text-2xl\">{title}</h3>\n          <div className=\"text-start text-sm text-zinc-300 sm:text-base\">\n            {description}\n          </div>\n        </div>\n        {children}\n      </div>\n    </HighlightCard>\n  );\n};\n\nexport const WorkflowSection = () => {\n  const [highlighted, setHighlighted] = useState(0);\n  const sourcesContainerRef = useRef<HTMLDivElement>(null);\n  const [sourcesContainerDimensions, setSourcesContainerDimensions] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  useEffect(() => {\n    const observer = new ResizeObserver(() => {\n      if (!sourcesContainerRef.current) {\n        return;\n      }\n\n      const sourcesContainerRect =\n        sourcesContainerRef.current?.getBoundingClientRect();\n\n      const width = sourcesContainerRect?.width || 0;\n      const height = sourcesContainerRect?.height || 0;\n\n      setSourcesContainerDimensions({\n        width,\n        height,\n      });\n    });\n\n    sourcesContainerRef.current &&\n      observer.observe(sourcesContainerRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n\n  return (\n    <section className=\"px-5 pt-20 sm:pt-24\">\n      <h2 className=\"mx-auto mt-3 max-w-xl text-3xl font-semibold sm:text-4xl\">\n        Simple prompt based workflow\n      </h2>\n      <HomeCard\n        className=\"mt-14 lg:pl-10\"\n        title=\"Plug 'n Play\"\n        description={\n          <ol className=\"ml-5 flex list-decimal flex-col gap-1\">\n            {[\n              \"Connect your data source\",\n              \"Build your app\",\n              \"One click deploy\",\n            ].map((item, index) => {\n              return (\n                <li\n                  className=\"relative leading-9\"\n                  onMouseEnter={() => setHighlighted(index)}\n                  key={item}\n                >\n                  {highlighted === index && (\n                    <motion.div\n                      layoutId=\"about-card-active\"\n                      className=\"pointer-events-none absolute top-0 -left-7 h-full w-full rounded bg-black/50\"\n                    />\n                  )}\n                  <span className=\"relative\">{item}</span>\n                </li>\n              );\n            })}\n          </ol>\n        }\n      >\n        <div className=\"flex grow items-center justify-center overflow-hidden\">\n          <div\n            className=\"max-h-[254px] transition duration-500 ease-in-out\"\n            style={{\n              transform: `translateY(${\n                hightlightedTransform[\n                  highlighted as keyof typeof hightlightedTransform\n                ]\n              }px)`,\n            }}\n          >\n            <div className=\"grid grid-cols-4 items-center justify-center gap-4\">\n              <SourceIcon Icon={DatabaseIcon} />\n              <SourceIcon Icon={FileSpreadsheetIcon} />\n              <SourceIcon id=\"drive\" />\n              <SourceIcon id=\"linear\" />\n              <SourceIcon Icon={GlobeIcon} />\n              <SourceIcon Icon={GithubIcon} />\n              <SourceIcon id=\"markdown\" />\n              <SourceIcon Icon={UploadIcon} />\n            </div>\n            <div className=\"w-full px-5\">\n              <div ref={sourcesContainerRef}>\n                <Lines\n                  width={sourcesContainerDimensions.width}\n                  height={100}\n                  radius={5}\n                  strokeWidth={1}\n                  highlightStrokeWidth={2}\n                  strokeDasharray={2}\n                />\n              </div>\n              <div className=\"flex justify-center\">\n                <div className=\"shadow-highlight rounded-full p-3 text-white\">\n                  <Logo className=\"size-5\" />\n                </div>\n              </div>\n              <Lines\n                width={sourcesContainerDimensions.width}\n                height={100}\n                radius={5}\n                strokeWidth={1}\n                highlightStrokeWidth={2}\n                strokeDasharray={2}\n                invert\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center justify-center gap-4\">\n              <SourceIcon Icon={AppWindowIcon} />\n              <SourceIcon Icon={BracesIcon} />\n              <SourceIcon id=\"slack\" />\n              <SourceIcon Icon={ApertureIcon} />\n            </div>\n          </div>\n        </div>\n      </HomeCard>\n    </section>\n  );\n};\n",
    "/_components/waitlist-form.tsx": "\"use client\";\n\nimport React from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"../ui/form.tsx\";\nimport { toast } from \"../ui/toast.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { useForm } from \"react-hook-form\";\n\nexport const WaitlistForm = () => {\n  const form = useForm({\n    defaultValues: {\n      email: \"\",\n    },\n  });\n\n  const handleJoinWaitlist = form.handleSubmit((values) => {\n    toast.success(\"Waitlist joined!\");\n  });\n\n  return (\n    <Form {...form}>\n      <form\n        className=\"border-border flex max-w-sm items-center gap-2 rounded-full border shadow-lg\"\n        onSubmit={handleJoinWaitlist}\n      >\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field }) => (\n            <FormItem className=\"min-w-0 flex-1 space-y-0\">\n              <FormLabel className=\"sr-only\">Email</FormLabel>\n              <FormControl>\n                <input\n                  className=\"w-full border-none bg-transparent py-2 pl-4 text-sm placeholder-white/50 focus:placeholder-white/75 focus:ring-0 focus:outline-hidden\"\n                  required\n                  type=\"email\"\n                  placeholder=\"name@example.com\"\n                  autoCapitalize=\"none\"\n                  autoComplete=\"email\"\n                  autoCorrect=\"off\"\n                  {...field}\n                  value={field.value ?? \"\"}\n                />\n              </FormControl>\n              <FormMessage className=\"absolute pt-1\" />\n            </FormItem>\n          )}\n        />\n        <Button className={cn(\"text-xs hover:bg-transparent\")} variant=\"ghost\">\n          Join Waitlist\n        </Button>\n      </form>\n    </Form>\n  );\n};\n",
    "/ui/utils.tsx": "import type { CxOptions } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cx } from \"class-variance-authority\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport const cn = (...inputs: CxOptions) => twMerge(cx(inputs));\n\n/**\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/composeRefs.tsx\n */\ntype PossibleRef<T> = React.Ref<T> | undefined;\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef<T>(ref: PossibleRef<T>, value: T) {\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else if (ref !== null && ref !== undefined) {\n    (ref as React.MutableRefObject<T>).current = value;\n  }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nexport function composeRefs<T>(...refs: PossibleRef<T>[]) {\n  return (node: T) => refs.forEach((ref) => setRef(ref, node));\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nexport function useComposedRefs<T>(...refs: PossibleRef<T>[]) {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return React.useCallback(composeRefs(...refs), refs);\n}\n\n/**\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/use-callback-ref/src/useCallbackRef.tsx\n */\n/**\n * A custom hook that converts a callback to a ref to avoid triggering re-renders when passed as a\n * prop or avoid re-executing effects when passed as a dependency\n */\nexport function useCallbackRef<T extends (...args: never[]) => unknown>(\n  callback: T | undefined,\n): T {\n  const callbackRef = React.useRef(callback);\n\n  React.useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  // https://github.com/facebook/react/issues/19240\n  return React.useMemo(\n    () => ((...args) => callbackRef.current?.(...args)) as T,\n    [],\n  );\n}\n\nexport function useDebounce<T>(value: T, delay?: number): T {\n  const [debouncedValue, setDebouncedValue] = React.useState<T>(value);\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay ?? 500);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function useDebouncedCallback<T extends (...args: never[]) => unknown>(\n  callback: T,\n  delay: number,\n) {\n  const handleCallback = useCallbackRef(callback);\n  const debounceTimerRef = React.useRef(0);\n  React.useEffect(\n    () => () => window.clearTimeout(debounceTimerRef.current),\n    [],\n  );\n\n  const setValue = React.useCallback(\n    (...args: Parameters<T>) => {\n      window.clearTimeout(debounceTimerRef.current);\n      debounceTimerRef.current = window.setTimeout(\n        () => handleCallback(...args),\n        delay,\n      );\n    },\n    [handleCallback, delay],\n  );\n\n  return setValue;\n}\n\nexport function useMediaQuery(query = \"(min-width: 640px)\") {\n  const [value, setValue] = React.useState(false);\n\n  React.useEffect(() => {\n    function onChange(event: MediaQueryListEvent) {\n      setValue(event.matches);\n    }\n\n    const result = matchMedia(query);\n    result.addEventListener(\"change\", onChange);\n    setValue(result.matches);\n\n    return () => result.removeEventListener(\"change\", onChange);\n  }, [query]);\n\n  return value;\n}\n\nexport function formatDate(\n  date: Date | string | number,\n  opts: Intl.DateTimeFormatOptions = {},\n) {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: opts.month ?? \"long\",\n    day: opts.day ?? \"numeric\",\n    year: opts.year ?? \"numeric\",\n    ...opts,\n  }).format(new Date(date));\n}\n\nconst MOBILE_BREAKPOINT = 768;\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(\n    undefined,\n  );\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    mql.addEventListener(\"change\", onChange);\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, []);\n\n  return !!isMobile;\n}\n",
    "/ui/badge.tsx": "import type { VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cva } from \"class-variance-authority\";\nimport { Slot } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst badgeVariants = cva(\n  \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex w-fit shrink-0 items-center justify-center gap-1 overflow-hidden rounded-md border px-1 text-[0.625rem] font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] [&>svg]:pointer-events-none [&>svg]:size-3\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground [a&]:hover:bg-primary/90 border-transparent\",\n        secondary:\n          \"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90 border-transparent\",\n        destructive:\n          \"bg-destructive [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 border-transparent text-white\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nconst Badge = ({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) => {\n  const Comp = asChild ? Slot.Root : \"span\";\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  );\n};\n\nexport { Badge, badgeVariants };\n",
    "/ui/collapsible.tsx": "\"use client\";\n\nimport { Collapsible as CollapsiblePrimitive } from \"radix-ui\";\n\nconst Collapsible = ({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) => {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />;\n};\n\nconst CollapsibleTrigger = ({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) => {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  );\n};\n\nconst CollapsibleContent = ({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) => {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  );\n};\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };\n",
    "/ui/spinner.tsx": "export const Spinner = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path d=\"M2,12A10.94,10.94,0,0,1,5,4.65c-.21-.19-.42-.36-.62-.55h0A11,11,0,0,0,12,23c.34,0,.67,0,1-.05C6,23,2,17.74,2,12Z\">\n      <animateTransform\n        attributeName=\"transform\"\n        type=\"rotate\"\n        dur=\"0.6s\"\n        values=\"0 12 12;360 12 12\"\n        repeatCount=\"indefinite\"\n      />\n    </path>\n  </svg>\n);\n",
    "/ui/button.tsx": "import type { VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cva } from \"class-variance-authority\";\nimport { Slot } from \"radix-ui\";\n\nimport { Spinner } from \"./spinner.tsx\";\nimport { cn } from \"./utils.tsx\";\n\nconst buttonVariants = cva(\n  \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive relative inline-flex shrink-0 items-center justify-center gap-2 rounded-full text-sm font-medium whitespace-nowrap transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-xs\",\n        destructive:\n          \"bg-destructive hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-white shadow-xs\",\n        outline:\n          \"bg-background hover:bg-accent hover:text-accent-foreground border shadow-xs\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-xs\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 gap-1.5 rounded-full px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-full px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n      loading: {\n        true: \"disabled:opacity-100\",\n      },\n    },\n    compoundVariants: [\n      {\n        variant: \"default\",\n        loading: true,\n        className: \"[&>:first-child]:bg-primary\",\n      },\n      {\n        variant: \"destructive\",\n        loading: true,\n        className: \"[&>:first-child]:bg-destructive\",\n      },\n      {\n        variant: \"outline\",\n        loading: true,\n        className: \"[&>:first-child]:bg-background\",\n      },\n      {\n        variant: \"secondary\",\n        loading: true,\n        className: \"[&>:first-child]:bg-secondary\",\n      },\n    ],\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Button = ({\n  className,\n  variant,\n  size,\n  asChild = false,\n  children,\n  disabled,\n  loading,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n    loading?: boolean;\n  }) => {\n  const Comp = asChild ? Slot.Root : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, loading, className }))}\n      disabled={loading ?? disabled}\n      {...props}\n    >\n      {loading && (\n        <span className=\"pointer-events-none absolute inset-0 grid place-items-center rounded-full\">\n          <Spinner className=\"size-4\" />\n        </span>\n      )}\n      <Slot.Slottable>{children}</Slot.Slottable>\n    </Comp>\n  );\n};\n\nexport { Button, buttonVariants };\n",
    "/ui/label.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { Label as LabelPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Label = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) => {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport { Label };\n",
    "/ui/form.tsx": "\"use client\";\n\nimport type { Label as LabelPrimitive } from \"radix-ui\";\nimport type { ControllerProps, FieldPath, FieldValues } from \"react-hook-form\";\nimport * as React from \"react\";\nimport { Slot } from \"radix-ui\";\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n} from \"react-hook-form\";\n\nimport { Label } from \"./label.tsx\";\nimport { cn } from \"./utils.tsx\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue,\n);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState } = useFormContext();\n  const formState = useFormState({ name: fieldContext.name });\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n);\n\nconst FormItem = ({ className, ...props }: React.ComponentProps<\"div\">) => {\n  const id = React.useId();\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  );\n};\n\nconst FormLabel = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) => {\n  const { error, formItemId } = useFormField();\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  );\n};\n\nconst FormControl = ({ ...props }: React.ComponentProps<typeof Slot.Root>) => {\n  const { error, formItemId, formDescriptionId, formMessageId } =\n    useFormField();\n\n  return (\n    <Slot.Root\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  );\n};\n\nconst FormDescription = ({\n  className,\n  ...props\n}: React.ComponentProps<\"p\">) => {\n  const { formDescriptionId } = useFormField();\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n};\n\nconst FormMessage = ({ className, ...props }: React.ComponentProps<\"p\">) => {\n  const { error, formMessageId } = useFormField();\n  const body = error ? String(error?.message ?? \"\") : props.children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  );\n};\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n};\n",
    "/ui/toast.tsx": "\"use client\";\n\nimport type { ToasterProps } from \"sonner\";\nimport { useTheme } from \"next-themes\";\nimport { toast, Toaster } from \"sonner\";\n\nconst GlobalToaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Toaster\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      style={\n        {\n          \"--normal-bg\": \"var(--popover)\",\n          \"--normal-text\": \"var(--popover-foreground)\",\n          \"--normal-border\": \"var(--border)\",\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  );\n};\n\nexport { GlobalToaster, toast };\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { FeaturesSection } from \"./_components/features-section\";\nimport { Footer } from \"./_components/footer\";\nimport { Header } from \"./_components/header\";\nimport { HeroSection } from \"./_components/hero-section\";\nimport { IntegrationsSection } from \"./_components/integrations-section\";\nimport { WorkflowSection } from \"./_components/workflow-section\";\n\nimport \"./preview.css\";\n\nconst Preview = () => {\n  return (\n    <div className=\"font-sans antialiased\">\n      <Header />\n      <main className=\"contained-page text-center\">\n        <HeroSection />\n        <WorkflowSection />\n        <FeaturesSection />\n        <IntegrationsSection />\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "carousel-3d",
  "nextSlug": "expanding-header-menu"
},
  "expanding-header-menu": {
  "name": "Expanding Header Menu",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/expanding-header-menu/expanding-header-menu.mp4",
  "coverType": "video",
  "tags": [
    "productivity",
    "minimal",
    "navigation"
  ],
  "slug": "expanding-header-menu",
  "type": "local",
  "dependencies": {
    "class-variance-authority": "^0.7.1",
    "lucide-react": "^0.544.0",
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*",
    "tailwind-merge": "^3.4.0"
  },
  "devDependencies": {},
  "sourceCode": {
    "/expanding-header-menu.tsx": "import React from \"react\";\nimport { cx, CxOptions } from \"class-variance-authority\";\nimport {\n  ChevronDown,\n  ChevronLeft,\n  ChevronRight,\n  Ellipsis,\n  FilePlus2,\n  GalleryVerticalEnd,\n  Headphones,\n  MessagesSquare,\n  Search,\n  Settings,\n  Star,\n  User,\n  UserRoundPlus,\n  X,\n} from \"lucide-react\";\nimport { AnimatePresence, motion, MotionConfig } from \"motion/react\";\nimport { twMerge } from \"tailwind-merge\";\n\ninterface HeaderMenuProps {\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n}\n\nexport const HeaderMenu = ({ isOpen, setIsOpen }: HeaderMenuProps) => {\n  return (\n    <MotionConfig transition={{ duration: 0.5, type: \"spring\", bounce: 0 }}>\n      <AnimatePresence initial={false}>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 z-[60] bg-black/50\"\n            onClick={() => setIsOpen(false)}\n          />\n        )}\n      </AnimatePresence>\n      <AnimatePresence>\n        {isOpen && (\n          <div className=\"absolute top-3 left-0 z-[61] flex w-full justify-center\">\n            <motion.div\n              layoutId=\"wrapper\"\n              className=\"relative h-full w-[97%] overflow-hidden bg-[#1B1D20]\"\n              style={{ borderRadius: 20 }}\n            >\n              <header className=\"flex h-12 items-center gap-1 px-2\">\n                <div className=\"relative isolate h-8 w-8\">\n                  <motion.div\n                    layoutId=\"wrapper-avatar\"\n                    animate={{ scale: 0, opacity: 0 }}\n                    className=\"relative isolate h-8 w-8\"\n                  >\n                    <img\n                      src=\"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\"\n                      alt=\"logo\"\n                      className=\"rounded-lg\"\n                    />\n                  </motion.div>\n                  <motion.button\n                    layoutId=\"wrapper-close-button\"\n                    className=\"absolute top-0 left-0 -z-10 flex h-8 w-8 items-center justify-center text-[#C7C9CD]\"\n                    onClick={() => setIsOpen(false)}\n                  >\n                    <X strokeWidth={1.5} size={20} />\n                  </motion.button>\n                </div>\n                <motion.div\n                  layoutId=\"wrapper-user-info\"\n                  className=\"-space-y-px\"\n                >\n                  <h2 className=\"text-left text-sm font-bold\">Kai</h2>\n                  <p className=\"flex items-center text-xs text-[#ABABB0]\">\n                    3 tabs\n                  </p>\n                </motion.div>\n                <button className=\"ml-auto flex h-8 w-8 items-center justify-center\">\n                  <Ellipsis strokeWidth={1.5} size={20} />\n                </button>\n              </header>\n              <WrapperMenu />\n            </motion.div>\n          </div>\n        )}\n      </AnimatePresence>\n      <header className=\"sticky top-0 z-50 flex h-12 items-center gap-1 border-b border-b-[#27292E] bg-[#1C1D22] px-2\">\n        <motion.button\n          layoutId=\"wrapper\"\n          className=\"relative grow overflow-hidden bg-[#232429] p-0.5\"\n          style={{ borderRadius: 8 }}\n          onClick={() => setIsOpen(true)}\n        >\n          <div className=\"flex items-center gap-2\">\n            <div className=\"relative isolate h-8 w-8\">\n              <motion.div\n                layoutId=\"wrapper-avatar\"\n                className=\"relative isolate h-8 w-8\"\n              >\n                <img\n                  src=\"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\"\n                  alt=\"logo\"\n                  className=\"rounded-lg\"\n                />\n              </motion.div>\n              <motion.button\n                layoutId=\"wrapper-close-button\"\n                className=\"absolute top-0 left-0 -z-10 flex h-8 w-8 items-center justify-center\"\n                onClick={() => setIsOpen(false)}\n              >\n                <X strokeWidth={1.5} />\n              </motion.button>\n            </div>\n            <motion.div layoutId=\"wrapper-user-info\" className=\"-space-y-0.5\">\n              <h2 className=\"text-left text-sm font-bold\">Kai</h2>\n              <p className=\"flex items-center text-xs text-[#ABABB0]\">\n                3 tabs\n                <ChevronDown strokeWidth={1.5} size={16} />\n              </p>\n            </motion.div>\n          </div>\n          <WrapperMenu className=\"pointer-events-none absolute top-0 right-0 left-0 opacity-0\" />\n        </motion.button>\n        <button className=\"flex h-8 w-8 items-center justify-center\">\n          <Headphones strokeWidth={1.7} size={20} />\n        </button>\n      </header>\n    </MotionConfig>\n  );\n};\n\nconst WrapperMenu = ({ className }: { className?: string }) => {\n  return (\n    <AnimatePresence>\n      <motion.div\n        layoutId=\"wrapper-menu\"\n        className={cn(\"mt-1 text-[#C7C9CD]\", className)}\n      >\n        <motion.div\n          layout\n          className=\"mb-2 grid grid-cols-3 gap-2 px-3 text-white\"\n        >\n          <button className=\"flex h-9 items-center justify-center gap-1 rounded-lg border border-[#313538] px-1 text-sm\">\n            <UserRoundPlus strokeWidth={1.5} size={16} />\n            Add\n          </button>\n          <button className=\"flex h-9 items-center justify-center gap-1 rounded-lg border border-[#313538] px-1 text-sm\">\n            <Star strokeWidth={1.5} size={16} />\n            Move\n          </button>\n          <button className=\"flex h-9 items-center justify-center gap-1 rounded-lg border border-[#313538] px-1 text-sm\">\n            <Search strokeWidth={1.5} size={16} />\n            Search\n          </button>\n        </motion.div>\n        <motion.div layout className=\"flex flex-col px-1\">\n          <button className=\"flex h-8 items-center gap-1 rounded-lg px-1 text-start text-sm hover:bg-[#313538]\">\n            <div className=\"flex h-8 w-8 items-center justify-center\">\n              <MessagesSquare strokeWidth={1.5} size={16} />\n            </div>\n            Messages\n          </button>\n          <button className=\"flex h-8 items-center gap-1 rounded-lg px-1 text-start text-sm hover:bg-[#313538]\">\n            <div className=\"flex h-8 w-8 items-center justify-center\">\n              <FilePlus2 strokeWidth={1.5} size={16} />\n            </div>\n            Add canvas\n          </button>\n          <button className=\"flex h-8 items-center gap-1 rounded-lg px-1 text-start text-sm hover:bg-[#313538]\">\n            <div className=\"flex h-8 w-8 items-center justify-center\">\n              <GalleryVerticalEnd strokeWidth={1.5} size={16} />\n            </div>\n            Files\n          </button>\n        </motion.div>\n        <div className=\"flex h-4 items-center justify-center\">\n          <div className=\"h-px w-full bg-[#23272A]\" />\n        </div>\n        <motion.div layout className=\"flex flex-col px-1\">\n          <button className=\"flex h-8 items-center gap-1 rounded-lg px-1 text-start text-sm hover:bg-[#313538]\">\n            <div className=\"flex h-8 w-8 items-center justify-center\">\n              <User strokeWidth={1.5} size={16} />\n            </div>\n            <span className=\"inline-block grow\">View Profile</span>\n            <ChevronRight strokeWidth={1.5} size={16} />\n          </button>\n          <button className=\"flex h-8 items-center gap-1 rounded-lg px-1 text-start text-sm hover:bg-[#313538]\">\n            <div className=\"flex h-8 w-8 items-center justify-center\">\n              <Settings strokeWidth={1.5} size={16} />\n            </div>\n            <span className=\"inline-block grow\">View Profile</span>\n            <ChevronRight strokeWidth={1.5} size={16} />\n          </button>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\nexport const cn = (...inputs: CxOptions) => twMerge(cx(inputs));\n"
  },
  "previewCode": "import React, { useState } from \"react\";\n\nimport { HeaderMenu } from \"./expanding-header-menu\";\n\nconst Preview = () => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <main className=\"bg-black text-white\">\n      <HeaderMenu isOpen={isOpen} setIsOpen={setIsOpen} />\n      <div className=\"no-scrollbar mt-2 flex h-[600px] flex-col gap-4 overflow-auto p-2\">\n        {messages.map((message) => (\n          <div key={message.date} className=\"flex items-start gap-2\">\n            <div className=\"relative h-8 w-8 shrink-0 rounded-lg bg-white\">\n              <img src={message.avatar_url} alt=\"logo\" className=\"rounded-lg\" />\n            </div>\n            <div className=\"-mt-1\">\n              <div className=\"flex items-center gap-2\">\n                <p className=\"text-sm font-bold\">{message.name}</p>\n                <p className=\"text-xs text-[#ABABB0]\">{message.date}</p>\n              </div>\n              <p className=\"text-sm text-[#D2D3D6]\">{message.message}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </main>\n  );\n};\n\nexport default Preview;\n\ninterface Message {\n  date: string;\n  name: string;\n  message: string;\n  avatar_url: string;\n  image_url?: string;\n}\n\nconst messages: Message[] = [\n  {\n    date: \"1:19 PM\",\n    name: \"Kai\",\n    message:\n      \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora aperiam dignissimos iure nisi fugit eius aliquam, commodi iste placeat ducimus voluptatum, ut similique sunt corrupti fugiat itaque iusto, suscipit quae?\",\n    avatar_url:\n      \"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\",\n  },\n  {\n    date: \"2:45 PM\",\n    name: \"Kai\",\n    message:\n      \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora aperiam dignissimos iure nisi fugit eius aliquam, commodi iste placeat ducimus voluptatum, ut similique sunt corrupti fugiat itaque iusto, suscipit quae?\",\n    avatar_url:\n      \"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\",\n  },\n  {\n    date: \"4:30 PM\",\n    name: \"Kai\",\n    message:\n      \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora aperiam dignissimos iure nisi fugit eius aliquam, commodi iste placeat ducimus voluptatum, ut similique sunt corrupti fugiat itaque iusto, suscipit quae?\",\n    avatar_url:\n      \"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\",\n  },\n  {\n    date: \"4:32 PM\",\n    name: \"Kai\",\n    message:\n      \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora aperiam dignissimos iure nisi fugit eius aliquam, commodi iste placeat ducimus voluptatum, ut similique sunt corrupti fugiat itaque iusto, suscipit quae?\",\n    avatar_url:\n      \"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\",\n  },\n  {\n    date: \"4:40 PM\",\n    name: \"Kai\",\n    message:\n      \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora aperiam dignissimos iure nisi fugit eius aliquam, commodi iste placeat ducimus voluptatum, ut similique sunt corrupti fugiat itaque iusto, suscipit quae?\",\n    avatar_url:\n      \"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\",\n  },\n  {\n    date: \"4:44 PM\",\n    name: \"Kai\",\n    message:\n      \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora aperiam dignissimos iure nisi fugit eius aliquam, commodi iste placeat ducimus voluptatum, ut similique sunt corrupti fugiat itaque iusto, suscipit quae?\",\n    avatar_url:\n      \"https://pbs.twimg.com/profile_images/1760212439944278016/6cTEMery_400x400.jpg\",\n  },\n];\n",
  "previousSlug": "emerald-template",
  "nextSlug": "filter-bar"
},
  "filter-bar": {
  "name": "Filter Bar",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/filter-bar/filter-bar.mp4",
  "coverType": "video",
  "tags": [
    "productivity",
    "minimal",
    "toolbars"
  ],
  "slug": "filter-bar",
  "type": "local",
  "dependencies": {
    "@ai-sdk/react": "^2.0.119",
    "@loremllm/transport": "^0.5.1",
    "react": "*",
    "react-dom": "*",
    "zod": "*",
    "@headless-tree/core": "^1.6.1",
    "@headless-tree/react": "^1.6.1",
    "@hookform/resolvers": "^5.2.2",
    "@tanstack/react-table": "^8.21.3",
    "class-variance-authority": "^0.7.1",
    "cmdk": "^1.1.1",
    "date-fns": "^4.1.0",
    "lucide-react": "^0.544.0",
    "motion": "^12.23.26",
    "next-themes": "^0.4.6",
    "radix-ui": "^1.4.3",
    "react-day-picker": "^9.13.0",
    "react-hook-form": "^7.69.0",
    "shiki": "^3.20.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.4.0",
    "tw-animate-css": "^1.4.0",
    "vaul": "^1.1.2"
  },
  "devDependencies": {},
  "sourceCode": {
    "/filters.tsx": "import React from \"react\";\nimport { cn } from \"./ui/utils.tsx\";\nimport {\n  BuildingIcon,\n  CalendarArrowUpIcon,\n  DollarSignIcon,\n  TargetIcon,\n  UserCheckIcon,\n  UserIcon,\n} from \"lucide-react\";\n\nimport type { Person, PersonDepartment, PersonSkill } from \"./types\";\nimport { createColumnConfigHelper } from \"./filter-package\";\n\nexport const PERSON_DEPARTMENTS: PersonDepartment[] = [\n  { id: \"engineering\", name: \"Engineering\", color: \"blue\" },\n  { id: \"design\", name: \"Design\", color: \"purple\" },\n  { id: \"product\", name: \"Product\", color: \"green\" },\n  { id: \"marketing\", name: \"Marketing\", color: \"orange\" },\n  { id: \"sales\", name: \"Sales\", color: \"red\" },\n  { id: \"hr\", name: \"Human Resources\", color: \"pink\" },\n  { id: \"finance\", name: \"Finance\", color: \"teal\" },\n  { id: \"operations\", name: \"Operations\", color: \"indigo\" },\n  { id: \"customer-success\", name: \"Customer Success\", color: \"emerald\" },\n  { id: \"data\", name: \"Data & Analytics\", color: \"cyan\" },\n  { id: \"security\", name: \"Security\", color: \"rose\" },\n  { id: \"legal\", name: \"Legal\", color: \"violet\" },\n] as const;\n\nexport const PERSON_SKILLS: PersonSkill[] = [\n  { id: \"javascript\", name: \"JavaScript\", level: \"expert\", color: \"yellow\" },\n  { id: \"typescript\", name: \"TypeScript\", level: \"advanced\", color: \"blue\" },\n  { id: \"react\", name: \"React\", level: \"expert\", color: \"cyan\" },\n  { id: \"nodejs\", name: \"Node.js\", level: \"advanced\", color: \"green\" },\n  { id: \"python\", name: \"Python\", level: \"intermediate\", color: \"yellow\" },\n  { id: \"java\", name: \"Java\", level: \"advanced\", color: \"red\" },\n  { id: \"go\", name: \"Go\", level: \"beginner\", color: \"blue\" },\n  { id: \"rust\", name: \"Rust\", level: \"intermediate\", color: \"orange\" },\n  { id: \"sql\", name: \"SQL\", level: \"advanced\", color: \"indigo\" },\n  { id: \"aws\", name: \"AWS\", level: \"intermediate\", color: \"orange\" },\n  { id: \"docker\", name: \"Docker\", level: \"advanced\", color: \"blue\" },\n  {\n    id: \"kubernetes\",\n    name: \"Kubernetes\",\n    level: \"intermediate\",\n    color: \"blue\",\n  },\n  { id: \"figma\", name: \"Figma\", level: \"expert\", color: \"purple\" },\n  { id: \"sketch\", name: \"Sketch\", level: \"advanced\", color: \"yellow\" },\n  { id: \"photoshop\", name: \"Photoshop\", level: \"intermediate\", color: \"blue\" },\n  {\n    id: \"illustrator\",\n    name: \"Illustrator\",\n    level: \"beginner\",\n    color: \"orange\",\n  },\n  { id: \"leadership\", name: \"Leadership\", level: \"expert\", color: \"green\" },\n  {\n    id: \"communication\",\n    name: \"Communication\",\n    level: \"advanced\",\n    color: \"pink\",\n  },\n  {\n    id: \"project-management\",\n    name: \"Project Management\",\n    level: \"intermediate\",\n    color: \"teal\",\n  },\n  {\n    id: \"data-analysis\",\n    name: \"Data Analysis\",\n    level: \"advanced\",\n    color: \"cyan\",\n  },\n  {\n    id: \"machine-learning\",\n    name: \"Machine Learning\",\n    level: \"beginner\",\n    color: \"purple\",\n  },\n  { id: \"ui-design\", name: \"UI Design\", level: \"expert\", color: \"rose\" },\n  {\n    id: \"ux-research\",\n    name: \"UX Research\",\n    level: \"advanced\",\n    color: \"indigo\",\n  },\n  {\n    id: \"content-strategy\",\n    name: \"Content Strategy\",\n    level: \"intermediate\",\n    color: \"emerald\",\n  },\n  { id: \"seo\", name: \"SEO\", level: \"beginner\", color: \"lime\" },\n  {\n    id: \"social-media\",\n    name: \"Social Media\",\n    level: \"advanced\",\n    color: \"pink\",\n  },\n  {\n    id: \"email-marketing\",\n    name: \"Email Marketing\",\n    level: \"intermediate\",\n    color: \"blue\",\n  },\n  { id: \"salesforce\", name: \"Salesforce\", level: \"expert\", color: \"blue\" },\n  { id: \"hubspot\", name: \"HubSpot\", level: \"advanced\", color: \"orange\" },\n  {\n    id: \"recruiting\",\n    name: \"Recruiting\",\n    level: \"intermediate\",\n    color: \"green\",\n  },\n  {\n    id: \"training\",\n    name: \"Training & Development\",\n    level: \"beginner\",\n    color: \"purple\",\n  },\n  { id: \"accounting\", name: \"Accounting\", level: \"advanced\", color: \"teal\" },\n  {\n    id: \"budgeting\",\n    name: \"Budgeting\",\n    level: \"intermediate\",\n    color: \"indigo\",\n  },\n  { id: \"compliance\", name: \"Compliance\", level: \"expert\", color: \"red\" },\n  {\n    id: \"risk-management\",\n    name: \"Risk Management\",\n    level: \"advanced\",\n    color: \"orange\",\n  },\n  {\n    id: \"customer-support\",\n    name: \"Customer Support\",\n    level: \"intermediate\",\n    color: \"green\",\n  },\n  {\n    id: \"technical-writing\",\n    name: \"Technical Writing\",\n    level: \"beginner\",\n    color: \"blue\",\n  },\n  {\n    id: \"public-speaking\",\n    name: \"Public Speaking\",\n    level: \"advanced\",\n    color: \"purple\",\n  },\n  {\n    id: \"negotiation\",\n    name: \"Negotiation\",\n    level: \"intermediate\",\n    color: \"pink\",\n  },\n  {\n    id: \"strategic-planning\",\n    name: \"Strategic Planning\",\n    level: \"expert\",\n    color: \"emerald\",\n  },\n  {\n    id: \"change-management\",\n    name: \"Change Management\",\n    level: \"advanced\",\n    color: \"cyan\",\n  },\n  {\n    id: \"team-building\",\n    name: \"Team Building\",\n    level: \"intermediate\",\n    color: \"lime\",\n  },\n  { id: \"mentoring\", name: \"Mentoring\", level: \"beginner\", color: \"rose\" },\n  {\n    id: \"conflict-resolution\",\n    name: \"Conflict Resolution\",\n    level: \"advanced\",\n    color: \"violet\",\n  },\n  {\n    id: \"time-management\",\n    name: \"Time Management\",\n    level: \"expert\",\n    color: \"amber\",\n  },\n  {\n    id: \"problem-solving\",\n    name: \"Problem Solving\",\n    level: \"expert\",\n    color: \"sky\",\n  },\n  {\n    id: \"critical-thinking\",\n    name: \"Critical Thinking\",\n    level: \"advanced\",\n    color: \"indigo\",\n  },\n  {\n    id: \"creativity\",\n    name: \"Creativity\",\n    level: \"intermediate\",\n    color: \"fuchsia\",\n  },\n  { id: \"adaptability\", name: \"Adaptability\", level: \"expert\", color: \"teal\" },\n  {\n    id: \"emotional-intelligence\",\n    name: \"Emotional Intelligence\",\n    level: \"advanced\",\n    color: \"pink\",\n  },\n  {\n    id: \"cross-cultural\",\n    name: \"Cross-cultural Communication\",\n    level: \"intermediate\",\n    color: \"green\",\n  },\n  {\n    id: \"multilingual\",\n    name: \"Multilingual\",\n    level: \"beginner\",\n    color: \"blue\",\n  },\n] as const;\n\nexport const LABEL_STYLES_BG = {\n  red: \"bg-red-500\",\n  orange: \"bg-orange-500\",\n  amber: \"bg-amber-500\",\n  yellow: \"bg-yellow-500\",\n  lime: \"bg-lime-500\",\n  green: \"bg-green-500\",\n  emerald: \"bg-emerald-500\",\n  teal: \"bg-teal-500\",\n  cyan: \"bg-cyan-500\",\n  sky: \"bg-sky-500\",\n  blue: \"bg-blue-500\",\n  indigo: \"bg-indigo-500\",\n  violet: \"bg-violet-500\",\n  purple: \"bg-purple-500\",\n  fuchsia: \"bg-fuchsia-500\",\n  pink: \"bg-pink-500\",\n  rose: \"bg-rose-500\",\n  neutral: \"bg-neutral-500\",\n} as const;\n\nexport type TW_COLOR = keyof typeof LABEL_STYLES_BG;\n\nconst dtf = createColumnConfigHelper<Person>();\n\nexport const columnsConfig = [\n  // Text column - Name (most important identifier)\n  dtf\n    .text()\n    .id(\"name\")\n    .accessor((row) => `${row.firstName} ${row.lastName}`)\n    .displayName(\"Name\")\n    .icon(UserIcon)\n    .build(),\n\n  // Option column - Department (categorical data)\n  dtf\n    .option()\n    .accessor((row) => row.department.id)\n    .id(\"department\")\n    .displayName(\"Department\")\n    .icon(BuildingIcon)\n    .options(\n      PERSON_DEPARTMENTS.map((d) => ({\n        value: d.id,\n        label: d.name,\n        icon: BuildingIcon,\n      })),\n    )\n    .build(),\n\n  // Number column - Salary (quantitative data)\n  dtf\n    .number()\n    .accessor((row) => row.salary)\n    .id(\"salary\")\n    .displayName(\"Salary\")\n    .icon(DollarSignIcon)\n    .min(20000)\n    .max(300000)\n    .build(),\n\n  // Multi-option column - Skills (tags/categories)\n  dtf\n    .multiOption()\n    .accessor((row) => row.skills)\n    .id(\"skills\")\n    .displayName(\"Skills\")\n    .icon(TargetIcon)\n    .options(\n      PERSON_SKILLS.map((s) => ({\n        value: s.id,\n        label: s.name,\n        icon: (\n          <div\n            className={cn(\n              \"size-2.5 rounded-full\",\n              LABEL_STYLES_BG[s.color as TW_COLOR],\n            )}\n          />\n        ),\n      })),\n    )\n    .build(),\n\n  // Date column - Start Date (temporal data)\n  dtf\n    .date()\n    .accessor((row) => row.startDate)\n    .id(\"startDate\")\n    .displayName(\"Start Date\")\n    .icon(CalendarArrowUpIcon)\n    .build(),\n\n  // Boolean column - Active Status (yes/no data)\n  dtf\n    .boolean()\n    .id(\"isActive\")\n    .accessor((row) => row.isActive)\n    .displayName(\"Active employees\")\n    .toggledStateName(\"active\")\n    .icon(UserCheckIcon)\n    .build(),\n] as const;\n",
    "/types.ts": "import type { LucideIcon } from \"lucide-react\";\n\nexport type Person = {\n  id: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone?: string;\n  age: number;\n  gender: PersonGender;\n  department: PersonDepartment;\n  position: string;\n  salary: number;\n  startDate: Date;\n  endDate?: Date;\n  isActive: boolean;\n  skills?: PersonSkill[];\n  location: PersonLocation;\n  manager?: Person;\n  isRemote: boolean;\n  experience: number;\n  education: PersonEducation;\n  performance: PersonPerformance;\n};\n\nexport type PersonGender = {\n  id: \"male\" | \"female\" | \"non-binary\" | \"other\";\n  name: string;\n  order: number;\n  icon: LucideIcon;\n};\n\nexport type PersonDepartment = {\n  id: string;\n  name: string;\n  color: string;\n};\n\nexport type PersonSkill = {\n  id: string;\n  name: string;\n  level: \"beginner\" | \"intermediate\" | \"advanced\" | \"expert\";\n  color: string;\n};\n\nexport type PersonLocation = {\n  city: string;\n  state: string;\n  country: string;\n  timezone: string;\n};\n\nexport type PersonEducation = {\n  degree: string;\n  field: string;\n  institution: string;\n  graduationYear: number;\n};\n\nexport type PersonPerformance = {\n  rating: number; // 1-5\n  lastReview: Date;\n  goals: string[];\n};\n",
    "/_components/data-table-filter.tsx": "\"use client\";\n\nimport React, { useMemo } from \"react\";\nimport { useIsMobile } from \"../ui/utils.tsx\";\n\nimport type {\n  Column,\n  DataTableFilterActions,\n  FiltersState,\n  FilterStrategy,\n} from \"../filter-package\";\nimport { ActiveFilters, ActiveFiltersMobileContainer } from \"./active-filters\";\nimport { FilterActions } from \"./filter-actions\";\nimport { FilterSelector } from \"./filter-selector\";\nimport { useAiFilterSimulation } from \"./use-ai-filter-simulation\";\n\ninterface DataTableFilterProps<TData> {\n  columns: Column<TData>[];\n  filters: FiltersState;\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n  entityName?: string;\n}\n\nexport function DataTableFilter<TData>({\n  columns,\n  filters,\n  actions,\n  strategy,\n  entityName,\n}: DataTableFilterProps<TData>) {\n  const isMobile = useIsMobile();\n\n  const { aiGenerating, handleAiFilterSubmit } = useAiFilterSimulation({\n    columns,\n    actions,\n  });\n\n  const selectorProps = {\n    columns,\n    filters,\n    actions,\n    strategy,\n    onAIFilterSubmit: handleAiFilterSubmit,\n    aiGenerating,\n  } as const;\n\n  if (isMobile) {\n    return (\n      <div className=\"flex w-full items-start justify-between gap-2\">\n        <FilterSelector {...selectorProps} />\n        <ActiveFiltersMobileContainer>\n          <ActiveFilters\n            columns={columns}\n            filters={filters}\n            actions={actions}\n            strategy={strategy}\n            entityName={entityName}\n            aiGenerating={aiGenerating}\n          />\n          <FilterActions hasFilters={filters.length > 0} actions={actions} />\n        </ActiveFiltersMobileContainer>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex w-full items-start justify-between gap-2\">\n      <div className=\"flex w-full flex-1 gap-2 md:flex-wrap\">\n        <FilterSelector {...selectorProps} />\n        <ActiveFilters\n          columns={columns}\n          filters={filters}\n          actions={actions}\n          strategy={strategy}\n          entityName={entityName}\n          aiGenerating={aiGenerating}\n        />\n        <FilterActions hasFilters={filters.length > 0} actions={actions} />\n      </div>\n    </div>\n  );\n}\n",
    "/_components/filter-operator.tsx": "import React, { useState } from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"../ui/command.tsx\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"../ui/popover.tsx\";\n\nimport type {\n  Column,\n  ColumnDataType,\n  DataTableFilterActions,\n  FilterModel,\n  FilterOperators,\n} from \"../filter-package\";\nimport {\n  booleanFilterOperators,\n  dateFilterOperators,\n  filterTypeOperatorDetails,\n  multiOptionFilterOperators,\n  numberFilterOperators,\n  optionFilterOperators,\n  textFilterOperators,\n} from \"../filter-package\";\n\ninterface FilterOperatorProps<TData, TType extends ColumnDataType> {\n  column: Column<TData, TType>;\n  filter: FilterModel<TType>;\n  actions: DataTableFilterActions;\n}\n\n// Renders the filter operator display and menu for a given column filter\n// The filter operator display is the label and icon for the filter operator\n// The filter operator menu is the dropdown menu for the filter operator\nexport function FilterOperator<TData, TType extends ColumnDataType>({\n  column,\n  filter,\n  actions,\n}: FilterOperatorProps<TData, TType>) {\n  const [open, setOpen] = useState<boolean>(false);\n\n  const close = () => setOpen(false);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          className=\"m-0 h-full w-fit rounded-none p-0 px-2 text-xs whitespace-nowrap\"\n          onClick={(e) => {\n            if (column.type !== \"boolean\") return;\n            e.preventDefault();\n            const opDetails =\n              filterTypeOperatorDetails.boolean[\n                filter.operator as FilterOperators[\"boolean\"]\n              ];\n\n            actions.setFilterOperator(\n              column.id,\n              opDetails.isNegated ? opDetails.negationOf : opDetails.negation,\n            );\n          }}\n        >\n          <FilterOperatorDisplay filter={filter} columnType={column.type} />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent\n        align=\"start\"\n        className=\"w-fit origin-(--radix-popover-content-transform-origin) p-0\"\n      >\n        <Command loop>\n          <CommandInput placeholder=\"search\" />\n          <CommandEmpty>No results</CommandEmpty>\n          <CommandList className=\"max-h-fit\">\n            <FilterOperatorController\n              filter={filter}\n              column={column}\n              actions={actions}\n              closeController={close}\n            />\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\ninterface FilterOperatorDisplayProps<TType extends ColumnDataType> {\n  filter: FilterModel<TType>;\n  columnType: TType;\n}\n\nexport function FilterOperatorDisplay<TType extends ColumnDataType>({\n  filter,\n  columnType,\n}: FilterOperatorDisplayProps<TType>) {\n  const operator = filterTypeOperatorDetails[columnType][filter.operator];\n  const label = operator.key;\n\n  return <span className=\"text-muted-foreground\">{label}</span>;\n}\n\ninterface FilterOperatorControllerProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>;\n  column: Column<TData, TType>;\n  actions: DataTableFilterActions;\n  closeController: () => void;\n}\n\n/*\n *\n * TODO: Reduce into a single component. Each data type does not need it's own controller.\n *\n */\nexport function FilterOperatorController<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, TType>) {\n  switch (column.type) {\n    case \"option\":\n      return (\n        <FilterOperatorOptionController\n          filter={filter as FilterModel<\"option\">}\n          column={column as Column<TData, \"option\">}\n          actions={actions}\n          closeController={closeController}\n        />\n      );\n    case \"multiOption\":\n      return (\n        <FilterOperatorMultiOptionController\n          filter={filter as FilterModel<\"multiOption\">}\n          column={column as Column<TData, \"multiOption\">}\n          actions={actions}\n          closeController={closeController}\n        />\n      );\n    case \"date\":\n      return (\n        <FilterOperatorDateController\n          filter={filter as FilterModel<\"date\">}\n          column={column as Column<TData, \"date\">}\n          actions={actions}\n          closeController={closeController}\n        />\n      );\n    case \"text\":\n      return (\n        <FilterOperatorTextController\n          filter={filter as FilterModel<\"text\">}\n          column={column as Column<TData, \"text\">}\n          actions={actions}\n          closeController={closeController}\n        />\n      );\n    case \"number\":\n      return (\n        <FilterOperatorNumberController\n          filter={filter as FilterModel<\"number\">}\n          column={column as Column<TData, \"number\">}\n          actions={actions}\n          closeController={closeController}\n        />\n      );\n    case \"boolean\":\n      return (\n        <FilterOperatorBooleanController\n          filter={filter as FilterModel<\"boolean\">}\n          column={column as Column<TData, \"boolean\">}\n          actions={actions}\n          closeController={closeController}\n        />\n      );\n    default:\n      return null;\n  }\n}\n\nfunction FilterOperatorOptionController<TData>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, \"option\">) {\n  const filterDetails = optionFilterOperators[filter.operator];\n\n  const relatedFilters = Object.values(optionFilterOperators).filter(\n    (o) => o.target === filterDetails.target,\n  );\n\n  const changeOperator = (value: string) => {\n    actions?.setFilterOperator(column.id, value as FilterOperators[\"option\"]);\n    closeController();\n  };\n\n  return (\n    <CommandGroup heading=\"operators\">\n      {relatedFilters.map((r) => {\n        return (\n          <CommandItem onSelect={changeOperator} value={r.value} key={r.value}>\n            {r.key}\n          </CommandItem>\n        );\n      })}\n    </CommandGroup>\n  );\n}\n\nfunction FilterOperatorMultiOptionController<TData>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, \"multiOption\">) {\n  const filterDetails = multiOptionFilterOperators[filter.operator];\n\n  const relatedFilters = Object.values(multiOptionFilterOperators).filter(\n    (o) => o.target === filterDetails.target,\n  );\n\n  const changeOperator = (value: string) => {\n    actions?.setFilterOperator(\n      column.id,\n      value as FilterOperators[\"multiOption\"],\n    );\n    closeController();\n  };\n\n  return (\n    <CommandGroup heading=\"operators\">\n      {relatedFilters.map((r) => {\n        return (\n          <CommandItem onSelect={changeOperator} value={r.value} key={r.value}>\n            {r.key}\n          </CommandItem>\n        );\n      })}\n    </CommandGroup>\n  );\n}\n\nfunction FilterOperatorDateController<TData>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, \"date\">) {\n  const filterDetails = dateFilterOperators[filter.operator];\n\n  const relatedFilters = Object.values(dateFilterOperators).filter(\n    (o) => o.target === filterDetails.target,\n  );\n\n  const changeOperator = (value: string) => {\n    actions?.setFilterOperator(column.id, value as FilterOperators[\"date\"]);\n    closeController();\n  };\n\n  return (\n    <CommandGroup>\n      {relatedFilters.map((r) => {\n        return (\n          <CommandItem onSelect={changeOperator} value={r.value} key={r.value}>\n            {r.key}\n          </CommandItem>\n        );\n      })}\n    </CommandGroup>\n  );\n}\n\nexport function FilterOperatorTextController<TData>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, \"text\">) {\n  const filterDetails = textFilterOperators[filter.operator];\n\n  const relatedFilters = Object.values(textFilterOperators).filter(\n    (o) => o.target === filterDetails.target,\n  );\n\n  const changeOperator = (value: string) => {\n    actions?.setFilterOperator(column.id, value as FilterOperators[\"text\"]);\n    closeController();\n  };\n\n  return (\n    <CommandGroup heading=\"operators\">\n      {relatedFilters.map((r) => {\n        return (\n          <CommandItem onSelect={changeOperator} value={r.value} key={r.value}>\n            {r.key}\n          </CommandItem>\n        );\n      })}\n    </CommandGroup>\n  );\n}\n\nfunction FilterOperatorNumberController<TData>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, \"number\">) {\n  const filterDetails = numberFilterOperators[filter.operator];\n\n  const relatedFilters = Object.values(numberFilterOperators).filter(\n    (o) => o.target === filterDetails.target,\n  );\n\n  const changeOperator = (value: string) => {\n    actions?.setFilterOperator(column.id, value as FilterOperators[\"number\"]);\n    closeController();\n  };\n\n  return (\n    <div>\n      <CommandGroup heading=\"operators\">\n        {relatedFilters.map((r) => (\n          <CommandItem\n            onSelect={() => changeOperator(r.value)}\n            value={r.value}\n            key={r.value}\n          >\n            {r.key}\n          </CommandItem>\n        ))}\n      </CommandGroup>\n    </div>\n  );\n}\n\nfunction FilterOperatorBooleanController<TData>({\n  filter,\n  column,\n  actions,\n  closeController,\n}: FilterOperatorControllerProps<TData, \"boolean\">) {\n  const filterDetails = booleanFilterOperators[filter.operator];\n\n  const relatedFilters = Object.values(booleanFilterOperators).filter(\n    (o) => o.target === filterDetails.target,\n  );\n\n  const changeOperator = (value: string) => {\n    actions?.setFilterOperator(column.id, value as FilterOperators[\"boolean\"]);\n    closeController();\n  };\n\n  return (\n    <div>\n      <CommandGroup heading=\"operators\">\n        {relatedFilters.map((r) => (\n          <CommandItem\n            onSelect={() => changeOperator(r.value)}\n            value={r.value}\n            key={r.value}\n          >\n            {r.key}\n          </CommandItem>\n        ))}\n      </CommandGroup>\n    </div>\n  );\n}\n",
    "/_components/filter-actions.tsx": "import React, { memo } from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { FilterXIcon } from \"lucide-react\";\n\nimport type { DataTableFilterActions } from \"../filter-package\";\n\ninterface FilterActionsProps {\n  hasFilters: boolean;\n  actions?: DataTableFilterActions;\n}\n\nexport const FilterActions = memo(__FilterActions);\nfunction __FilterActions({ hasFilters, actions }: FilterActionsProps) {\n  return (\n    <Button\n      className={cn(\n        \"text-muted-foreground h-7 px-2 font-normal\",\n        !hasFilters && \"hidden\",\n      )}\n      variant=\"ghost\"\n      onClick={actions?.removeAllFilters}\n    >\n      clear\n    </Button>\n  );\n}\n",
    "/_components/filter-selector.tsx": "import React, {\n  isValidElement,\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport { Checkbox } from \"../ui/checkbox.tsx\";\nimport {\n  Command,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"../ui/command.tsx\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"../ui/popover.tsx\";\nimport {\n  ArrowLeftIcon,\n  ArrowRightIcon,\n  ChevronRightIcon,\n  ListFilterIcon,\n  SparklesIcon,\n} from \"lucide-react\";\n\nimport type {\n  Column,\n  ColumnDataType,\n  DataTableFilterActions,\n  FiltersState,\n  FilterStrategy,\n} from \"../filter-package\";\nimport { getColumn, isAnyOf } from \"../filter-package\";\nimport { FilterValueController } from \"./filter-value\";\n\ninterface FilterSelectorProps<TData> {\n  filters: FiltersState;\n  columns: Column<TData>[];\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n  onAIFilterSubmit?: (prompt: string) => void;\n  aiGenerating?: boolean;\n}\n\nexport const FilterSelector = memo(__FilterSelector) as typeof __FilterSelector;\n\nfunction __FilterSelector<TData>({\n  filters,\n  columns,\n  actions,\n  strategy,\n  onAIFilterSubmit,\n  aiGenerating,\n}: FilterSelectorProps<TData>) {\n  const [open, setOpen] = useState(false);\n  const [value, setValue] = useState(\"\");\n  const [property, setProperty] = useState<string | undefined>(undefined);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const visibleColumns = useMemo(\n    () => columns.filter((c) => !c.hidden),\n    [columns],\n  );\n\n  const visibleFilters = useMemo(\n    () =>\n      filters.filter((f) => visibleColumns.find((c) => c.id === f.columnId)),\n    [filters, visibleColumns],\n  );\n\n  const column = property ? getColumn(visibleColumns, property) : undefined;\n  const filter = property\n    ? visibleFilters.find((f) => f.columnId === property)\n    : undefined;\n\n  useEffect(() => {\n    if (property && inputRef) {\n      inputRef.current?.focus();\n      setValue(\"\");\n    }\n  }, [property]);\n\n  useEffect(() => {\n    if (!open) setTimeout(() => setValue(\"\"), 150);\n  }, [open]);\n\n  const content = useMemo(\n    () =>\n      property && column && column.type !== \"boolean\" ? (\n        <div className=\"flex flex-col\">\n          <div className=\"flex h-9 items-center gap-2 border-b px-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => setProperty(undefined)}\n              className=\"h-6 w-6 p-0\"\n            >\n              <ArrowLeftIcon className=\"size-4\" />\n              <span className=\"sr-only\">Back</span>\n            </Button>\n            <div className=\"flex items-center gap-1.5 text-sm\">\n              {column.icon &&\n                (isValidElement(column.icon) ? (\n                  column.icon\n                ) : (\n                  <column.icon className=\"size-4 stroke-[2.25px]\" />\n                ))}\n              <span className=\"font-medium\">{column.displayName}</span>\n            </div>\n          </div>\n          <FilterValueController\n            filter={filter!}\n            column={column as Column<TData, ColumnDataType>}\n            actions={actions}\n            strategy={strategy}\n          />\n        </div>\n      ) : (\n        <Command\n          loop\n          filter={(value, search, keywords) => {\n            const extendValue = `${value} ${keywords?.join(\" \")}`;\n            return extendValue.toLowerCase().includes(search.toLowerCase())\n              ? 1\n              : 0;\n          }}\n        >\n          <CommandInput\n            value={value}\n            onValueChange={setValue}\n            ref={inputRef}\n            placeholder=\"Search or ask AI\"\n          />\n          <CommandList className=\"max-h-fit\">\n            <CommandGroup>\n              <CommandItem\n                value={value}\n                disabled={!onAIFilterSubmit || aiGenerating}\n                onSelect={() => {\n                  const prompt = value.trim();\n                  if (!prompt || !onAIFilterSubmit) return;\n\n                  onAIFilterSubmit(prompt);\n                  setOpen(false);\n                  setTimeout(() => {\n                    setValue(\"\");\n                    setProperty(undefined);\n                  }, 100);\n                }}\n              >\n                <div className=\"flex w-full items-center justify-between gap-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <SparklesIcon className=\"size-4\" />\n                    <span>Ask AI</span>\n                  </div>\n                  <span className=\"text-muted-foreground truncate text-xs\">\n                    {value.trim().length > 0\n                      ? `\"${value.trim()}\"`\n                      : \"Type a prompt\"}\n                  </span>\n                </div>\n              </CommandItem>\n              {visibleColumns.map((column) => (\n                <FilterableColumn\n                  key={column.id}\n                  column={column}\n                  setProperty={setProperty}\n                  actions={actions}\n                  filters={visibleFilters}\n                />\n              ))}\n              <QuickSearchFilters\n                search={value}\n                filters={visibleFilters}\n                columns={visibleColumns}\n                actions={actions}\n                strategy={strategy}\n              />\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      ),\n    [\n      aiGenerating,\n      property,\n      column,\n      filter,\n      visibleFilters,\n      visibleColumns,\n      actions,\n      value,\n      strategy,\n      onAIFilterSubmit,\n    ],\n  );\n\n  return (\n    <Popover\n      open={open}\n      onOpenChange={async (value) => {\n        setOpen(value);\n        if (!value) {\n          setTimeout(() => setProperty(undefined), 100);\n        }\n      }}\n    >\n      <PopoverTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"size-7 p-0\">\n          <ListFilterIcon className=\"size-4\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent\n        align=\"start\"\n        side=\"bottom\"\n        className=\"w-fit origin-(--radix-popover-content-transform-origin) p-0\"\n      >\n        {content}\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport function FilterableColumn<TData, TType extends ColumnDataType, TVal>({\n  column,\n  setProperty,\n  actions,\n  filters,\n}: {\n  column: Column<TData, TType, TVal>;\n  setProperty: (value: string) => void;\n  actions: DataTableFilterActions;\n  filters: FiltersState;\n}) {\n  const itemRef = useRef<HTMLDivElement>(null);\n\n  const { icon: Icon } = column;\n  const hasIcon = !!Icon;\n\n  // Check if this column is being filtered\n  const isFiltered = filters.some(\n    (filter) => filter.columnId === column.id && filter.values.length > 0,\n  );\n\n  const prefetch = useCallback(() => {\n    column.prefetchValues();\n\n    // Only prefetch options and faceted values for option and multi-option columns\n    if (isAnyOf(column.type, [\"option\", \"multiOption\"])) {\n      column.prefetchOptions();\n      column.prefetchFacetedUniqueValues();\n    }\n\n    // Only prefetch min/max values for number columns\n    if (column.type === \"number\") {\n      column.prefetchFacetedMinMaxValues();\n    }\n  }, [column]);\n\n  useEffect(() => {\n    const target = itemRef.current;\n\n    if (!target) return;\n\n    // Set up MutationObserver\n    const observer = new MutationObserver((mutations) => {\n      for (const mutation of mutations) {\n        if (mutation.type === \"attributes\") {\n          const isSelected = target.getAttribute(\"data-selected\") === \"true\";\n          if (isSelected) prefetch();\n        }\n      }\n    });\n\n    // Set up observer\n    observer.observe(target, {\n      attributes: true,\n      attributeFilter: [\"data-selected\"],\n    });\n\n    // Cleanup on unmount\n    return () => observer.disconnect();\n  }, [prefetch]);\n\n  function handleSelect() {\n    if (column.type === \"boolean\") {\n      actions.setFilterValue(column as any, [true]);\n      return;\n    }\n\n    setProperty(column.id);\n  }\n\n  return (\n    <CommandItem\n      ref={itemRef}\n      value={column.id}\n      keywords={[column.displayName]}\n      onSelect={handleSelect}\n      className=\"group\"\n      onMouseEnter={prefetch}\n    >\n      <div className=\"flex w-full items-center justify-between\">\n        <div className=\"inline-flex items-center gap-1.5\">\n          {hasIcon && (\n            <div className=\"relative\">\n              {isValidElement(Icon) ? (\n                Icon\n              ) : (\n                <Icon className=\"size-4 stroke-[2.25px]\" />\n              )}\n              {isFiltered && (\n                <div className=\"absolute -right-0.5 -bottom-0.5 h-2 w-2 rounded-full bg-green-500\" />\n              )}\n            </div>\n          )}\n          {!hasIcon && isFiltered && (\n            <div className=\"h-2 w-2 rounded-full bg-green-500\" />\n          )}\n          <span>{column.displayName}</span>\n        </div>\n        {column.type !== \"boolean\" && (\n          <ArrowRightIcon className=\"size-4 opacity-0 group-aria-selected:opacity-100\" />\n        )}\n      </div>\n    </CommandItem>\n  );\n}\n\ninterface QuickSearchFiltersProps<TData> {\n  search?: string;\n  filters: FiltersState;\n  columns: Column<TData>[];\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n}\n\nexport const QuickSearchFilters = memo(\n  __QuickSearchFilters,\n) as typeof __QuickSearchFilters;\n\nfunction __QuickSearchFilters<TData>({\n  search,\n  filters,\n  columns,\n  actions,\n  strategy,\n}: QuickSearchFiltersProps<TData>) {\n  if (!search || search.trim().length < 2) return null;\n\n  // biome-ignore lint/correctness/useHookAtTopLevel: its okay\n  const cols = useMemo(\n    () =>\n      columns.filter((c) =>\n        isAnyOf<ColumnDataType>(c.type, [\"option\", \"multiOption\"]),\n      ),\n    [columns],\n  );\n\n  return (\n    <>\n      {cols.map((column) => {\n        const filter = filters.find((f) => f.columnId === column.id);\n        const options = column.getOptions();\n\n        function handleOptionSelect(value: string, check: boolean) {\n          if (check) actions.addFilterValue(column, [value]);\n          else actions.removeFilterValue(column, [value]);\n        }\n\n        return (\n          <React.Fragment key={column.id}>\n            {options.map((v) => {\n              const checked = Boolean(filter?.values.includes(v.value));\n\n              return (\n                <CommandItem\n                  key={v.value}\n                  value={v.value}\n                  keywords={[v.label, v.value]}\n                  onSelect={() => {\n                    handleOptionSelect(v.value, !checked);\n                  }}\n                  className=\"group\"\n                >\n                  <div className=\"group flex items-center gap-1.5\">\n                    <Checkbox\n                      checked={checked}\n                      className=\"dark:border-ring mr-1 opacity-0 group-data-[selected=true]:opacity-100 data-[state=checked]:opacity-100\"\n                    />\n                    <div className=\"flex w-4 items-center justify-center\">\n                      {v.icon &&\n                        (isValidElement(v.icon) ? (\n                          v.icon\n                        ) : (\n                          <v.icon className=\"text-primary size-4\" />\n                        ))}\n                    </div>\n                    <div className=\"flex items-center gap-0.5\">\n                      <span className=\"text-muted-foreground\">\n                        {column.displayName}\n                      </span>\n                      <ChevronRightIcon className=\"text-muted-foreground/75 size-3.5\" />\n                      <span>{v.label}</span>\n                    </div>\n                  </div>\n                </CommandItem>\n              );\n            })}\n          </React.Fragment>\n        );\n      })}\n    </>\n  );\n}\n",
    "/_components/filter-subject.tsx": "import React, { isValidElement } from \"react\";\n\nimport type { Column, ColumnDataType } from \"../filter-package\";\n\ninterface FilterSubjectProps<TData, TType extends ColumnDataType> {\n  column: Column<TData, TType>;\n  entityName?: string;\n}\n\nexport function FilterSubject<TData, TType extends ColumnDataType>({\n  column,\n  entityName,\n}: FilterSubjectProps<TData, TType>) {\n  const subject = column.type === \"boolean\" ? entityName : column.displayName;\n\n  const { icon: Icon } = column;\n  const hasIcon = !!Icon;\n\n  return (\n    <span className=\"flex items-center gap-1 px-2 font-medium whitespace-nowrap select-none\">\n      {hasIcon &&\n        (isValidElement(Icon) ? (\n          Icon\n        ) : (\n          <Icon className=\"text-primary size-4 stroke-[2.25px]\" />\n        ))}\n\n      <span>{subject}</span>\n    </span>\n  );\n}\n",
    "/_components/active-filters.tsx": "import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport { Separator } from \"../ui/separator.tsx\";\nimport { X } from \"lucide-react\";\n\nimport type {\n  Column,\n  ColumnDataType,\n  DataTableFilterActions,\n  FilterModel,\n  FiltersState,\n  FilterStrategy,\n} from \"../filter-package\";\nimport { getColumn } from \"../filter-package\";\nimport { FilterOperator } from \"./filter-operator\";\nimport { FilterSubject } from \"./filter-subject\";\nimport { FilterValue } from \"./filter-value\";\n\ninterface ActiveFiltersProps<TData> {\n  columns: Column<TData>[];\n  filters: FiltersState;\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n  entityName?: string;\n  aiGenerating?: boolean;\n}\n\nexport function ActiveFilters<TData>({\n  columns,\n  filters,\n  actions,\n  strategy,\n  entityName,\n  aiGenerating,\n}: ActiveFiltersProps<TData>) {\n  return (\n    <>\n      {filters.map((filter) => {\n        const id = filter.columnId;\n\n        const column = getColumn(columns, id);\n\n        // Skip if no filter value\n        if (!filter.values) return null;\n\n        return (\n          <ActiveFilter\n            key={`active-filter-${filter.columnId}`}\n            filter={filter}\n            column={column}\n            actions={actions}\n            strategy={strategy}\n            entityName={entityName}\n          />\n        );\n      })}\n      {aiGenerating && <ActiveFilterSkeleton />}\n    </>\n  );\n}\n\nfunction ActiveFilterSkeleton() {\n  return (\n    <div className=\"border-border bg-muted/60 text-muted-foreground flex h-7 items-center gap-2 rounded-2xl border px-3 text-xs shadow-xs\">\n      <div className=\"flex items-center gap-2\">\n        <span className=\"bg-muted-foreground/60 block h-2 w-10 animate-pulse rounded\" />\n        <span className=\"bg-muted-foreground/40 block h-2 w-6 animate-pulse rounded\" />\n      </div>\n    </div>\n  );\n}\n\ninterface ActiveFilterProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>;\n  column: Column<TData, TType>;\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n  entityName?: string;\n}\n\n// Generic render function for a filter with type-safe value\nexport function ActiveFilter<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  strategy,\n  entityName,\n}: ActiveFilterProps<TData, TType>) {\n  return (\n    <div className=\"border-border bg-background flex h-7 items-center rounded-2xl border text-xs shadow-xs\">\n      <FilterSubject column={column} entityName={entityName} />\n      <Separator orientation=\"vertical\" />\n      <FilterOperator filter={filter} column={column} actions={actions} />\n      <Separator orientation=\"vertical\" />\n      <FilterValue\n        filter={filter}\n        column={column}\n        actions={actions}\n        strategy={strategy}\n        entityName={entityName}\n      />\n      <Separator orientation=\"vertical\" />\n      <Button\n        variant=\"ghost\"\n        className=\"text-muted-foreground hover:text-primary h-full w-7 rounded-none rounded-r-2xl text-xs\"\n        onClick={() => actions.removeFilter(filter.columnId)}\n      >\n        <X className=\"size-4 -translate-x-0.5\" />\n      </Button>\n    </div>\n  );\n}\n\nexport function ActiveFiltersMobileContainer({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [showLeftBlur, setShowLeftBlur] = useState(false);\n  const [showRightBlur, setShowRightBlur] = useState(true);\n\n  // Check if there's content to scroll and update blur states\n  const checkScroll = () => {\n    if (scrollContainerRef.current) {\n      const { scrollLeft, scrollWidth, clientWidth } =\n        scrollContainerRef.current;\n\n      // Show left blur if scrolled to the right\n      setShowLeftBlur(scrollLeft > 0);\n\n      // Show right blur if there's more content to scroll to the right\n      // Add a small buffer (1px) to account for rounding errors\n      setShowRightBlur(scrollLeft + clientWidth < scrollWidth - 1);\n    }\n  };\n\n  // Log blur states for debugging\n  // useEffect(() => {\n  //   console.log('left:', showLeftBlur, '  right:', showRightBlur)\n  // }, [showLeftBlur, showRightBlur])\n\n  // Set up ResizeObserver to monitor container size\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  useEffect(() => {\n    if (scrollContainerRef.current) {\n      const resizeObserver = new ResizeObserver(() => {\n        checkScroll();\n      });\n      resizeObserver.observe(scrollContainerRef.current);\n      return () => {\n        resizeObserver.disconnect();\n      };\n    }\n  }, []);\n\n  // Update blur states when children change\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  useEffect(() => {\n    checkScroll();\n  }, [children]);\n\n  return (\n    <div className=\"relative w-full overflow-x-hidden\">\n      {/* Left blur effect */}\n      {showLeftBlur && (\n        <div className=\"from-background animate-in fade-in-0 pointer-events-none absolute top-0 bottom-0 left-0 z-10 w-16 bg-gradient-to-r to-transparent\" />\n      )}\n\n      {/* Scrollable container */}\n      <div\n        ref={scrollContainerRef}\n        className=\"no-scrollbar flex gap-2 overflow-x-scroll\"\n        onScroll={checkScroll}\n      >\n        {children}\n      </div>\n\n      {/* Right blur effect */}\n      {showRightBlur && (\n        <div className=\"from-background animate-in fade-in-0 pointer-events-none absolute top-0 right-0 bottom-0 z-10 w-16 bg-gradient-to-l to-transparent\" />\n      )}\n    </div>\n  );\n}\n",
    "/_components/use-ai-filter-simulation.ts": "import { useCallback, useRef } from \"react\";\nimport { useChat } from \"@ai-sdk/react\";\nimport { StaticChatTransport } from \"@loremllm/transport\";\n\nimport type { Column, DataTableFilterActions } from \"../filter-package\";\nimport type { UIMessage } from \"@ai-sdk/react\";\n\ntype FilterUIMessage = UIMessage<\n  unknown,\n  {\n    setFilter: {\n      columnId: string;\n      values: unknown[];\n    };\n  }\n>;\n\nconst transport = new StaticChatTransport<FilterUIMessage>({\n  async *mockResponse() {\n    yield {\n      type: \"data-setFilter\",\n      data: {\n        columnId: \"skills\",\n        values: [\"javascript\", \"typescript\", \"react\", \"nodejs\"],\n      },\n    };\n\n    yield {\n      type: \"data-setFilter\",\n      data: {\n        columnId: \"department\",\n        values: [\"design\"],\n      },\n    };\n  },\n  chunkDelayMs: [600, 1400],\n});\n\ntype UseAiFilterSimulationParams = {\n  columns: Column<any>[];\n  actions: DataTableFilterActions;\n};\n\nexport const useAiFilterSimulation = ({\n  columns,\n  actions,\n}: UseAiFilterSimulationParams) => {\n  const batchResultsRef = useRef<\n    {\n      column: Column<any>;\n      values: unknown[];\n    }[]\n  >([]);\n\n  console.log(\"batchResultsRef\", batchResultsRef.current);\n\n  const { sendMessage, status } = useChat<FilterUIMessage>({\n    transport,\n    onData: (dataPart) => {\n      if (dataPart.type === \"data-setFilter\") {\n        const { columnId, values } = dataPart.data;\n        const column = columns.find((col) => col.id === columnId);\n        if (column) {\n          batchResultsRef.current.push({ column, values });\n          actions.batch((batchActions) => {\n            batchResultsRef.current.forEach(({ column, values }) => {\n              batchActions.setFilterValue(column, values);\n            });\n          });\n        }\n      }\n    },\n    onFinish: () => {\n      batchResultsRef.current = [];\n    },\n  });\n\n  const handleAiFilterSubmit = useCallback(\n    (prompt: string) => {\n      actions.removeAllFilters();\n      void sendMessage({ text: prompt });\n    },\n    [sendMessage, actions],\n  );\n\n  const aiGenerating = status === \"streaming\" || status === \"submitted\";\n\n  return {\n    aiGenerating,\n    handleAiFilterSubmit,\n  };\n};\n",
    "/filter-package/index.ts": "export { createColumnConfigHelper } from \"./core/columns/index\";\nexport * from \"./core/operators\";\nexport * from \"./core/types\";\nexport {\n  createTypedDataTableFilters,\n  useDataTableFilters,\n} from \"./hooks/use-data-table-filters\";\nexport * from \"./lib/array\";\nexport * from \"./lib/filter-fns\";\nexport * from \"./lib/helpers\";\nexport * from \"./lib/order-fns\";\n",
    "/_components/filter-value.tsx": "import type { DateRange } from \"react-day-picker\";\nimport React, {\n  cloneElement,\n  isValidElement,\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport { Calendar } from \"../ui/calendar.tsx\";\nimport { Checkbox } from \"../ui/checkbox.tsx\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n  CommandSeparator,\n} from \"../ui/command.tsx\";\nimport { Input } from \"../ui/input.tsx\";\nimport {\n  Popover,\n  PopoverAnchor,\n  PopoverContent,\n  PopoverTrigger,\n} from \"../ui/popover.tsx\";\nimport { Slider } from \"../ui/slider.tsx\";\nimport { Switch } from \"../ui/switch.tsx\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../ui/tabs.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { format, isEqual } from \"date-fns\";\nimport { Ellipsis } from \"lucide-react\";\n\nimport type {\n  Column,\n  ColumnDataType,\n  ColumnOptionExtended,\n  DataTableFilterActions,\n  FilterModel,\n  FilterStrategy,\n  MinMaxReturn,\n} from \"../filter-package\";\nimport {\n  createNumberRange,\n  numberFilterOperators,\n  take,\n} from \"../filter-package\";\n\ntype ControlFunctions = {\n  cancel: () => void;\n  flush: () => void;\n  isPending: () => boolean;\n};\n\nexport type DebouncedState<T extends (...args: any) => ReturnType<T>> = ((\n  ...args: Parameters<T>\n) => ReturnType<T> | undefined) &\n  ControlFunctions;\n\nexport function useDebounceCallback<T extends (...args: any) => ReturnType<T>>(\n  func: T,\n  delay = 500,\n  options?: DebounceOptions,\n): DebouncedState<T> {\n  const debouncedFunc = useRef<ReturnType<typeof debounce>>(null);\n\n  useUnmount(() => {\n    if (debouncedFunc.current) {\n      debouncedFunc.current.cancel();\n    }\n  });\n\n  const debounced = useMemo(() => {\n    const debouncedFuncInstance = debounce(func, delay, options);\n\n    const wrappedFunc: DebouncedState<T> = (...args: Parameters<T>) => {\n      return debouncedFuncInstance(...args);\n    };\n\n    wrappedFunc.cancel = () => {\n      debouncedFuncInstance.cancel();\n    };\n\n    wrappedFunc.isPending = () => {\n      return !!debouncedFunc.current;\n    };\n\n    wrappedFunc.flush = () => {\n      return debouncedFuncInstance.flush();\n    };\n\n    return wrappedFunc;\n  }, [func, delay, options]);\n\n  // Update the debounced function ref whenever func, wait, or options change\n  useEffect(() => {\n    debouncedFunc.current = debounce(func, delay, options);\n  }, [func, delay, options]);\n\n  return debounced;\n}\n\nfunction useUnmount(func: () => void) {\n  const funcRef = useRef(func);\n\n  funcRef.current = func;\n\n  useEffect(\n    () => () => {\n      funcRef.current();\n    },\n    [],\n  );\n}\n\ntype DebounceOptions = {\n  leading?: boolean;\n  trailing?: boolean;\n  maxWait?: number;\n};\n\nfunction debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number,\n  options: DebounceOptions = {},\n): ((...args: Parameters<T>) => ReturnType<T> | undefined) & ControlFunctions {\n  const { leading = false, trailing = true, maxWait } = options;\n  let timeout: NodeJS.Timeout | null = null;\n  let lastArgs: Parameters<T> | null = null;\n  let lastThis: any;\n  let result: ReturnType<T> | undefined;\n  let lastCallTime: number | null = null;\n  let lastInvokeTime = 0;\n\n  const maxWaitTime = maxWait !== undefined ? Math.max(wait, maxWait) : null;\n\n  function invokeFunc(time: number): ReturnType<T> | undefined {\n    if (lastArgs === null) return undefined;\n    const args = lastArgs;\n    const thisArg = lastThis;\n    lastArgs = null;\n    lastThis = null;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function shouldInvoke(time: number): boolean {\n    if (lastCallTime === null) return false;\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    return (\n      lastCallTime === null ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxWaitTime !== null && timeSinceLastInvoke >= maxWaitTime)\n    );\n  }\n\n  function startTimer(\n    pendingFunc: () => void,\n    waitTime: number,\n  ): NodeJS.Timeout {\n    return setTimeout(pendingFunc, waitTime);\n  }\n\n  function remainingWait(time: number): number {\n    if (lastCallTime === null) return wait;\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    const timeWaiting = wait - timeSinceLastCall;\n    return maxWaitTime !== null\n      ? Math.min(timeWaiting, maxWaitTime - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function timerExpired() {\n    const time = Date.now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    timeout = startTimer(timerExpired, remainingWait(time));\n  }\n\n  function leadingEdge(time: number): ReturnType<T> | undefined {\n    lastInvokeTime = time;\n    timeout = startTimer(timerExpired, wait);\n    return leading ? invokeFunc(time) : undefined;\n  }\n\n  function trailingEdge(time: number): ReturnType<T> | undefined {\n    timeout = null;\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = null;\n    lastThis = null;\n    return result;\n  }\n\n  function debounced(\n    this: any,\n    ...args: Parameters<T>\n  ): ReturnType<T> | undefined {\n    const time = Date.now();\n    const isInvoking = shouldInvoke(time);\n\n    lastArgs = args;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timeout === null) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxWaitTime !== null) {\n        timeout = startTimer(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timeout === null) {\n      timeout = startTimer(timerExpired, wait);\n    }\n    return result;\n  }\n\n  debounced.cancel = () => {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n    }\n    lastInvokeTime = 0;\n    lastArgs = null;\n    lastThis = null;\n    lastCallTime = null;\n    timeout = null;\n  };\n\n  debounced.flush = () => {\n    return timeout === null ? result : trailingEdge(Date.now());\n  };\n\n  debounced.isPending = () => {\n    return timeout !== null;\n  };\n\n  return debounced;\n}\n\nexport function DebouncedInput({\n  value: initialValue,\n  onChange,\n  debounceMs = 500, // This is the wait time, not the function\n  ...props\n}: {\n  value: string | number;\n  onChange: (value: string | number) => void;\n  debounceMs?: number;\n} & Omit<React.InputHTMLAttributes<HTMLInputElement>, \"onChange\">) {\n  const [value, setValue] = useState(initialValue);\n\n  // Sync with initialValue when it changes\n  useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n\n  // Define the debounced function with useCallback\n  const debouncedOnChange = useCallback(\n    debounce((newValue: string | number) => {\n      onChange(newValue);\n    }, debounceMs), // Pass the wait time here\n    [debounceMs, onChange], // Dependencies\n  );\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setValue(newValue); // Update local state immediately\n    debouncedOnChange(newValue); // Call debounced version\n  };\n\n  return <Input {...props} value={value} onChange={handleChange} />;\n}\n\ninterface FilterValueProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>;\n  column: Column<TData, TType>;\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n  entityName?: string;\n}\n\nexport const FilterValue = memo(__FilterValue) as typeof __FilterValue;\n\nfunction __FilterValue<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  strategy,\n  entityName,\n}: FilterValueProps<TData, TType>) {\n  // Don't open the value controller for boolean columns\n  // We can toggle the filter operator instead\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    if (column.type === \"boolean\") e.preventDefault();\n  }\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          className={cn(\n            \"m-0 h-full w-fit rounded-none p-0 px-2 text-xs whitespace-nowrap\",\n            column.type === \"boolean\" && \"hover:bg-inherit\",\n          )}\n          onClick={handleClick}\n        >\n          <FilterValueDisplay\n            filter={filter}\n            column={column}\n            actions={actions}\n            entityName={entityName}\n          />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent\n        align=\"start\"\n        side=\"bottom\"\n        className=\"w-fit origin-(--radix-popover-content-transform-origin) p-0\"\n      >\n        <FilterValueController\n          filter={filter}\n          column={column}\n          actions={actions}\n          strategy={strategy}\n        />\n      </PopoverContent>\n    </Popover>\n  );\n}\n\ninterface FilterValueDisplayProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>;\n  column: Column<TData, TType>;\n  actions: DataTableFilterActions;\n  entityName?: string;\n}\n\nexport function FilterValueDisplay<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  entityName,\n}: FilterValueDisplayProps<TData, TType>) {\n  switch (column.type) {\n    case \"option\":\n      return (\n        <FilterValueOptionDisplay\n          filter={filter as FilterModel<\"option\">}\n          column={column as Column<TData, \"option\">}\n          actions={actions}\n        />\n      );\n    case \"multiOption\":\n      return (\n        <FilterValueMultiOptionDisplay\n          filter={filter as FilterModel<\"multiOption\">}\n          column={column as Column<TData, \"multiOption\">}\n          actions={actions}\n        />\n      );\n    case \"date\":\n      return (\n        <FilterValueDateDisplay\n          filter={filter as FilterModel<\"date\">}\n          column={column as Column<TData, \"date\">}\n          actions={actions}\n        />\n      );\n    case \"text\":\n      return (\n        <FilterValueTextDisplay\n          filter={filter as FilterModel<\"text\">}\n          column={column as Column<TData, \"text\">}\n          actions={actions}\n        />\n      );\n    case \"number\":\n      return (\n        <FilterValueNumberDisplay\n          filter={filter as FilterModel<\"number\">}\n          column={column as Column<TData, \"number\">}\n          actions={actions}\n        />\n      );\n    case \"boolean\":\n      return (\n        <FilterValueBooleanDisplay\n          filter={filter as FilterModel<\"boolean\">}\n          column={column as Column<TData, \"boolean\">}\n          actions={actions}\n          entityName={entityName}\n        />\n      );\n    default:\n      return null;\n  }\n}\n\nexport function FilterValueOptionDisplay<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueDisplayProps<TData, \"option\">) {\n  const options = useMemo(() => column.getOptions(), [column]);\n  const selected = options.filter((o) => filter?.values.includes(o.value));\n\n  // We display the selected options based on how many are selected\n  //\n  // If there is only one option selected, we display its icon and label\n  //\n  // If there are multiple options selected, we display:\n  // 1) up to 3 icons of the selected options\n  // 2) the number of selected options\n  if (selected.length === 1 && selected[0]) {\n    const { label, icon: Icon } = selected[0];\n    const hasIcon = !!Icon;\n    return (\n      <span className=\"inline-flex items-center gap-1\">\n        {hasIcon &&\n          (isValidElement(Icon) ? (\n            Icon\n          ) : (\n            <Icon className=\"text-primary size-4\" />\n          ))}\n        <span>{label}</span>\n      </span>\n    );\n  }\n  const name = column.displayName.toLowerCase();\n  // TODO: Better pluralization for different languages\n  const pluralName = name.endsWith(\"s\") ? `${name}es` : `${name}s`;\n\n  const hasOptionIcons = !options?.some((o) => !o.icon);\n\n  return (\n    <div className=\"inline-flex items-center gap-0.5\">\n      {hasOptionIcons &&\n        take(selected, 3).map(({ value, icon }) => {\n          const Icon = icon!;\n          return isValidElement(Icon) ? (\n            Icon\n          ) : (\n            <Icon key={value} className=\"size-4\" />\n          );\n        })}\n      <span className={cn(hasOptionIcons && \"ml-1.5\")}>\n        {selected.length} {pluralName}\n      </span>\n    </div>\n  );\n}\n\nexport function FilterValueMultiOptionDisplay<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueDisplayProps<TData, \"multiOption\">) {\n  const options = useMemo(() => column.getOptions(), [column]);\n  const selected = options.filter((o) => filter.values.includes(o.value));\n\n  if (selected.length === 1 && selected[0]) {\n    const { label, icon: Icon } = selected[0];\n    const hasIcon = !!Icon;\n    return (\n      <span className=\"inline-flex items-center gap-1.5\">\n        {hasIcon &&\n          (isValidElement(Icon) ? (\n            Icon\n          ) : (\n            <Icon className=\"text-primary size-4\" />\n          ))}\n\n        <span>{label}</span>\n      </span>\n    );\n  }\n\n  const name = column.displayName.toLowerCase();\n\n  const hasOptionIcons = !options?.some((o) => !o.icon);\n\n  return (\n    <div className=\"inline-flex items-center gap-1.5\">\n      {hasOptionIcons && (\n        <div key=\"icons\" className=\"inline-flex items-center gap-0.5\">\n          {take(selected, 3).map(({ value, icon }) => {\n            const Icon = icon!;\n            return isValidElement(Icon) ? (\n              cloneElement(Icon, { key: value })\n            ) : (\n              <Icon key={value} className=\"size-4\" />\n            );\n          })}\n        </div>\n      )}\n      <span>\n        {selected.length} {name}\n      </span>\n    </div>\n  );\n}\n\nfunction formatDateRange(start: Date, end: Date) {\n  const sameMonth = start.getMonth() === end.getMonth();\n  const sameYear = start.getFullYear() === end.getFullYear();\n\n  if (sameMonth && sameYear) {\n    return `${format(start, \"MMM d\")} - ${format(end, \"d, yyyy\")}`;\n  }\n\n  if (sameYear) {\n    return `${format(start, \"MMM d\")} - ${format(end, \"MMM d, yyyy\")}`;\n  }\n\n  return `${format(start, \"MMM d, yyyy\")} - ${format(end, \"MMM d, yyyy\")}`;\n}\n\nexport function FilterValueDateDisplay<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueDisplayProps<TData, \"date\">) {\n  if (!filter) return null;\n  if (filter.values.length === 0) return <Ellipsis className=\"size-4\" />;\n  if (filter.values.length === 1 && filter.values[0]) {\n    const value = filter.values[0];\n\n    const formattedDateStr = format(value, \"MMM d, yyyy\");\n\n    return <span>{formattedDateStr}</span>;\n  }\n  if (filter.values.length === 2 && filter.values[0] && filter.values[1]) {\n    const formattedRangeStr = formatDateRange(\n      filter.values[0],\n      filter.values[1],\n    );\n\n    return <span>{formattedRangeStr}</span>;\n  }\n\n  return null;\n}\n\nexport function FilterValueTextDisplay<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueDisplayProps<TData, \"text\">) {\n  if (!filter) return null;\n  if (\n    filter.values.length === 0 ||\n    (filter.values[0] && filter.values[0].trim() === \"\")\n  )\n    return <Ellipsis className=\"size-4\" />;\n\n  const value = filter.values[0];\n\n  return <span>{value}</span>;\n}\n\nexport function FilterValueNumberDisplay<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueDisplayProps<TData, \"number\">) {\n  if (!filter || !filter.values || filter.values.length === 0) return null;\n\n  if (\n    filter.operator === \"is between\" ||\n    filter.operator === \"is not between\"\n  ) {\n    const minValue = filter.values[0];\n    const maxValue = filter.values[1];\n\n    return (\n      <span className=\"tracking-tight tabular-nums\">\n        {minValue} and {maxValue}\n      </span>\n    );\n  }\n\n  const value = filter.values[0];\n  return <span className=\"tracking-tight tabular-nums\">{value}</span>;\n}\n\nexport function FilterValueBooleanDisplay<TData>({\n  filter,\n  column,\n}: FilterValueDisplayProps<TData, \"boolean\">) {\n  if (!filter || filter.values.length === 0) return null;\n  return <span>{column.toggledStateName}</span>;\n}\n\n/****** Property Filter Value Controller ******/\n\ninterface FilterValueControllerProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>;\n  column: Column<TData, TType>;\n  actions: DataTableFilterActions;\n  strategy: FilterStrategy;\n}\n\nexport const FilterValueController = memo(\n  __FilterValueController,\n) as typeof __FilterValueController;\n\nfunction __FilterValueController<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  strategy,\n}: FilterValueControllerProps<TData, TType>) {\n  switch (column.type) {\n    case \"option\":\n      return (\n        <FilterValueOptionController\n          filter={filter as FilterModel<\"option\">}\n          column={column as Column<TData, \"option\">}\n          actions={actions}\n          strategy={strategy}\n        />\n      );\n    case \"multiOption\":\n      return (\n        <FilterValueMultiOptionController\n          filter={filter as FilterModel<\"multiOption\">}\n          column={column as Column<TData, \"multiOption\">}\n          actions={actions}\n          strategy={strategy}\n        />\n      );\n    case \"date\":\n      return (\n        <FilterValueDateController\n          filter={filter as FilterModel<\"date\">}\n          column={column as Column<TData, \"date\">}\n          actions={actions}\n          strategy={strategy}\n        />\n      );\n    case \"text\":\n      return (\n        <FilterValueTextController\n          filter={filter as FilterModel<\"text\">}\n          column={column as Column<TData, \"text\">}\n          actions={actions}\n          strategy={strategy}\n        />\n      );\n    case \"number\":\n      return (\n        <FilterValueNumberController\n          filter={filter as FilterModel<\"number\">}\n          column={column as Column<TData, \"number\">}\n          actions={actions}\n          strategy={strategy}\n        />\n      );\n    default:\n      return null;\n  }\n}\n\ninterface OptionItemProps {\n  option: ColumnOptionExtended;\n  onToggle: (value: string, checked: boolean) => void;\n}\n\n// Memoized option item to prevent re-renders unless its own props change\nconst OptionItem = memo(function OptionItem({\n  option,\n  onToggle,\n}: OptionItemProps) {\n  const { value, label, icon: Icon, selected, count } = option;\n  const handleSelect = useCallback(() => {\n    onToggle(value, !selected);\n  }, [onToggle, value, selected]);\n\n  return (\n    <CommandItem\n      key={value}\n      onSelect={handleSelect}\n      className=\"group flex items-center justify-between gap-4\"\n    >\n      <div className=\"flex min-w-0 flex-1 items-center gap-1.5\">\n        <Checkbox\n          checked={selected}\n          className=\"dark:border-ring mr-1 shrink-0 opacity-0 group-data-[selected=true]:opacity-100 data-[state=checked]:opacity-100\"\n        />\n        <div className=\"shrink-0\">\n          {Icon &&\n            (isValidElement(Icon) ? (\n              Icon\n            ) : (\n              <Icon className=\"text-primary size-4\" />\n            ))}\n        </div>\n        <span className=\"overflow-x-hidden overflow-ellipsis whitespace-nowrap\">\n          {label}\n        </span>\n      </div>\n    </CommandItem>\n  );\n});\n\nexport function FilterValueOptionController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, \"option\">) {\n  // Derive the initial selected values on mount\n  const initialSelectedValues = useMemo(\n    () => new Set(filter?.values || []),\n    [],\n  );\n\n  // Separate the selected and unselected options\n  const { selectedOptions, unselectedOptions } = useMemo(() => {\n    const counts = column.getFacetedUniqueValues();\n    const allOptions = column.getOptions().map((o) => {\n      const currentlySelected = filter?.values.includes(o.value) ?? false;\n      return {\n        ...o,\n        selected: currentlySelected,\n        count: counts?.get(o.value) ?? 0,\n      };\n    });\n\n    const selected = allOptions.filter((o) =>\n      initialSelectedValues.has(o.value),\n    );\n    const unselected = allOptions.filter(\n      (o) => !initialSelectedValues.has(o.value),\n    );\n    return { selectedOptions: selected, unselectedOptions: unselected };\n  }, [column, filter?.values, initialSelectedValues]);\n\n  const handleToggle = useCallback(\n    (value: string, checked: boolean) => {\n      if (checked) actions.addFilterValue(column, [value]);\n      else actions.removeFilterValue(column, [value]);\n    },\n    [actions, column],\n  );\n\n  return (\n    <Command className=\"max-w-[300px]\" loop>\n      <CommandInput autoFocus placeholder=\"search\" />\n      <CommandEmpty>No results</CommandEmpty>\n      <CommandList>\n        <CommandGroup className={cn(selectedOptions.length === 0 && \"hidden\")}>\n          {selectedOptions.map((option) => (\n            <OptionItem\n              key={option.value}\n              option={option}\n              onToggle={handleToggle}\n            />\n          ))}\n        </CommandGroup>\n        {/* Only show separator if there are both selected AND unselected options */}\n        <CommandSeparator\n          className={cn(\n            (unselectedOptions.length === 0 || selectedOptions.length === 0) &&\n              \"hidden\",\n          )}\n        />\n        <CommandGroup\n          className={cn(unselectedOptions.length === 0 && \"hidden\")}\n        >\n          {unselectedOptions.map((option) => (\n            <OptionItem\n              key={option.value}\n              option={option}\n              onToggle={handleToggle}\n            />\n          ))}\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  );\n}\n\nexport function FilterValueMultiOptionController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, \"multiOption\">) {\n  // Derive the initial selected values on mount\n  const initialSelectedValues = useMemo(\n    () => new Set(filter?.values || []),\n    [],\n  );\n\n  // Separate the selected and unselected options\n  const { selectedOptions, unselectedOptions } = useMemo(() => {\n    const counts = column.getFacetedUniqueValues();\n    const allOptions = column.getOptions().map((o) => {\n      const currentlySelected = filter?.values.includes(o.value) ?? false;\n      return {\n        ...o,\n        selected: currentlySelected,\n        count: counts?.get(o.value) ?? 0,\n      };\n    });\n\n    const selected = allOptions.filter((o) =>\n      initialSelectedValues.has(o.value),\n    );\n    const unselected = allOptions.filter(\n      (o) => !initialSelectedValues.has(o.value),\n    );\n    return { selectedOptions: selected, unselectedOptions: unselected };\n  }, [column, filter?.values, initialSelectedValues]);\n\n  const handleToggle = useCallback(\n    (value: string, checked: boolean) => {\n      if (checked) actions.addFilterValue(column, [value]);\n      else actions.removeFilterValue(column, [value]);\n    },\n    [actions, column],\n  );\n\n  return (\n    <Command className=\"max-w-[300px]\" loop>\n      <CommandInput autoFocus placeholder=\"search\" />\n      <CommandEmpty>No results</CommandEmpty>\n      <CommandList>\n        <CommandGroup className={cn(selectedOptions.length === 0 && \"hidden\")}>\n          {selectedOptions.map((option) => (\n            <OptionItem\n              key={option.value}\n              option={option}\n              onToggle={handleToggle}\n            />\n          ))}\n        </CommandGroup>\n        {/* Only show separator if there are both selected AND unselected options */}\n        <CommandSeparator\n          className={cn(\n            (unselectedOptions.length === 0 || selectedOptions.length === 0) &&\n              \"hidden\",\n          )}\n        />\n        <CommandGroup\n          className={cn(unselectedOptions.length === 0 && \"hidden\")}\n        >\n          {unselectedOptions.map((option) => (\n            <OptionItem\n              key={option.value}\n              option={option}\n              onToggle={handleToggle}\n            />\n          ))}\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  );\n}\n\nexport function FilterValueDateController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, \"date\">) {\n  const [date, setDate] = useState<DateRange | undefined>({\n    from: filter?.values[0] ?? new Date(),\n    to: filter?.values[1] ?? undefined,\n  });\n\n  function changeDateRange(value: DateRange | undefined) {\n    const start = value?.from;\n    const end =\n      start && value && value.to && !isEqual(start, value.to)\n        ? value.to\n        : undefined;\n\n    setDate({ from: start, to: end });\n\n    const isRange = start && end;\n    const newValues = isRange ? [start, end] : start ? [start] : [];\n\n    actions.setFilterValue(column, newValues);\n  }\n\n  return (\n    <Command>\n      <CommandList className=\"max-h-fit\">\n        <CommandGroup>\n          <div>\n            <Calendar\n              initialFocus\n              mode=\"range\"\n              defaultMonth={date?.from}\n              selected={date}\n              onSelect={changeDateRange}\n              numberOfMonths={1}\n            />\n          </div>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  );\n}\n\nexport function FilterValueTextController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, \"text\">) {\n  const changeText = (value: string | number) => {\n    actions.setFilterValue(column, [String(value)]);\n  };\n\n  return (\n    <Command>\n      <CommandList className=\"max-h-fit\">\n        <CommandGroup>\n          <CommandItem>\n            <DebouncedInput\n              placeholder=\"search\"\n              autoFocus\n              value={filter?.values[0] ?? \"\"}\n              onChange={changeText}\n            />\n          </CommandItem>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  );\n}\n\nexport function FilterValueNumberController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, \"number\">) {\n  const minMax = useMemo(\n    () => column.getFacetedMinMaxValues() as MinMaxReturn<\"number\">,\n    [column],\n  );\n  const [sliderMin, sliderMax] = [\n    minMax ? minMax[0] : 0,\n    minMax ? minMax[1] : 0,\n  ];\n\n  // Local state for values\n  const [values, setValues] = useState(filter?.values ?? [0, 0]);\n\n  // Sync with parent filter changes\n  useEffect(() => {\n    if (\n      filter?.values &&\n      filter.values.length === values.length &&\n      filter.values.every((v, i) => v === values[i])\n    ) {\n      setValues(filter.values);\n    }\n  }, [filter?.values, values]);\n\n  const isNumberRange =\n    // filter && values.length === 2\n    filter && numberFilterOperators[filter.operator].target === \"multiple\";\n\n  const setFilterOperatorDebounced = useDebounceCallback(\n    actions.setFilterOperator,\n    500,\n  );\n  const setFilterValueDebounced = useDebounceCallback(\n    actions.setFilterValue,\n    500,\n  );\n\n  const changeNumber = (value: number[]) => {\n    setValues(value);\n    setFilterValueDebounced(column as any, value);\n  };\n\n  const changeMinNumber = (value: number) => {\n    const newValues = createNumberRange([value, values[1]!]);\n    setValues(newValues);\n    setFilterValueDebounced(column as any, newValues);\n  };\n\n  const changeMaxNumber = (value: number) => {\n    const newValues = createNumberRange([values[0]!, value]);\n    setValues(newValues);\n    setFilterValueDebounced(column as any, newValues);\n  };\n\n  const changeType = useCallback(\n    (type: \"single\" | \"range\") => {\n      let newValues: number[] = [];\n      if (type === \"single\")\n        newValues = [values[0]!]; // Keep the first value for single mode\n      else if (!minMax)\n        newValues = createNumberRange([values[0]!, values[1] ?? 0]);\n      else {\n        const value = values[0]!;\n        newValues =\n          value - minMax[0] < minMax[1] - value\n            ? createNumberRange([value, minMax[1]])\n            : createNumberRange([minMax[0], value]);\n      }\n\n      const newOperator = type === \"single\" ? \"is\" : \"is between\";\n\n      // Update local state\n      setValues(newValues);\n\n      // Cancel in-flight debounced calls to prevent flicker/race conditions\n      setFilterOperatorDebounced.cancel();\n      setFilterValueDebounced.cancel();\n\n      // Update global filter state atomically\n      actions.setFilterOperator(column.id, newOperator);\n      actions.setFilterValue(column, newValues);\n    },\n    [values, column, actions, minMax],\n  );\n\n  return (\n    <Command>\n      <CommandList className=\"w-[300px] px-2 py-2\">\n        <CommandGroup>\n          <div className=\"flex w-full flex-col\">\n            <Tabs\n              value={isNumberRange ? \"range\" : \"single\"}\n              onValueChange={(v) => changeType(v as \"single\" | \"range\")}\n            >\n              <TabsList className=\"w-full *:text-xs\">\n                <TabsTrigger value=\"single\">single</TabsTrigger>\n                <TabsTrigger value=\"range\">range</TabsTrigger>\n              </TabsList>\n              <TabsContent value=\"single\" className=\"mt-4 flex flex-col gap-4\">\n                {minMax && (\n                  <Slider\n                    value={[values[0]!]}\n                    onValueChange={(value) => changeNumber(value)}\n                    min={sliderMin}\n                    max={sliderMax}\n                    step={1}\n                    aria-orientation=\"horizontal\"\n                  />\n                )}\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs font-medium\">value</span>\n                  <DebouncedInput\n                    id=\"single\"\n                    type=\"number\"\n                    value={values[0]!.toString()} // Use values[0] directly\n                    onChange={(v) => changeNumber([Number(v)])}\n                  />\n                </div>\n              </TabsContent>\n              <TabsContent value=\"range\" className=\"mt-4 flex flex-col gap-4\">\n                {minMax && (\n                  <Slider\n                    value={values} // Use values directly\n                    onValueChange={changeNumber}\n                    min={sliderMin}\n                    max={sliderMax}\n                    step={1}\n                    aria-orientation=\"horizontal\"\n                  />\n                )}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-medium\">min</span>\n                    <DebouncedInput\n                      type=\"number\"\n                      value={values[0]!}\n                      onChange={(v) => changeMinNumber(Number(v))}\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-medium\">max</span>\n                    <DebouncedInput\n                      type=\"number\"\n                      value={values[1]!}\n                      onChange={(v) => changeMaxNumber(Number(v))}\n                    />\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  );\n}\n\nexport function FilterValueBooleanController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, \"boolean\">) {\n  const handleChange = (value: boolean) => {\n    actions.setFilterValue(column, [value]);\n  };\n\n  return (\n    <Command>\n      <CommandList className=\"max-h-fit\">\n        <CommandGroup>\n          <CommandItem>\n            <Switch\n              checked={filter?.values[0] ?? false}\n              onCheckedChange={handleChange}\n            />\n          </CommandItem>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  );\n}\n\n// TODO: Add support for `bigint` filtering\n",
    "/filter-package/core/filters.ts": "import type {\n  Column,\n  ColumnDataType,\n  FilterModel,\n  FilterOperations,\n  FiltersState,\n  OptionBasedColumnDataType,\n} from \"./types\";\nimport { addUniq, removeUniq, uniq } from \"../lib/array\";\nimport {\n  createBigIntFilterValue,\n  createDateFilterValue,\n  createNumberFilterValue,\n} from \"../lib/helpers\";\nimport { DEFAULT_OPERATORS, determineNewOperator } from \"./operators\";\n\nexport const filterOperations: FilterOperations = {\n  addFilterValue<TData, TType extends OptionBasedColumnDataType>(\n    filters: FiltersState,\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n  ): FiltersState {\n    if (column.type === \"option\") {\n      const filter = filters.find((f) => f.columnId === column.id);\n      const isColumnFiltered = filter && filter.values.length > 0;\n\n      if (!isColumnFiltered) {\n        return [\n          ...filters,\n          {\n            columnId: column.id,\n            type: column.type,\n            operator:\n              values.length > 1\n                ? DEFAULT_OPERATORS[column.type]!.multiple\n                : DEFAULT_OPERATORS[column.type]!.single,\n            values,\n          },\n        ];\n      }\n\n      const oldValues = filter.values;\n      const newValues = addUniq(filter.values, values);\n      const newOperator = determineNewOperator(\n        \"option\",\n        oldValues,\n        newValues,\n        filter.operator,\n      );\n\n      return filters.map((f) =>\n        f.columnId === column.id\n          ? {\n              columnId: column.id,\n              type: column.type,\n              operator: newOperator,\n              values: newValues,\n            }\n          : f,\n      );\n    }\n\n    if (column.type === \"multiOption\") {\n      const filter = filters.find((f) => f.columnId === column.id);\n      const isColumnFiltered = filter && filter.values.length > 0;\n\n      if (!isColumnFiltered) {\n        return [\n          ...filters,\n          {\n            columnId: column.id,\n            type: column.type,\n            operator:\n              values.length > 1\n                ? DEFAULT_OPERATORS[column.type]!.multiple\n                : DEFAULT_OPERATORS[column.type]!.single,\n            values,\n          },\n        ];\n      }\n\n      const oldValues = filter.values;\n      const newValues = addUniq(filter.values, values);\n      const newOperator = determineNewOperator(\n        \"multiOption\",\n        oldValues,\n        newValues,\n        filter.operator,\n      );\n\n      if (newValues.length === 0) {\n        return filters.filter((f) => f.columnId !== column.id);\n      }\n\n      return filters.map((f) =>\n        f.columnId === column.id\n          ? {\n              columnId: column.id,\n              type: column.type,\n              operator: newOperator,\n              values: newValues,\n            }\n          : f,\n      );\n    }\n\n    throw new Error(\n      \"[data-table-filter] addFilterValue() is only supported for option columns\",\n    );\n  },\n\n  removeFilterValue<TData, TType extends OptionBasedColumnDataType>(\n    filters: FiltersState,\n    column: Column<TData, TType>,\n    value: FilterModel<TType>[\"values\"],\n  ): FiltersState {\n    if (column.type === \"option\" || column.type === \"multiOption\") {\n      const filter = filters.find((f) => f.columnId === column.id);\n      const isColumnFiltered = filter && filter.values.length > 0;\n\n      if (!isColumnFiltered) {\n        return filters;\n      }\n\n      const newValues = removeUniq(filter.values, value);\n      const oldValues = filter.values;\n      const newOperator = determineNewOperator(\n        column.type,\n        oldValues,\n        newValues,\n        filter.operator,\n      );\n\n      if (newValues.length === 0) {\n        return filters.filter((f) => f.columnId !== column.id);\n      }\n\n      return filters.map((f) =>\n        f.columnId === column.id\n          ? {\n              columnId: column.id,\n              type: column.type,\n              operator: newOperator,\n              values: newValues,\n            }\n          : f,\n      );\n    }\n\n    throw new Error(\n      \"[data-table-filter] removeFilterValue() is only supported for option columns\",\n    );\n  },\n\n  setFilterValue<TData, TType extends ColumnDataType>(\n    filters: FiltersState,\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n  ): FiltersState {\n    const filter = filters.find((f) => f.columnId === column.id);\n    const isColumnFiltered = filter && filter.values.length > 0;\n\n    const newValues =\n      column.type === \"number\"\n        ? createNumberFilterValue(values as number[])\n        : column.type === \"bigint\"\n          ? createBigIntFilterValue(values as bigint[])\n          : column.type === \"date\"\n            ? createDateFilterValue(\n                values as [Date, Date] | [Date] | [] | undefined,\n              )\n            : uniq(values);\n\n    if (newValues.length === 0) return filters;\n\n    if (!isColumnFiltered) {\n      return [\n        ...filters,\n        {\n          columnId: column.id,\n          type: column.type,\n          operator:\n            values.length > 1\n              ? DEFAULT_OPERATORS[column.type]!.multiple\n              : DEFAULT_OPERATORS[column.type]!.single,\n          values: newValues,\n        },\n      ];\n    }\n\n    const oldValues = filter.values;\n    const newOperator = determineNewOperator(\n      column.type,\n      oldValues,\n      newValues,\n      filter.operator,\n    );\n\n    const newFilter = {\n      columnId: column.id,\n      type: column.type,\n      operator: newOperator,\n      values: newValues as any,\n    } satisfies FilterModel<TType>;\n\n    return filters.map((f) => (f.columnId === column.id ? newFilter : f));\n  },\n\n  setFilterOperator<TType extends ColumnDataType>(\n    filters: FiltersState,\n    columnId: string,\n    operator: FilterModel<TType>[\"operator\"],\n  ): FiltersState {\n    return filters.map((f) =>\n      f.columnId === columnId ? { ...f, operator } : f,\n    );\n  },\n\n  removeFilter(filters: FiltersState, columnId: string): FiltersState {\n    return filters.filter((f) => f.columnId !== columnId);\n  },\n\n  removeAllFilters(): FiltersState {\n    return [];\n  },\n};\n",
    "/filter-package/core/operators.ts": "import type {\n  ColumnDataType,\n  FilterDetails,\n  FilterOperators,\n  FilterOperatorTarget,\n  FilterTypeOperatorDetails,\n  FilterValues,\n} from \"./types\";\n\nexport const DEFAULT_OPERATORS: Record<\n  ColumnDataType,\n  Record<FilterOperatorTarget, FilterOperators[ColumnDataType]>\n> = {\n  text: {\n    single: \"contains\",\n    multiple: \"contains\",\n  },\n  number: {\n    single: \"is\",\n    multiple: \"is between\",\n  },\n  bigint: {\n    single: \"is\",\n    multiple: \"is between\",\n  },\n  date: {\n    single: \"is\",\n    multiple: \"is between\",\n  },\n  boolean: {\n    single: \"is\",\n    multiple: \"is\",\n  },\n  option: {\n    single: \"is\",\n    multiple: \"is any of\",\n  },\n  multiOption: {\n    single: \"include\",\n    multiple: \"include any of\",\n  },\n};\n\n/* Details for all the filter operators for option data type */\nexport const optionFilterOperators = {\n  is: {\n    key: \"is\",\n    value: \"is\",\n    target: \"single\",\n    singularOf: \"is any of\",\n    relativeOf: \"is not\",\n    isNegated: false,\n    negation: \"is not\",\n  },\n  \"is not\": {\n    key: \"is not\",\n    value: \"is not\",\n    target: \"single\",\n    singularOf: \"is none of\",\n    relativeOf: \"is\",\n    isNegated: true,\n    negationOf: \"is\",\n  },\n  \"is any of\": {\n    key: \"is any of\",\n    value: \"is any of\",\n    target: \"multiple\",\n    pluralOf: \"is\",\n    relativeOf: \"is none of\",\n    isNegated: false,\n    negation: \"is none of\",\n  },\n  \"is none of\": {\n    key: \"is none of\",\n    value: \"is none of\",\n    target: \"multiple\",\n    pluralOf: \"is not\",\n    relativeOf: \"is any of\",\n    isNegated: true,\n    negationOf: \"is any of\",\n  },\n} as const satisfies FilterDetails<\"option\">;\n\n/* Details for all the filter operators for multi-option data type */\nexport const multiOptionFilterOperators = {\n  include: {\n    key: \"includes\",\n    value: \"include\",\n    target: \"single\",\n    singularOf: \"include any of\",\n    relativeOf: \"exclude\",\n    isNegated: false,\n    negation: \"exclude\",\n  },\n  exclude: {\n    key: \"excludes\",\n    value: \"exclude\",\n    target: \"single\",\n    singularOf: \"exclude if any of\",\n    relativeOf: \"include\",\n    isNegated: true,\n    negationOf: \"include\",\n  },\n  \"include any of\": {\n    key: \"includes any of\",\n    value: \"include any of\",\n    target: \"multiple\",\n    pluralOf: \"include\",\n    relativeOf: [\"exclude if all\", \"include all of\", \"exclude if any of\"],\n    isNegated: false,\n    negation: \"exclude if all\",\n  },\n  \"exclude if all\": {\n    key: \"excludes all of\",\n    value: \"exclude if all\",\n    target: \"multiple\",\n    pluralOf: \"exclude\",\n    relativeOf: [\"include any of\", \"include all of\", \"exclude if any of\"],\n    isNegated: true,\n    negationOf: \"include any of\",\n  },\n  \"include all of\": {\n    key: \"includes all of\",\n    value: \"include all of\",\n    target: \"multiple\",\n    pluralOf: \"include\",\n    relativeOf: [\"include any of\", \"exclude if all\", \"exclude if any of\"],\n    isNegated: false,\n    negation: \"exclude if any of\",\n  },\n  \"exclude if any of\": {\n    key: \"excludes if any of\",\n    value: \"exclude if any of\",\n    target: \"multiple\",\n    pluralOf: \"exclude\",\n    relativeOf: [\"include any of\", \"exclude if all\", \"include all of\"],\n    isNegated: true,\n    negationOf: \"include all of\",\n  },\n} as const satisfies FilterDetails<\"multiOption\">;\n\n/* Details for all the filter operators for date data type */\nexport const dateFilterOperators = {\n  is: {\n    key: \"is\",\n    value: \"is\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: \"is after\",\n    isNegated: false,\n    negation: \"is before\",\n  },\n  \"is not\": {\n    key: \"is not\",\n    value: \"is not\",\n    target: \"single\",\n    singularOf: \"is not between\",\n    relativeOf: [\n      \"is\",\n      \"is before\",\n      \"is on or after\",\n      \"is after\",\n      \"is on or before\",\n    ],\n    isNegated: true,\n    negationOf: \"is\",\n  },\n  \"is before\": {\n    key: \"is before\",\n    value: \"is before\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is\",\n      \"is not\",\n      \"is on or after\",\n      \"is after\",\n      \"is on or before\",\n    ],\n    isNegated: false,\n    negation: \"is on or after\",\n  },\n  \"is on or after\": {\n    key: \"is on or after\",\n    value: \"is on or after\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\"is\", \"is not\", \"is before\", \"is after\", \"is on or before\"],\n    isNegated: false,\n    negation: \"is before\",\n  },\n  \"is after\": {\n    key: \"is after\",\n    value: \"is after\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is\",\n      \"is not\",\n      \"is before\",\n      \"is on or after\",\n      \"is on or before\",\n    ],\n    isNegated: false,\n    negation: \"is on or before\",\n  },\n  \"is on or before\": {\n    key: \"is on or before\",\n    value: \"is on or before\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\"is\", \"is not\", \"is after\", \"is on or after\", \"is before\"],\n    isNegated: false,\n    negation: \"is after\",\n  },\n  \"is between\": {\n    key: \"is between\",\n    value: \"is between\",\n    target: \"multiple\",\n    pluralOf: \"is\",\n    relativeOf: \"is not between\",\n    isNegated: false,\n    negation: \"is not between\",\n  },\n  \"is not between\": {\n    key: \"is not between\",\n    value: \"is not between\",\n    target: \"multiple\",\n    pluralOf: \"is not\",\n    relativeOf: \"is between\",\n    isNegated: true,\n    negationOf: \"is between\",\n  },\n} as const satisfies FilterDetails<\"date\">;\n\n/* Details for all the filter operators for text data type */\nexport const textFilterOperators = {\n  contains: {\n    key: \"contains\",\n    value: \"contains\",\n    target: \"single\",\n    relativeOf: \"does not contain\",\n    isNegated: false,\n    negation: \"does not contain\",\n  },\n  \"does not contain\": {\n    key: \"does not contain\",\n    value: \"does not contain\",\n    target: \"single\",\n    relativeOf: \"contains\",\n    isNegated: true,\n    negationOf: \"contains\",\n  },\n} as const satisfies FilterDetails<\"text\">;\n\n/* Details for all the filter operators for number data type */\nexport const numberFilterOperators = {\n  is: {\n    key: \"is\",\n    value: \"is\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is not\",\n      \"is greater than\",\n      \"is less than or equal to\",\n      \"is less than\",\n      \"is greater than or equal to\",\n    ],\n    isNegated: false,\n    negation: \"is not\",\n  },\n  \"is not\": {\n    key: \"is not\",\n    value: \"is not\",\n    target: \"single\",\n    singularOf: \"is not between\",\n    relativeOf: [\n      \"is\",\n      \"is greater than\",\n      \"is less than or equal to\",\n      \"is less than\",\n      \"is greater than or equal to\",\n    ],\n    isNegated: true,\n    negationOf: \"is\",\n  },\n  \"is greater than\": {\n    key: \"greater than\",\n    value: \"is greater than\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is\",\n      \"is not\",\n      \"is less than or equal to\",\n      \"is less than\",\n      \"is greater than or equal to\",\n    ],\n    isNegated: false,\n    negation: \"is less than or equal to\",\n  },\n  \"is greater than or equal to\": {\n    key: \"greater than or equal\",\n    value: \"is greater than or equal to\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is\",\n      \"is not\",\n      \"is greater than\",\n      \"is less than or equal to\",\n      \"is less than\",\n    ],\n    isNegated: false,\n    negation: \"is less than or equal to\",\n  },\n  \"is less than\": {\n    key: \"less than\",\n    value: \"is less than\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is\",\n      \"is not\",\n      \"is greater than\",\n      \"is less than or equal to\",\n      \"is greater than or equal to\",\n    ],\n    isNegated: false,\n    negation: \"is greater than\",\n  },\n  \"is less than or equal to\": {\n    key: \"less than or equal\",\n    value: \"is less than or equal to\",\n    target: \"single\",\n    singularOf: \"is between\",\n    relativeOf: [\n      \"is\",\n      \"is not\",\n      \"is greater than\",\n      \"is less than\",\n      \"is greater than or equal to\",\n    ],\n    isNegated: false,\n    negation: \"is greater than or equal to\",\n  },\n  \"is between\": {\n    key: \"is between\",\n    value: \"is between\",\n    target: \"multiple\",\n    pluralOf: \"is\",\n    relativeOf: \"is not between\",\n    isNegated: false,\n    negation: \"is not between\",\n  },\n  \"is not between\": {\n    key: \"is not between\",\n    value: \"is not between\",\n    target: \"multiple\",\n    pluralOf: \"is not\",\n    relativeOf: \"is between\",\n    isNegated: true,\n    negationOf: \"is between\",\n  },\n} as const satisfies FilterDetails<\"number\">;\n\nexport const bigIntFilterOperators =\n  numberFilterOperators satisfies FilterDetails<\"bigint\">;\n\nexport const booleanFilterOperators = {\n  is: {\n    key: \"is\",\n    value: \"is\",\n    target: \"single\",\n    singularOf: \"is not\",\n    relativeOf: \"is not\",\n    isNegated: false,\n    negation: \"is not\",\n  },\n  \"is not\": {\n    key: \"is not\",\n    value: \"is not\",\n    target: \"single\",\n    singularOf: \"is\",\n    relativeOf: \"is\",\n    isNegated: true,\n    negationOf: \"is\",\n  },\n} as const satisfies FilterDetails<\"boolean\">;\n\nexport const filterTypeOperatorDetails: FilterTypeOperatorDetails = {\n  text: textFilterOperators,\n  number: numberFilterOperators,\n  bigint: bigIntFilterOperators,\n  date: dateFilterOperators,\n  boolean: booleanFilterOperators,\n  option: optionFilterOperators,\n  multiOption: multiOptionFilterOperators,\n};\n\n/*\n *\n * Determines the new operator for a filter based on the current operator, old and new filter values.\n *\n * This handles cases where the filter values have transitioned from a single value to multiple values (or vice versa),\n * and the current operator needs to be transitioned to its plural form (or singular form).\n *\n * For example, if the current operator is 'is', and the new filter values have a length of 2, the\n * new operator would be 'is any of'.\n *\n */\nexport function determineNewOperator<TType extends ColumnDataType>(\n  type: TType,\n  oldVals: FilterValues<TType>,\n  nextVals: FilterValues<TType>,\n  currentOperator: FilterOperators[TType],\n): FilterOperators[TType] {\n  const a =\n    Array.isArray(oldVals) && Array.isArray(oldVals[0])\n      ? oldVals[0].length\n      : oldVals.length;\n  const b =\n    Array.isArray(nextVals) && Array.isArray(nextVals[0])\n      ? nextVals[0].length\n      : nextVals.length;\n\n  // If filter size has not transitioned from single to multiple (or vice versa)\n  // or is unchanged, return the current operator.\n  if (a === b || (a >= 2 && b >= 2) || (a <= 1 && b <= 1))\n    return currentOperator;\n\n  const opDetails = filterTypeOperatorDetails[type][currentOperator];\n\n  // Handle transition from single to multiple filter values.\n  if (a < b && b >= 2) return opDetails.singularOf ?? currentOperator;\n  // Handle transition from multiple to single filter values.\n  if (a > b && b <= 1) return opDetails.pluralOf ?? currentOperator;\n  return currentOperator;\n}\n",
    "/filter-package/core/types.ts": "import type { orderFns } from \"../lib/order-fns\";\n\n/*\n * # GENERAL NOTES:\n *\n * ## GENERICS:\n *\n * TData is the shape of a single row in your data table.\n * TVal is the shape of the underlying value for a column.\n * TType is the type (kind) of the column.\n *\n */\n\nexport type ElementType<T> = T extends (infer U)[] ? U : T;\n\nexport type Nullable<T> = T | null | undefined;\n\nexport type FiltersStateUpdaterFn<TContext> = (\n  prev: FiltersState,\n  next: FiltersState,\n  context?: TContext,\n) => void;\n\n/**\n * Interface for column metadata that can be extended via declaration merging.\n * Users can augment this interface to add custom metadata properties.\n *\n * @example\n * ```typescript\n * declare module '@bazzaui/filters' {\n *   interface ColumnMeta {\n *     tooltip?: string\n *     category?: string\n *     sortable?: boolean\n *   }\n * }\n * ```\n */\n// biome-ignore lint/suspicious/noEmptyInterface: consumers can override this\nexport interface ColumnMeta {}\n\n/*\n * The model of a column option.\n * Used for representing underlying column values of type `option` or `multiOption`.\n */\nexport interface ColumnOption {\n  /* The label to display for the option. */\n  label: string;\n  /* The internal value of the option. */\n  value: string;\n  /* An optional icon to display next to the label. */\n  icon?: React.ReactElement | React.ElementType;\n  /* The count of this option in the data (automatically populated from faceted data). */\n  count?: number;\n}\n\nexport interface ColumnOptionExtended extends ColumnOption {\n  selected?: boolean;\n  count?: number;\n}\n\nexport type NumericValue = number | bigint;\n\n/*\n * Represents the data type (kind) of a column.\n */\nexport type ColumnDataType =\n  /* The column value is a string that should be searchable. */\n  | \"text\"\n  | \"number\"\n  | \"bigint\"\n  | \"date\"\n  | \"boolean\"\n  /* The column value can be a single value from a list of options. */\n  | \"option\"\n  /* The column value can be zero or more values from a list of options. */\n  | \"multiOption\";\n\n/*\n * Represents the data type (kind) of option and multi-option columns.\n */\nexport type OptionBasedColumnDataType = Extract<\n  ColumnDataType,\n  \"option\" | \"multiOption\"\n>;\n\n/*\n * Maps a ColumnDataType to it's primitive type (i.e. string, number, etc.).\n */\nexport type ColumnDataNativeMap = {\n  text: string;\n  number: number;\n  bigint: bigint;\n  date: Date;\n  boolean: boolean;\n  option: string;\n  multiOption: string[];\n};\n\n/*\n * Represents the value of a column filter.\n * Contigent on the filtered column's data type.\n */\nexport type FilterValues<T extends ColumnDataType> = Array<\n  ElementType<ColumnDataNativeMap[T]>\n>;\n\n/*\n * An accessor function for a column's data.\n * Uses the original row data as an argument.\n */\nexport type TAccessorFn<TData, TVal = unknown> = (data: TData) => TVal;\n\n/*\n * Used by `option` and `multiOption` columns.\n * Transforms the underlying column value into a valid ColumnOption.\n */\nexport type TTransformValueToOptionFn<TVal = unknown> = (\n  value: ElementType<NonNullable<TVal>>,\n) => ColumnOption;\n\nexport type TOrderFns = Array<TOrderFn>;\n\nexport type TOrderFn = TCustomOrderFn;\n\nexport type TCustomOrderFn = (a: ColumnOption, b: ColumnOption) => number;\n\nexport type TBuiltInOrderFn = (\n  a: ColumnOption,\n  b: ColumnOption,\n  direction: OrderDirection,\n) => number;\n\nexport type TOrderFnArg =\n  | [TBuiltInOrderFnName, OrderDirection]\n  | TCustomOrderFn;\n\n/*\n * Used by `option` and `multiOption` columns.\n * The direction of ordering for built-in ordering functions.\n */\nexport type OrderDirection = \"asc\" | \"desc\";\n\nexport type TBuiltInOrderFnName = keyof typeof orderFns;\n\n/*\n * Used by `option` and `multiOption` columns.\n * Transforms the computed column options after initial computation, with access to faceted data.\n * Applied AFTER transformValueToOptionFn.\n */\nexport type TTransformOptionsFn = (options: ColumnOption[]) => ColumnOption[];\n\n/*\n * The configuration for a column.\n */\nexport type ColumnConfig<\n  TData,\n  TType extends ColumnDataType = any,\n  TVal = unknown,\n  TId extends string = string,\n> = {\n  id: TId;\n  accessor: TAccessorFn<TData, TVal>;\n  displayName: string;\n  icon?: React.ReactElement | React.ElementType;\n  type: TType;\n  hidden?: boolean;\n  options?: TType extends OptionBasedColumnDataType ? ColumnOption[] : never;\n  facetedOptions?: TType extends OptionBasedColumnDataType\n    ? Map<string, number>\n    : never;\n  min?: TType extends \"number\"\n    ? number\n    : TType extends \"bigint\"\n      ? bigint\n      : never;\n  max?: TType extends \"number\"\n    ? number\n    : TType extends \"bigint\"\n      ? bigint\n      : never;\n  transformValueToOptionFn?: TType extends OptionBasedColumnDataType\n    ? TTransformValueToOptionFn<TVal>\n    : never;\n  orderFn?: TType extends OptionBasedColumnDataType ? TOrderFns : never;\n  transformOptionsFn?: TType extends OptionBasedColumnDataType\n    ? TTransformOptionsFn\n    : never;\n  toggledStateName?: TType extends \"boolean\" ? string : never;\n  meta?: ColumnMeta;\n};\n\nexport type OptionColumnId<T> =\n  T extends ColumnConfig<\n    infer TData,\n    \"option\" | \"multiOption\",\n    infer TVal,\n    infer TId\n  >\n    ? TId\n    : never;\n\nexport type OptionColumnIds<\n  T extends ReadonlyArray<ColumnConfig<any, any, any, any>>,\n> = {\n  [K in keyof T]: OptionColumnId<T[K]>;\n}[number];\n\nexport type NumberColumnId<T> =\n  T extends ColumnConfig<infer TData, \"number\", infer TVal, infer TId>\n    ? TId\n    : never;\n\nexport type NumberColumnIds<\n  T extends ReadonlyArray<ColumnConfig<any, any, any, any>>,\n> = {\n  [K in keyof T]: NumberColumnId<T[K]>;\n}[number];\n\n/*\n * Describes a helper function for creating column configurations.\n */\nexport type ColumnConfigHelper<TData> = {\n  accessor: <\n    TAccessor extends TAccessorFn<TData>,\n    TType extends ColumnDataType,\n    TVal extends ReturnType<TAccessor>,\n  >(\n    accessor: TAccessor,\n    config?: Omit<ColumnConfig<TData, TType, TVal>, \"accessor\">,\n  ) => ColumnConfig<TData, TType, unknown>;\n};\n\nexport type DataTableFilterConfig<TData> = {\n  data: TData[];\n  columns: ColumnConfig<TData>[];\n};\n\nexport type MinMaxReturn<T extends ColumnDataType> = T extends \"number\"\n  ? [number, number] | undefined\n  : T extends \"bigint\"\n    ? [bigint, bigint] | undefined\n    : undefined;\n\nexport type ColumnProperties<TData, TType extends ColumnDataType, TVal> = {\n  getOptions: () => ColumnOption[];\n  getValues: () => ElementType<NonNullable<TVal>>[];\n  getFacetedUniqueValues: () => Map<string, number> | undefined;\n  getFacetedMinMaxValues: () => MinMaxReturn<TType>;\n  prefetchOptions: () => Promise<void>; // Prefetch options\n  prefetchValues: () => Promise<void>; // Prefetch values\n  prefetchFacetedUniqueValues: () => Promise<void>; // Prefetch faceted unique values\n  prefetchFacetedMinMaxValues: () => Promise<void>; // Prefetch faceted min/max values\n};\n\nexport type ColumnPrivateProperties<TData, TVal> = {\n  _prefetchedOptionsCache: ColumnOption[] | null;\n  _prefetchedValuesCache: ElementType<NonNullable<TVal>>[] | null;\n  _prefetchedFacetedUniqueValuesCache: Map<string, number> | null;\n  _prefetchedFacetedMinMaxValuesCache: [number, number] | null;\n};\n\nexport type Column<\n  TData,\n  TType extends ColumnDataType = any,\n  TVal = unknown,\n> = ColumnConfig<TData, TType, TVal> &\n  ColumnProperties<TData, TType, TVal> &\n  ColumnPrivateProperties<TData, TVal>;\n\nexport interface DataTableFilterActions<TContext = any> {\n  addFilterValue: <TData, TType extends OptionBasedColumnDataType>(\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n    context?: TContext,\n  ) => void;\n\n  removeFilterValue: <TData, TType extends OptionBasedColumnDataType>(\n    column: Column<TData, TType>,\n    value: FilterModel<TType>[\"values\"],\n    context?: TContext,\n  ) => void;\n\n  setFilterValue: <TData, TType extends ColumnDataType>(\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n    context?: TContext,\n  ) => void;\n\n  setFilterOperator: <TType extends ColumnDataType>(\n    columnId: string,\n    operator: FilterModel<TType>[\"operator\"],\n    context?: TContext,\n  ) => void;\n\n  removeFilter: (columnId: string, context?: TContext) => void;\n\n  removeAllFilters: (context?: TContext) => void;\n\n  batch: (\n    callback: (batchActions: DataTableFilterBatchActions) => void,\n    context?: TContext,\n  ) => void;\n}\n\nexport interface FilterOperations {\n  addFilterValue: <TData, TType extends OptionBasedColumnDataType>(\n    filters: FiltersState,\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n  ) => FiltersState;\n\n  removeFilterValue: <TData, TType extends OptionBasedColumnDataType>(\n    filters: FiltersState,\n    column: Column<TData, TType>,\n    value: FilterModel<TType>[\"values\"],\n  ) => FiltersState;\n\n  setFilterValue: <TData, TType extends ColumnDataType>(\n    filters: FiltersState,\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n  ) => FiltersState;\n\n  setFilterOperator: <TType extends ColumnDataType>(\n    filters: FiltersState,\n    columnId: string,\n    operator: FilterModel<TType>[\"operator\"],\n  ) => FiltersState;\n\n  removeFilter: (filters: FiltersState, columnId: string) => FiltersState;\n\n  removeAllFilters: (filters: FiltersState) => FiltersState;\n}\n\nexport interface DataTableFilterBatchActions extends BatchFilterOperations {}\n\nexport interface BatchFilterOperations {\n  addFilterValue: <TData, TType extends OptionBasedColumnDataType>(\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n  ) => void;\n\n  removeFilterValue: <TData, TType extends OptionBasedColumnDataType>(\n    column: Column<TData, TType>,\n    value: FilterModel<TType>[\"values\"],\n  ) => void;\n\n  setFilterValue: <TData, TType extends ColumnDataType>(\n    column: Column<TData, TType>,\n    values: FilterModel<TType>[\"values\"],\n  ) => void;\n\n  setFilterOperator: <TType extends ColumnDataType>(\n    columnId: string,\n    operator: FilterModel<TType>[\"operator\"],\n  ) => void;\n\n  removeFilter: (columnId: string) => void;\n\n  removeAllFilters: () => void;\n}\n\nexport type FilterStrategy = \"client\" | \"server\";\n\n/* Operators for text data */\nexport type TextFilterOperator = \"contains\" | \"does not contain\";\n\n/* Operators for number data */\nexport type NumberFilterOperator =\n  | \"is\"\n  | \"is not\"\n  | \"is less than\"\n  | \"is greater than or equal to\"\n  | \"is greater than\"\n  | \"is less than or equal to\"\n  | \"is between\"\n  | \"is not between\";\n\nexport type BigIntFilterOperator = NumberFilterOperator;\n\n/* Operators for date data */\nexport type DateFilterOperator =\n  | \"is\"\n  | \"is not\"\n  | \"is before\"\n  | \"is on or after\"\n  | \"is after\"\n  | \"is on or before\"\n  | \"is between\"\n  | \"is not between\";\n\n/* Operators for boolean data */\nexport type BooleanFilterOperator = \"is\" | \"is not\";\n\n/* Operators for option data */\nexport type OptionFilterOperator = \"is\" | \"is not\" | \"is any of\" | \"is none of\";\n\n/* Operators for multi-option data */\nexport type MultiOptionFilterOperator =\n  | \"include\"\n  | \"exclude\"\n  | \"include any of\"\n  | \"include all of\"\n  | \"exclude if any of\"\n  | \"exclude if all\";\n\n/* Maps filter operators to their respective data types */\nexport type FilterOperators = {\n  text: TextFilterOperator;\n  number: NumberFilterOperator;\n  bigint: BigIntFilterOperator;\n  date: DateFilterOperator;\n  boolean: BooleanFilterOperator;\n  option: OptionFilterOperator;\n  multiOption: MultiOptionFilterOperator;\n};\n\n/*\n *\n * FilterValue is a type that represents a filter value for a specific column.\n *\n * It consists of:\n * - Operator: The operator to be used for the filter.\n * - Values: An array of values to be used for the filter.\n *\n */\nexport type FilterModel<TType extends ColumnDataType = any> = {\n  columnId: string;\n  type: TType;\n  operator: FilterOperators[TType];\n  values: FilterValues<TType>;\n};\n\nexport type FiltersState = Array<FilterModel>;\n\n/*\n * FilterDetails is a type that represents the details of all the filter operators for a specific column data type.\n */\nexport type FilterDetails<T extends ColumnDataType> = {\n  [key in FilterOperators[T]]: FilterOperatorDetails<key, T>;\n};\n\nexport type FilterOperatorTarget = \"single\" | \"multiple\";\n\nexport type FilterOperatorDetailsBase<\n  OperatorValue,\n  T extends ColumnDataType,\n> = {\n  /* The display text for the operator. */\n  key: string;\n  /* The operator value. Usually the string representation of the operator. */\n  value: OperatorValue;\n  /* How much data the operator applies to. */\n  target: FilterOperatorTarget;\n  /* The plural form of the operator, if applicable. */\n  singularOf?: FilterOperators[T];\n  /* The singular form of the operator, if applicable. */\n  pluralOf?: FilterOperators[T];\n  /* All related operators. Normally, all the operators which share the same target. */\n  relativeOf: FilterOperators[T] | Array<FilterOperators[T]>;\n  /* Whether the operator is negated. */\n  isNegated: boolean;\n  /* If the operator is not negated, this provides the negated equivalent. */\n  negation?: FilterOperators[T];\n  /* If the operator is negated, this provides the positive equivalent. */\n  negationOf?: FilterOperators[T];\n};\n\n/*\n *\n * FilterOperatorDetails is a type that provides details about a filter operator for a specific column data type.\n * It extends FilterOperatorDetailsBase with additional logic and contraints on the defined properties.\n *\n */\nexport type FilterOperatorDetails<\n  OperatorValue,\n  T extends ColumnDataType,\n> = FilterOperatorDetailsBase<OperatorValue, T> &\n  (\n    | { singularOf?: never; pluralOf?: never }\n    | { target: \"single\"; singularOf: FilterOperators[T]; pluralOf?: never }\n    | { target: \"multiple\"; singularOf?: never; pluralOf: FilterOperators[T] }\n  ) &\n  (\n    | { isNegated: false; negation: FilterOperators[T]; negationOf?: never }\n    | { isNegated: true; negation?: never; negationOf: FilterOperators[T] }\n  );\n\n/* Maps column data types to their respective filter operator details */\nexport type FilterTypeOperatorDetails = {\n  [key in ColumnDataType]: FilterDetails<key>;\n};\n\nexport interface DataTableFiltersOptions<\n  TData,\n  TColumns extends ReadonlyArray<ColumnConfig<TData, any, any, any>>,\n  TStrategy extends FilterStrategy,\n  TContext = any,\n> {\n  strategy: TStrategy;\n  data: TData[];\n  columnsConfig: TColumns;\n  defaultFilters?: FiltersState;\n  filters?: FiltersState;\n  onFiltersChange?:\n    | React.Dispatch<React.SetStateAction<FiltersState>>\n    | FiltersStateUpdaterFn<TContext>;\n  options?: Partial<\n    Record<OptionColumnIds<TColumns>, ColumnOption[] | undefined>\n  >;\n  faceted?: Partial<\n    | Record<OptionColumnIds<TColumns>, Map<string, number> | undefined>\n    | Record<NumberColumnIds<TColumns>, [number, number] | undefined>\n  >;\n  entityName?: string;\n}\n\nexport interface DataTableFiltersInstance<\n  TData,\n  TStrategy extends FilterStrategy,\n  TContext,\n> {\n  columns: Column<TData>[];\n  filters: FiltersState;\n  actions: DataTableFilterActions<TContext>;\n  strategy: TStrategy;\n  entityName?: string;\n}\n",
    "/filter-package/hooks/use-data-table-filters.ts": "\"use client\";\n\nimport type React from \"react\";\nimport { useCallback, useMemo, useState } from \"react\";\n\nimport type {\n  BatchFilterOperations,\n  Column,\n  ColumnConfig,\n  ColumnDataType,\n  DataTableFilterActions,\n  DataTableFilterBatchActions,\n  DataTableFiltersInstance,\n  DataTableFiltersOptions,\n  FilterModel,\n  FiltersState,\n  FilterStrategy,\n  NumberColumnIds,\n  OptionBasedColumnDataType,\n  OptionColumnIds,\n} from \"../core/types\";\nimport { createColumns } from \"../core/columns/index\";\nimport { filterOperations } from \"../core/filters\";\nimport {\n  isColumnOptionArray,\n  isColumnOptionMap,\n  isMinMaxTuple,\n} from \"../lib/helpers\";\n\nexport function useDataTableFilters<\n  TData,\n  TColumns extends ReadonlyArray<ColumnConfig<TData, any, any, any>>,\n  TStrategy extends FilterStrategy,\n  TContext,\n>({\n  strategy,\n  data,\n  columnsConfig,\n  defaultFilters,\n  filters: externalFilters,\n  onFiltersChange,\n  options,\n  faceted,\n  entityName,\n}: DataTableFiltersOptions<\n  TData,\n  TColumns,\n  TStrategy,\n  TContext\n>): DataTableFiltersInstance<TData, TStrategy, TContext> {\n  const [internalFilters, setInternalFilters] = useState<FiltersState>(\n    defaultFilters ?? [],\n  );\n\n  if (\n    (externalFilters && !onFiltersChange) ||\n    (!externalFilters && onFiltersChange)\n  ) {\n    throw new Error(\n      \"If using controlled state, you must specify both filters and onFiltersChange.\",\n    );\n  }\n\n  const isControlled =\n    externalFilters !== undefined && onFiltersChange !== undefined;\n\n  const filters = isControlled ? externalFilters : internalFilters;\n\n  const setFilters = useCallback(\n    (\n      nextFilters: FiltersState | ((prev: FiltersState) => FiltersState),\n      context?: TContext,\n    ) => {\n      // Handle change for controlled mode\n      if (isControlled) {\n        // For controlled mode, we need to resolve the function and call the handler\n        const prevFilters = filters;\n        const resolvedNextFilters =\n          typeof nextFilters === \"function\"\n            ? nextFilters(prevFilters) // If function: call it with prev to get next\n            : nextFilters; // If value: use it directly\n\n        // Detect handler type by function length and call appropriately\n        if (onFiltersChange.length <= 1) {\n          // React Dispatch style\n          const dispatchHandler = onFiltersChange as React.Dispatch<\n            React.SetStateAction<FiltersState>\n          >;\n          dispatchHandler(resolvedNextFilters);\n        } else {\n          // Custom handler style - pass prev, next, and context\n          const customHandler = onFiltersChange as (\n            prev: FiltersState,\n            next: FiltersState,\n            context?: TContext,\n          ) => void;\n\n          customHandler(prevFilters, resolvedNextFilters, context);\n        }\n      } else if (!isControlled) {\n        // Uncontrolled mode: let React handle the function resolution\n        setInternalFilters(nextFilters);\n      }\n    },\n    [filters, isControlled, onFiltersChange],\n  );\n\n  // Convert ColumnConfig to Column, applying options and faceted options if provided\n  const columns = useMemo(() => {\n    const enhancedConfigs = columnsConfig.map((config) => {\n      let final = config;\n\n      // Set options, if exists\n      if (\n        options &&\n        (config.type === \"option\" || config.type === \"multiOption\")\n      ) {\n        const optionsInput = options[config.id as OptionColumnIds<TColumns>];\n        if (!optionsInput || !isColumnOptionArray(optionsInput)) return config;\n\n        final = { ...final, options: optionsInput };\n      }\n\n      // Set faceted options, if exists\n      if (\n        faceted &&\n        (config.type === \"option\" || config.type === \"multiOption\")\n      ) {\n        const facetedOptionsInput =\n          faceted[config.id as OptionColumnIds<TColumns>];\n        if (!facetedOptionsInput || !isColumnOptionMap(facetedOptionsInput))\n          return config;\n\n        final = { ...final, facetedOptions: facetedOptionsInput };\n      }\n\n      // Set faceted min/max values, if exists\n      if (config.type === \"number\" && faceted) {\n        const minMaxTuple = faceted[config.id as NumberColumnIds<TColumns>];\n        if (!minMaxTuple || !isMinMaxTuple(minMaxTuple)) return config;\n\n        final = {\n          ...final,\n          min: minMaxTuple[0],\n          max: minMaxTuple[1],\n        };\n      }\n\n      return final;\n    });\n\n    return createColumns(data, enhancedConfigs, strategy);\n  }, [data, columnsConfig, options, faceted, strategy]);\n\n  const actions: DataTableFilterActions<TContext> = useMemo(\n    () => ({\n      addFilterValue<TData, TType extends OptionBasedColumnDataType>(\n        column: Column<TData, TType>,\n        values: FilterModel<TType>[\"values\"],\n        context?: TContext,\n      ) {\n        setFilters(\n          (prev) => filterOperations.addFilterValue(prev, column, values),\n          context,\n        );\n      },\n\n      removeFilterValue<TData, TType extends OptionBasedColumnDataType>(\n        column: Column<TData, TType>,\n        value: FilterModel<TType>[\"values\"],\n        context?: TContext,\n      ) {\n        setFilters(\n          (prev) => filterOperations.removeFilterValue(prev, column, value),\n          context,\n        );\n      },\n\n      setFilterValue<TData, TType extends ColumnDataType>(\n        column: Column<TData, TType>,\n        values: FilterModel<TType>[\"values\"],\n        context?: TContext,\n      ) {\n        setFilters(\n          (prev) => filterOperations.setFilterValue(prev, column, values),\n          context,\n        );\n      },\n\n      setFilterOperator<TType extends ColumnDataType>(\n        columnId: string,\n        operator: FilterModel<TType>[\"operator\"],\n        context?: TContext,\n      ) {\n        setFilters(\n          (prev) =>\n            filterOperations.setFilterOperator(prev, columnId, operator),\n          context,\n        );\n      },\n\n      removeFilter(columnId: string, context?: TContext) {\n        setFilters(\n          (prev) => filterOperations.removeFilter(prev, columnId),\n          context,\n        );\n      },\n\n      removeAllFilters(context?: TContext) {\n        setFilters((prev) => filterOperations.removeAllFilters(prev), context);\n      },\n\n      batch(\n        callback: (batchActions: DataTableFilterBatchActions) => void,\n        context?: TContext,\n      ) {\n        setFilters((prevFilters) => {\n          // Start with current state\n          let transactionFilters = prevFilters;\n\n          // Create batch actions that apply operations to transaction state\n          const batchActions: BatchFilterOperations = {\n            addFilterValue<TData, TType extends OptionBasedColumnDataType>(\n              column: Column<TData, TType>,\n              values: FilterModel<TType>[\"values\"],\n            ) {\n              transactionFilters = filterOperations.addFilterValue(\n                transactionFilters,\n                column,\n                values,\n              );\n            },\n\n            removeFilterValue<TData, TType extends OptionBasedColumnDataType>(\n              column: Column<TData, TType>,\n              value: FilterModel<TType>[\"values\"],\n            ) {\n              transactionFilters = filterOperations.removeFilterValue(\n                transactionFilters,\n                column,\n                value,\n              );\n            },\n\n            setFilterValue<TData, TType extends ColumnDataType>(\n              column: Column<TData, TType>,\n              values: FilterModel<TType>[\"values\"],\n            ) {\n              transactionFilters = filterOperations.setFilterValue(\n                transactionFilters,\n                column,\n                values,\n              );\n            },\n\n            setFilterOperator<TType extends ColumnDataType>(\n              columnId: string,\n              operator: FilterModel<TType>[\"operator\"],\n            ) {\n              transactionFilters = filterOperations.setFilterOperator(\n                transactionFilters,\n                columnId,\n                operator,\n              );\n            },\n\n            removeFilter(columnId: string) {\n              transactionFilters = filterOperations.removeFilter(\n                transactionFilters,\n                columnId,\n              );\n            },\n\n            removeAllFilters() {\n              transactionFilters =\n                filterOperations.removeAllFilters(transactionFilters);\n            },\n          };\n\n          // Execute the callback with batch actions\n          callback(batchActions);\n\n          // Return the final transaction state\n          return transactionFilters;\n        }, context);\n      },\n    }),\n    [setFilters],\n  );\n\n  return { columns, filters, actions, strategy, entityName }; // columns is Column<TData>[]\n}\n\nexport function createTypedDataTableFilters<TContext>() {\n  return function useTypedDataTableFilters<\n    TData,\n    TColumns extends ReadonlyArray<ColumnConfig<TData, any, any, any>>,\n    TStrategy extends FilterStrategy,\n  >(\n    options: DataTableFiltersOptions<TData, TColumns, TStrategy, TContext>,\n  ): DataTableFiltersInstance<TData, TStrategy, TContext> {\n    return useDataTableFilters<TData, TColumns, TStrategy, TContext>(options);\n  };\n}\n",
    "/filter-package/lib/filter-fns.ts": "import {\n  endOfDay,\n  isAfter,\n  isBefore,\n  isSameDay,\n  isWithinInterval,\n  startOfDay,\n} from \"date-fns\";\n\nimport type { FilterModel } from \"../core/types\";\nimport { dateFilterOperators } from \"../core/operators\";\nimport { intersection } from \"./array\";\nimport { getValidBigInt, getValidNumber, isValidNumber } from \"./helpers\";\n\nexport function optionFilterFn(\n  inputData: string,\n  filterValue: FilterModel<\"option\">,\n) {\n  if (!inputData) return false;\n  if (filterValue.values.length === 0) return true;\n\n  const value = inputData.toString().toLowerCase();\n\n  const found = !!filterValue.values.find((v) => v.toLowerCase() === value);\n\n  switch (filterValue.operator) {\n    case \"is\":\n    case \"is any of\":\n      return found;\n    case \"is not\":\n    case \"is none of\":\n      return !found;\n  }\n}\n\nexport function multiOptionFilterFn(\n  inputData: string[],\n  filterValue: FilterModel<\"multiOption\">,\n) {\n  if (!inputData) return false;\n\n  if (\n    filterValue.values.length === 0 ||\n    !filterValue.values[0] ||\n    filterValue.values[0].length === 0\n  )\n    return true;\n\n  const values = inputData;\n  const filterValues = filterValue.values;\n\n  switch (filterValue.operator) {\n    case \"include\":\n    case \"include any of\":\n      return intersection(values, filterValues).length > 0;\n    case \"exclude\":\n      return intersection(values, filterValues).length === 0;\n    case \"exclude if any of\":\n      return !(intersection(values, filterValues).length > 0);\n    case \"include all of\":\n      return intersection(values, filterValues).length === filterValues.length;\n    case \"exclude if all\":\n      return !(\n        intersection(values, filterValues).length === filterValues.length\n      );\n  }\n}\n\nexport function dateFilterFn(\n  inputData: Date,\n  filterValue: FilterModel<\"date\">,\n) {\n  if (!filterValue || filterValue.values.length === 0) return true;\n\n  if (\n    dateFilterOperators[filterValue.operator].target === \"single\" &&\n    filterValue.values.length > 1\n  )\n    throw new Error(\"Singular operators require at most one filter value\");\n\n  if (\n    filterValue.operator in [\"is between\", \"is not between\"] &&\n    filterValue.values.length !== 2\n  )\n    throw new Error(\"Plural operators require two filter values\");\n\n  const filterVals = filterValue.values;\n  const d1 = filterVals[0]!;\n  const d2 = filterVals[1]!;\n\n  const value = inputData;\n\n  switch (filterValue.operator) {\n    case \"is\":\n      return isSameDay(value, d1);\n    case \"is not\":\n      return !isSameDay(value, d1);\n    case \"is before\":\n      return isBefore(value, startOfDay(d1));\n    case \"is on or after\":\n      return isSameDay(value, d1) || isAfter(value, startOfDay(d1));\n    case \"is after\":\n      return isAfter(value, startOfDay(d1));\n    case \"is on or before\":\n      return isSameDay(value, d1) || isBefore(value, startOfDay(d1));\n    case \"is between\":\n      return isWithinInterval(value, {\n        start: startOfDay(d1),\n        end: endOfDay(d2),\n      });\n    case \"is not between\":\n      return !isWithinInterval(value, {\n        start: startOfDay(filterValue.values[0]!),\n        end: endOfDay(filterValue.values[1]!),\n      });\n  }\n}\n\nexport function textFilterFn(\n  inputData: string,\n  filterValue: FilterModel<\"text\">,\n) {\n  if (!filterValue || filterValue.values.length === 0) return true;\n\n  const value = inputData.toLowerCase().trim();\n  const filterStr = filterValue.values[0]!.toLowerCase().trim();\n\n  if (filterStr === \"\") return true;\n\n  const found = value.includes(filterStr);\n\n  switch (filterValue.operator) {\n    case \"contains\":\n      return found;\n    case \"does not contain\":\n      return !found;\n  }\n}\n\nexport function numberFilterFn(\n  inputData: number,\n  filterValue: FilterModel<\"number\">,\n): boolean {\n  // Early exit conditions\n  if (!filterValue || !filterValue.values || filterValue.values.length === 0) {\n    return true;\n  }\n\n  const value = inputData;\n  const filterVal = getValidNumber(filterValue.values[0]);\n\n  // If the primary filter value is invalid, no filtering applies\n  if (filterVal === undefined) {\n    return true;\n  }\n\n  // Input validation - if input data is not a valid number, handle appropriately\n  if (!isValidNumber(value)) {\n    // NaN input data never matches any filter (NaN !== NaN)\n    return false;\n  }\n\n  switch (filterValue.operator) {\n    case \"is\":\n      return value === filterVal;\n\n    case \"is not\":\n      return value !== filterVal;\n\n    case \"is greater than\":\n      // Handle Infinity edge cases\n      if (filterVal === Number.POSITIVE_INFINITY) return false; // Nothing is greater than Infinity\n      if (filterVal === Number.NEGATIVE_INFINITY) return true; // Everything is greater than -Infinity\n      return value > filterVal;\n\n    case \"is greater than or equal to\":\n      if (filterVal === Number.POSITIVE_INFINITY)\n        return value === Number.POSITIVE_INFINITY; // Only Infinity >= Infinity\n      if (filterVal === Number.NEGATIVE_INFINITY) return true; // Everything >= -Infinity\n      return value >= filterVal;\n\n    case \"is less than\":\n      if (filterVal === Number.NEGATIVE_INFINITY) return false; // Nothing is less than -Infinity\n      if (filterVal === Number.POSITIVE_INFINITY)\n        return value !== Number.POSITIVE_INFINITY; // Everything except Infinity < Infinity\n      return value < filterVal;\n\n    case \"is less than or equal to\":\n      if (filterVal === Number.NEGATIVE_INFINITY)\n        return value === Number.NEGATIVE_INFINITY; // Only -Infinity <= -Infinity\n      if (filterVal === Number.POSITIVE_INFINITY) return true; // Everything <= Infinity\n      return value <= filterVal;\n\n    case \"is between\": {\n      const lowerBound = getValidNumber(filterValue.values[0]);\n      const upperBound = getValidNumber(filterValue.values[1]);\n\n      // If either bound is invalid, no filtering applies\n      if (lowerBound === undefined || upperBound === undefined) {\n        return true;\n      }\n\n      // Handle the case where bounds might be reversed\n      const actualLower = Math.min(lowerBound, upperBound);\n      const actualUpper = Math.max(lowerBound, upperBound);\n\n      // Special handling for infinite bounds\n      if (\n        actualLower === Number.NEGATIVE_INFINITY &&\n        actualUpper === Number.POSITIVE_INFINITY\n      ) {\n        return true; // Everything is between - and +\n      }\n      if (\n        actualLower === Number.POSITIVE_INFINITY ||\n        actualUpper === Number.NEGATIVE_INFINITY\n      ) {\n        return false; // Invalid range\n      }\n\n      return value >= actualLower && value <= actualUpper;\n    }\n\n    case \"is not between\": {\n      const lowerBound = getValidNumber(filterValue.values[0]);\n      const upperBound = getValidNumber(filterValue.values[1]);\n\n      // If either bound is invalid, no filtering applies\n      if (lowerBound === undefined || upperBound === undefined) {\n        return true;\n      }\n\n      // Handle the case where bounds might be reversed\n      const actualLower = Math.min(lowerBound, upperBound);\n      const actualUpper = Math.max(lowerBound, upperBound);\n\n      // Special handling for infinite bounds\n      if (\n        actualLower === Number.NEGATIVE_INFINITY &&\n        actualUpper === Number.POSITIVE_INFINITY\n      ) {\n        return false; // Nothing is outside - to +\n      }\n      if (\n        actualLower === Number.POSITIVE_INFINITY ||\n        actualUpper === Number.NEGATIVE_INFINITY\n      ) {\n        return true; // Invalid range means everything is \"not between\"\n      }\n\n      return value < actualLower || value > actualUpper;\n    }\n\n    default:\n      return true;\n  }\n}\n\nexport function bigIntFilterFn(\n  inputData: bigint,\n  filterValue: FilterModel<\"bigint\">,\n): boolean {\n  // Early exit conditions\n  if (!filterValue || !filterValue.values || filterValue.values.length === 0) {\n    return true;\n  }\n\n  const value = inputData;\n  const filterVal = getValidBigInt(filterValue.values[0]);\n\n  if (filterVal === undefined) {\n    return true;\n  }\n\n  if (typeof value !== \"bigint\") {\n    return false;\n  }\n\n  switch (filterValue.operator) {\n    case \"is\":\n      return value === filterVal;\n\n    case \"is not\":\n      return value !== filterVal;\n\n    case \"is greater than\":\n      return value > filterVal;\n\n    case \"is greater than or equal to\":\n      return value >= filterVal;\n\n    case \"is less than\":\n      return value < filterVal;\n\n    case \"is less than or equal to\":\n      return value <= filterVal;\n\n    case \"is between\": {\n      const lowerBound = getValidBigInt(filterValue.values[0]);\n      const upperBound = getValidBigInt(filterValue.values[1]);\n\n      if (lowerBound === undefined || upperBound === undefined) {\n        return true;\n      }\n\n      const actualLower = lowerBound < upperBound ? lowerBound : upperBound;\n      const actualUpper = lowerBound < upperBound ? upperBound : lowerBound;\n\n      return value >= actualLower && value <= actualUpper;\n    }\n\n    case \"is not between\": {\n      const lowerBound = getValidBigInt(filterValue.values[0]);\n      const upperBound = getValidBigInt(filterValue.values[1]);\n\n      if (lowerBound === undefined || upperBound === undefined) {\n        return true;\n      }\n\n      const actualLower = lowerBound < upperBound ? lowerBound : upperBound;\n      const actualUpper = lowerBound < upperBound ? upperBound : lowerBound;\n\n      return value < actualLower || value > actualUpper;\n    }\n\n    default:\n      return true;\n  }\n}\n\nexport function booleanFilterFn(\n  inputData: boolean,\n  filterValue: FilterModel<\"boolean\">,\n) {\n  if (!filterValue || filterValue.values.length === 0) return true;\n\n  if (filterValue.values.some((v) => typeof v === \"undefined\"))\n    throw new Error(\"Cannot create boolean filter value from undefined values\");\n\n  const value = inputData;\n  const filterVal = filterValue.values[0] ?? false;\n\n  switch (filterValue.operator) {\n    case \"is\":\n      return value === filterVal;\n    case \"is not\":\n      return value !== filterVal;\n    default:\n      return true;\n  }\n}\n",
    "/filter-package/lib/array.ts": "import { getValidNumber } from \"./helpers\";\n\nexport function intersection<T>(a: T[], b: T[]): T[] {\n  return a.filter((x) => b.includes(x));\n}\n\n/**\n * Computes a stable hash string for any value using deep inspection.\n * This function recursively builds a string for primitives, arrays, and objects.\n * It uses a cache (WeakMap) to avoid rehashing the same object twice, which is\n * particularly beneficial if an object appears in multiple places.\n */\nfunction deepHash(value: any, cache = new WeakMap<object, string>()): string {\n  // Handle primitives and null/undefined.\n  if (value === null) return \"null\";\n  if (value === undefined) return \"undefined\";\n  const type = typeof value;\n  if (type === \"number\" || type === \"boolean\" || type === \"string\") {\n    return `${type}:${value.toString()}`;\n  }\n  if (type === \"function\") {\n    // Note: using toString for functions.\n    return `function:${value.toString()}`;\n  }\n\n  // For objects and arrays, use caching to avoid repeated work.\n  if (type === \"object\") {\n    // If weve seen this object before, return the cached hash.\n    if (cache.has(value)) {\n      return cache.get(value)!;\n    }\n    let hash: string;\n    if (Array.isArray(value)) {\n      // Compute hash for each element in order.\n      hash = `array:[${value.map((v) => deepHash(v, cache)).join(\",\")}]`;\n    } else {\n      // For objects, sort keys to ensure the representation is stable.\n      const keys = Object.keys(value).sort();\n      const props = keys\n        .map((k) => `${k}:${deepHash(value[k], cache)}`)\n        .join(\",\");\n      hash = `object:{${props}}`;\n    }\n    cache.set(value, hash);\n    return hash;\n  }\n\n  // Fallback if no case matched.\n  return `${type}:${value.toString()}`;\n}\n\n/**\n * Performs deep equality check for any two values.\n * This recursively checks primitives, arrays, and plain objects.\n */\nfunction deepEqual(a: any, b: any): boolean {\n  // Check strict equality first.\n  if (a === b) return true;\n  // If types differ, theyre not equal.\n  if (typeof a !== typeof b) return false;\n  if (a === null || b === null || a === undefined || b === undefined)\n    return false;\n\n  // Check arrays.\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b) || a.length !== b.length) return false;\n    for (let i = 0; i < a.length; i++) {\n      if (!deepEqual(a[i], b[i])) return false;\n    }\n    return true;\n  }\n\n  // Check objects.\n  if (typeof a === \"object\") {\n    if (typeof b !== \"object\") return false;\n    const aKeys = Object.keys(a).sort();\n    const bKeys = Object.keys(b).sort();\n    if (aKeys.length !== bKeys.length) return false;\n    for (let i = 0; i < aKeys.length; i++) {\n      if (aKeys[i] !== bKeys[i]) return false;\n      if (!deepEqual(a[aKeys[i]!], b[bKeys[i]!])) return false;\n    }\n    return true;\n  }\n\n  // For any other types (should be primitives by now), use strict equality.\n  return false;\n}\n\n/**\n * Returns a new array containing only the unique values from the input array.\n * Uniqueness is determined by deep equality.\n *\n * @param arr - The array of values to be filtered.\n * @returns A new array with duplicates removed.\n */\nexport function uniq<T>(arr: T[]): T[] {\n  // Use a Map where key is the deep hash and value is an array of items sharing the same hash.\n  const seen = new Map<string, T[]>();\n  const result: T[] = [];\n\n  for (const item of arr) {\n    const hash = deepHash(item);\n    if (seen.has(hash)) {\n      // There is a potential duplicate; check the stored items with the same hash.\n      const itemsWithHash = seen.get(hash)!;\n      let duplicateFound = false;\n      for (const existing of itemsWithHash) {\n        if (deepEqual(existing, item)) {\n          duplicateFound = true;\n          break;\n        }\n      }\n      if (!duplicateFound) {\n        itemsWithHash.push(item);\n        result.push(item);\n      }\n    } else {\n      // First time this hash appears.\n      seen.set(hash, [item]);\n      result.push(item);\n    }\n  }\n\n  return result;\n}\n\nexport function take<T>(a: T[], n: number): T[] {\n  return a.slice(0, n);\n}\n\nexport function flatten<T>(a: T[][]): T[] {\n  return a.flat();\n}\n\nexport function addUniq<T>(arr: T[], values: T[]): T[] {\n  return uniq([...arr, ...values]);\n}\n\nexport function removeUniq<T>(arr: T[], values: T[]): T[] {\n  return arr.filter((v) => !values.includes(v));\n}\n\nexport function isAnyOf<T>(value: T, values: T[]): boolean {\n  return values.includes(value);\n}\n\nfunction getValidBigInt(value: any): bigint | undefined {\n  if (value === null || value === undefined) return undefined;\n  if (typeof value !== \"bigint\") return undefined;\n  return value;\n}\n\n/**\n * Get the maximum value from an array of numbers.\n * Ignores invalid entries (null/undefined/NaN or non-numbers) via `getValidNumber`,\n * so it's safe with `noUncheckedIndexedAccess` and sparse arrays.\n *\n * @param values - Array of numbers (may contain holes)\n * @returns The largest valid number, or -Infinity if none are valid.\n * @example\n * max([1, 3, 2]) // => 3\n * max([])        // => -Infinity\n */\nexport function max(values: readonly number[]): number;\n/**\n * Get the maximum value from an array of bigints.\n * Ignores invalid entries (null/undefined or non-bigints),\n * so it's safe with `noUncheckedIndexedAccess` and sparse arrays.\n *\n * @param values - Array of bigints (may contain holes)\n * @returns The largest valid bigint, or -Infinity if none are valid.\n * @example\n * max([1n, 3n, 2n]) // => 3n\n * max([])           // => -Infinity\n */\nexport function max(values: readonly bigint[]): bigint;\nexport function max(\n  values: readonly number[] | readonly bigint[],\n): number | bigint {\n  let found = false;\n\n  // Check if we're dealing with numbers or bigints by looking at the first valid value\n  let isNumberArray = false;\n  let isBigIntArray = false;\n\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    if (getValidNumber(value) !== undefined) {\n      isNumberArray = true;\n      break;\n    }\n    if (getValidBigInt(value) !== undefined) {\n      isBigIntArray = true;\n      break;\n    }\n  }\n\n  if (isNumberArray) {\n    let m = Number.NEGATIVE_INFINITY;\n    for (let i = 0; i < values.length; i++) {\n      const v = getValidNumber(values[i] as any);\n      if (v !== undefined) {\n        if (v > m) m = v;\n        found = true;\n      }\n    }\n    return found ? m : Number.NEGATIVE_INFINITY;\n  }\n\n  // BigInt array\n  let m: bigint | number = Number.NEGATIVE_INFINITY;\n  for (let i = 0; i < values.length; i++) {\n    const v = getValidBigInt(values[i] as any);\n    if (v !== undefined) {\n      if (!found) {\n        m = v;\n        found = true;\n      } else if (typeof m === \"bigint\" && v > m) {\n        m = v;\n      }\n    }\n  }\n  return found ? m : Number.NEGATIVE_INFINITY;\n}\n\n/**\n * Get the minimum value from an array of numbers.\n * Ignores invalid entries (null/undefined/NaN or non-numbers) via `getValidNumber`,\n * so it's safe with `noUncheckedIndexedAccess` and sparse arrays.\n *\n * @param values - Array of numbers (may contain holes)\n * @returns The smallest valid number, or Infinity if none are valid.\n * @example\n * min([1, 3, 2]) // => 1\n * min([])        // => Infinity\n */\nexport function min(values: readonly number[]): number;\n/**\n * Get the minimum value from an array of bigints.\n * Ignores invalid entries (null/undefined or non-bigints),\n * so it's safe with `noUncheckedIndexedAccess` and sparse arrays.\n *\n * @param values - Array of bigints (may contain holes)\n * @returns The smallest valid bigint, or Infinity if none are valid.\n * @example\n * min([1n, 3n, 2n]) // => 1n\n * min([])           // => Infinity\n */\nexport function min(values: readonly bigint[]): bigint;\nexport function min(\n  values: readonly number[] | readonly bigint[],\n): number | bigint {\n  let found = false;\n\n  // Check if we're dealing with numbers or bigints by looking at the first valid value\n  let isNumberArray = false;\n  let isBigIntArray = false;\n\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    if (getValidNumber(value) !== undefined) {\n      isNumberArray = true;\n      break;\n    }\n    if (getValidBigInt(value) !== undefined) {\n      isBigIntArray = true;\n      break;\n    }\n  }\n\n  if (isNumberArray) {\n    let m = Number.POSITIVE_INFINITY;\n    for (let i = 0; i < values.length; i++) {\n      const v = getValidNumber(values[i] as any);\n      if (v !== undefined) {\n        if (v < m) m = v;\n        found = true;\n      }\n    }\n    return found ? m : Number.POSITIVE_INFINITY;\n  }\n\n  // BigInt array\n  let m: bigint | number = Number.POSITIVE_INFINITY;\n  for (let i = 0; i < values.length; i++) {\n    const v = getValidBigInt(values[i] as any);\n    if (v !== undefined) {\n      if (!found) {\n        m = v;\n        found = true;\n      } else if (typeof m === \"bigint\" && v < m) {\n        m = v;\n      }\n    }\n  }\n  return found ? m : Number.POSITIVE_INFINITY;\n}\n\n/**\n * Get both the minimum and maximum values from an array of numbers in a single pass.\n * Ignores invalid entries via `getValidNumber`, making it safe with `noUncheckedIndexedAccess`\n * and efficient for sparse/large arrays.\n *\n * @param values - Array of numbers (may contain holes)\n * @returns A tuple [min, max], or [Infinity, -Infinity] if none are valid.\n * @example\n * minMax([3, -2, 7, 0]) // => [-2, 7]\n * minMax([])            // => [Infinity, -Infinity]\n */\nexport function minMax(values: readonly number[]): [number, number];\n/**\n * Get both the minimum and maximum values from an array of bigints in a single pass.\n * Ignores invalid entries via `getValidBigInt`, making it safe with `noUncheckedIndexedAccess`\n * and efficient for sparse/large arrays.\n *\n * @param values - Array of bigints (may contain holes)\n * @returns A tuple [min, max], or [Infinity, -Infinity] if none are valid.\n * @example\n * minMax([3n, -2n, 7n, 0n]) // => [-2n, 7n]\n * minMax([])                // => [Infinity, -Infinity]\n */\nexport function minMax(values: readonly bigint[]): [bigint, bigint];\nexport function minMax(\n  values: readonly number[] | readonly bigint[],\n): [number, number] | [bigint, bigint] {\n  let found = false;\n\n  // Check if we're dealing with numbers or bigints by looking at the first valid value\n  let isNumberArray = false;\n  let isBigIntArray = false;\n\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    if (getValidNumber(value) !== undefined) {\n      isNumberArray = true;\n      break;\n    }\n    if (getValidBigInt(value) !== undefined) {\n      isBigIntArray = true;\n      break;\n    }\n  }\n\n  if (isNumberArray) {\n    let minVal = Number.POSITIVE_INFINITY;\n    let maxVal = Number.NEGATIVE_INFINITY;\n\n    for (let i = 0; i < values.length; i++) {\n      const v = getValidNumber(values[i] as any);\n      if (v !== undefined) {\n        if (v < minVal) minVal = v;\n        if (v > maxVal) maxVal = v;\n        found = true;\n      }\n    }\n\n    return found\n      ? [minVal, maxVal]\n      : [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY];\n  }\n\n  // BigInt array\n  let minVal: bigint | number = Number.POSITIVE_INFINITY;\n  let maxVal: bigint | number = Number.NEGATIVE_INFINITY;\n\n  for (let i = 0; i < values.length; i++) {\n    const v = getValidBigInt(values[i] as any);\n    if (v !== undefined) {\n      if (!found) {\n        minVal = v;\n        maxVal = v;\n        found = true;\n      } else {\n        if (typeof minVal === \"bigint\" && v < minVal) minVal = v;\n        if (typeof maxVal === \"bigint\" && v > maxVal) maxVal = v;\n      }\n    }\n  }\n\n  return found\n    ? [minVal as bigint, maxVal as bigint]\n    : [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY];\n}\n",
    "/filter-package/lib/helpers.ts": "import { isBefore } from \"date-fns\";\n\nimport type { Column, ColumnOption, FiltersState } from \"../core/types\";\nimport {\n  booleanFilterFn,\n  dateFilterFn,\n  multiOptionFilterFn,\n  numberFilterFn,\n  optionFilterFn,\n  textFilterFn,\n} from \"./filter-fns\";\n\nexport function getColumn<TData>(columns: Column<TData>[], id: string) {\n  const column = columns.find((c) => c.id === id);\n\n  if (!column) {\n    throw new Error(`Column with id ${id} not found`);\n  }\n\n  return column;\n}\n\nexport function createNumberFilterValue(\n  values: number[] | undefined,\n): number[] {\n  if (!values || values.length === 0 || values[0] === undefined) return [];\n  if (values.length === 1) return [values[0]];\n  if (values.length === 2) return createNumberRange(values);\n  return [values[0], values[1]!];\n}\n\nexport function createBigIntFilterValue(\n  values: bigint[] | undefined,\n): bigint[] {\n  if (!values || values.length === 0 || values[0] === undefined) return [];\n  if (values.length === 1) return [values[0]];\n  if (values.length === 2) return createBigIntRange(values);\n  throw new Error(\"Cannot create bigint filter value from more than 2 values\");\n}\n\nexport function createDateFilterValue(\n  values: [Date, Date] | [Date] | [] | undefined,\n) {\n  if (!values || values.length === 0) return [];\n  if (values.length === 1) return [values[0]];\n  if (values.length === 2) return createDateRange(values);\n  throw new Error(\"Cannot create date filter value from more than 2 values\");\n}\n\nexport function createDateRange(values: [Date, Date]) {\n  const [a, b] = values;\n  const [min, max] = isBefore(a, b) ? [a, b] : [b, a];\n\n  return [min, max];\n}\n\nexport function createNumberRange(values: number[] | undefined) {\n  let a = 0;\n  let b = 0;\n\n  if (!values || values.length === 0) return [a, b];\n  if (values.length === 1) {\n    a = values[0]!;\n  } else {\n    a = values[0]!;\n    b = values[1]!;\n  }\n\n  const [min, max] = a < b ? [a, b] : [b, a];\n\n  return [min, max];\n}\n\nexport function createBigIntRange(values: bigint[] | undefined) {\n  let a = 0n;\n  let b = 0n;\n\n  if (!values || values.length === 0) return [a, b];\n  if (values.length === 1) {\n    a = values[0]!;\n  } else {\n    a = values[0]!;\n    b = values[1]!;\n  }\n\n  const [min, max] = a < b ? [a, b] : [b, a];\n\n  return [min, max];\n}\n\nexport function isColumnOption(value: unknown): value is ColumnOption {\n  return (\n    typeof value === \"object\" &&\n    value !== null &&\n    \"value\" in value &&\n    \"label\" in value\n  );\n}\n\nexport function isColumnOptionArray(value: unknown): value is ColumnOption[] {\n  return Array.isArray(value) && value.every(isColumnOption);\n}\n\nexport function isStringArray(value: unknown): value is string[] {\n  return Array.isArray(value) && value.every((v) => typeof v === \"string\");\n}\n\nexport function isColumnOptionMap(\n  value: unknown,\n): value is Map<string, number> {\n  if (!(value instanceof Map)) {\n    return false;\n  }\n  for (const key of value.keys()) {\n    if (typeof key !== \"string\") {\n      return false;\n    }\n  }\n  for (const val of value.values()) {\n    if (typeof val !== \"number\") {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isMinMaxTuple(value: unknown): value is [number, number] {\n  return (\n    Array.isArray(value) &&\n    value.length === 2 &&\n    typeof value[0] === \"number\" &&\n    typeof value[1] === \"number\"\n  );\n}\nexport function getValidNumber(value: any): number | undefined {\n  if (value === null || value === undefined) return undefined;\n  if (typeof value !== \"number\") return undefined;\n  if (Number.isNaN(value)) return undefined;\n\n  return value; // This includes Infinity and -Infinity, which are valid\n}\n\nexport function isValidNumber(value: any): value is number {\n  return typeof value === \"number\" && !Number.isNaN(value);\n}\n\nexport function getValidBigInt(value: any): bigint | undefined {\n  if (value === null || value === undefined) return undefined;\n  if (typeof value === \"bigint\") return value;\n  if (typeof value === \"string\" || typeof value === \"number\") {\n    try {\n      return BigInt(value);\n    } catch {\n      return undefined;\n    }\n  }\n  return undefined;\n}\n\nexport function filterRow(row: any, filters: FiltersState) {\n  for (const filter of filters) {\n    const cell = row[filter.columnId];\n\n    if (filter.type === \"text\") {\n      if (!textFilterFn(cell, filter)) {\n        return false;\n      }\n    } else if (filter.type === \"number\") {\n      if (!numberFilterFn(cell, filter)) {\n        return false;\n      }\n    } else if (filter.type === \"date\") {\n      if (!dateFilterFn(cell, filter)) {\n        return false;\n      }\n    } else if (filter.type === \"boolean\") {\n      if (!booleanFilterFn(cell, filter)) {\n        return false;\n      }\n    } else if (filter.type === \"option\") {\n      if (!optionFilterFn(cell, filter)) {\n        return false;\n      }\n    } else if (filter.type === \"multiOption\") {\n      if (!multiOptionFilterFn(cell, filter)) {\n        return false;\n      }\n    } else {\n      throw new Error(`Unknown filter type: ${filter.type}`);\n    }\n  }\n\n  return true;\n}\n\nexport function filterData<TData>(\n  data: TData[],\n  filters: FiltersState,\n): TData[] {\n  return data.filter((row) => filterRow(row, filters));\n}\n",
    "/filter-package/lib/order-fns.ts": "import type {\n  ColumnOption,\n  OrderDirection,\n  TBuiltInOrderFn,\n  TBuiltInOrderFnName,\n  TCustomOrderFn,\n  TOrderFnArg,\n  TOrderFns,\n} from \"../core/types\";\n\n/**\n * Built-in order function that sorts column options by their count property.\n * Treats undefined counts as 0.\n *\n * @param a - First column option to compare\n * @param b - Second column option to compare\n * @param direction - Sort direction ('asc' for ascending, 'desc' for descending)\n * @returns Negative number if a should come before b, positive if after, 0 if equal\n *\n * @example\n * ```typescript\n * // Sort by count ascending\n * const result = count(\n *   { value: 'a', label: 'A', count: 5 },\n *   { value: 'b', label: 'B', count: 3 },\n *   'asc'\n * ) // Returns -2 (3 - 5)\n * ```\n */\nfunction count(a: ColumnOption, b: ColumnOption, direction: OrderDirection) {\n  const x = a.count ?? 0;\n  const y = b.count ?? 0;\n\n  return direction === \"asc\" ? x - y : y - x;\n}\n\n/**\n * Built-in order function that sorts column options by their label property.\n * Performs case-insensitive comparison using localeCompare.\n *\n * @param a - First column option to compare\n * @param b - Second column option to compare\n * @param direction - Sort direction ('asc' for ascending, 'desc' for descending)\n * @returns Negative number if a should come before b, positive if after, 0 if equal\n *\n * @example\n * ```typescript\n * // Sort by label ascending (case-insensitive)\n * const result = label(\n *   { value: 'a', label: 'Apple' },\n *   { value: 'b', label: 'banana' },\n *   'asc'\n * ) // Returns negative number ('apple' < 'banana')\n * ```\n */\nfunction label(a: ColumnOption, b: ColumnOption, direction: OrderDirection) {\n  const x = a.label.toLowerCase();\n  const y = b.label.toLowerCase();\n\n  return direction === \"asc\" ? x.localeCompare(y) : y.localeCompare(x);\n}\n\n/**\n * Collection of built-in order functions available for sorting column options.\n * Each function takes two ColumnOptions and an OrderDirection, returning a comparison result.\n *\n * @example\n * ```typescript\n * // Use built-in count function\n * const sortedOptions = options.sort((a, b) => orderFns.count(a, b, 'desc'))\n * ```\n */\nexport const orderFns = {\n  count,\n  label,\n} as const satisfies Record<string, TBuiltInOrderFn>;\n\n/**\n * Applies multiple order functions to sort an array of column options.\n * Functions are applied in sequence - if the first comparison returns 0 (equal),\n * the next function is tried, and so on. This mimics SQL's ORDER BY behavior\n * with multiple columns.\n *\n * @param orderFns - Array of order functions to apply in sequence\n * @param options - Array of column options to sort\n * @returns New sorted array of column options\n *\n * @example\n * ```typescript\n * // Sort by count descending, then by label ascending for ties\n * const orderFunctions = [\n *   (a, b) => orderFns.count(a, b, 'desc'),\n *   (a, b) => orderFns.label(a, b, 'asc')\n * ]\n * const sorted = applyOrderFns(orderFunctions, options)\n * ```\n */\nexport function applyOrderFns(\n  orderFns: TOrderFns,\n  options: ColumnOption[],\n): ColumnOption[] {\n  return options.sort((a, b) => {\n    for (const orderFn of orderFns) {\n      const result = orderFn(a, b);\n      if (result !== 0) {\n        return result; // First non-zero result wins\n      }\n    }\n    return 0; // All comparisons were equal\n  });\n}\n\n// Type guards\n\n/**\n * Type guard that checks if a value is a valid built-in order function name.\n *\n * @param value - Value to check\n * @returns True if value is a valid built-in order function name\n *\n * @example\n * ```typescript\n * if (isBuiltInOrderFnName('count')) {\n *   // value is guaranteed to be 'count' | 'label'\n * }\n * ```\n */\nexport function isBuiltInOrderFnName(\n  value: unknown,\n): value is TBuiltInOrderFnName {\n  return typeof value === \"string\" && value in orderFns;\n}\n\n/**\n * Type guard that checks if a value is a valid order direction.\n *\n * @param value - Value to check\n * @returns True if value is 'asc' or 'desc'\n *\n * @example\n * ```typescript\n * if (isOrderDirection(userInput)) {\n *   // userInput is guaranteed to be 'asc' | 'desc'\n * }\n * ```\n */\nexport function isOrderDirection(value: unknown): value is OrderDirection {\n  return typeof value === \"string\" && (value === \"asc\" || value === \"desc\");\n}\n\n/**\n * Type guard that checks if a value is a valid custom order function.\n * A valid custom order function must be a function that accepts exactly 2 parameters.\n *\n * @param value - Value to check\n * @returns True if value is a function with exactly 2 parameters\n *\n * @example\n * ```typescript\n * const customFn = (a: ColumnOption, b: ColumnOption) => a.value.localeCompare(b.value)\n * if (isCustomOrderFn(customFn)) {\n *   // customFn is guaranteed to be TCustomOrderFn\n * }\n * ```\n */\nexport function isCustomOrderFn(value: unknown): value is TCustomOrderFn {\n  return typeof value === \"function\" && value.length === 2;\n}\n\n/**\n * Type guard that checks if a value is a valid built-in order function tuple.\n * A valid tuple consists of [functionName, direction] where functionName is a built-in\n * function name and direction is 'asc' or 'desc'.\n *\n * @param value - Value to check\n * @returns True if value is a valid [TBuiltInOrderFnName, OrderDirection] tuple\n *\n * @example\n * ```typescript\n * if (isBuiltInOrderFnTuple(['count', 'asc'])) {\n *   // value is guaranteed to be ['count' | 'label', 'asc' | 'desc']\n * }\n * ```\n */\nexport function isBuiltInOrderFnTuple(\n  value: unknown,\n): value is [TBuiltInOrderFnName, OrderDirection] {\n  return (\n    Array.isArray(value) &&\n    value.length === 2 &&\n    isBuiltInOrderFnName(value[0]) &&\n    isOrderDirection(value[1])\n  );\n}\n\n/**\n * Type guard that checks if a value is any valid order function argument.\n * Accepts either a built-in order function tuple or a custom order function.\n *\n * @param value - Value to check\n * @returns True if value is a valid order function argument\n *\n * @example\n * ```typescript\n * // Valid arguments:\n * isOrderFnArg(['count', 'asc']) // true - built-in tuple\n * isOrderFnArg((a, b) => a.value.localeCompare(b.value)) // true - custom function\n * isOrderFnArg('invalid') // false\n * ```\n */\nexport function isOrderFnArg(value: unknown): value is TOrderFnArg {\n  return isBuiltInOrderFnTuple(value) || isCustomOrderFn(value);\n}\n",
    "/filter-package/lib/memo.ts": "// Overloads for up to 6 dependencies\n// TypeScript can't infer the exact tuple types when destructuring\nexport function memo<T1, TResult>(\n  getDeps: () => readonly [T1],\n  compute: (deps: readonly [T1]) => TResult,\n  options: { key: string },\n): () => TResult;\n\n// 2 dependencies\nexport function memo<T1, T2, TResult>(\n  getDeps: () => readonly [T1, T2],\n  compute: (deps: readonly [T1, T2]) => TResult,\n  options: { key: string },\n): () => TResult;\n\n// 3 dependencies\nexport function memo<T1, T2, T3, TResult>(\n  getDeps: () => readonly [T1, T2, T3],\n  compute: (deps: readonly [T1, T2, T3]) => TResult,\n  options: { key: string },\n): () => TResult;\n\n// 4 dependencies\nexport function memo<T1, T2, T3, T4, TResult>(\n  getDeps: () => readonly [T1, T2, T3, T4],\n  compute: (deps: readonly [T1, T2, T3, T4]) => TResult,\n  options: { key: string },\n): () => TResult;\n\n// 5 dependencies\nexport function memo<T1, T2, T3, T4, T5, TResult>(\n  getDeps: () => readonly [T1, T2, T3, T4, T5],\n  compute: (deps: readonly [T1, T2, T3, T4, T5]) => TResult,\n  options: { key: string },\n): () => TResult;\n\n// General fallback for 6+ dependencies\nexport function memo<TDeps extends readonly any[], TResult>(\n  getDeps: () => TDeps,\n  compute: (deps: TDeps) => TResult,\n  options: { key: string },\n): () => TResult;\n\nexport function memo<TDeps extends readonly any[], TResult>(\n  getDeps: () => TDeps,\n  compute: (deps: TDeps) => TResult,\n  options: { key: string },\n): () => TResult {\n  let prevDeps: TDeps | undefined;\n  let cachedResult: TResult | undefined;\n\n  return () => {\n    const deps = getDeps();\n\n    // If no previous deps or deps have changed, recompute\n    if (!prevDeps || !shallowEqual(prevDeps, deps)) {\n      cachedResult = compute(deps);\n      prevDeps = deps;\n    }\n\n    return cachedResult!;\n  };\n}\n\nfunction shallowEqual<T>(arr1: readonly T[], arr2: readonly T[]): boolean {\n  if (arr1 === arr2) return true;\n  if (arr1.length !== arr2.length) return false;\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) return false;\n  }\n  return true;\n}\n",
    "/filter-package/core/columns/column-builder.ts": "import type {\n  ColumnConfig,\n  ColumnDataType,\n  ColumnMeta,\n  ColumnOption,\n  OrderDirection,\n  TAccessorFn,\n  TBuiltInOrderFnName,\n  TCustomOrderFn,\n  TOrderFnArg,\n  TOrderFns,\n  TTransformOptionsFn,\n  TTransformValueToOptionFn,\n} from \"../types\";\nimport { isAnyOf } from \"../../lib/array\";\nimport {\n  isBuiltInOrderFnName,\n  isBuiltInOrderFnTuple,\n  isCustomOrderFn,\n  isOrderDirection,\n  orderFns,\n} from \"../../lib/order-fns\";\n\nexport class ColumnConfigBuilder<\n  TData,\n  TType extends ColumnDataType = any,\n  TVal = unknown,\n  TId extends string = string,\n> {\n  private config: Partial<ColumnConfig<TData, TType, TVal, TId>>;\n\n  constructor(type: TType) {\n    this.config = { type } as Partial<ColumnConfig<TData, TType, TVal, TId>>;\n  }\n\n  private clone(): ColumnConfigBuilder<TData, TType, TVal, TId> {\n    const newInstance = new ColumnConfigBuilder<TData, TType, TVal, TId>(\n      this.config.type as TType,\n    );\n    newInstance.config = { ...this.config };\n    return newInstance;\n  }\n\n  id<TNewId extends string>(\n    value: TNewId,\n  ): ColumnConfigBuilder<TData, TType, TVal, TNewId> {\n    const newInstance = this.clone() as ColumnConfigBuilder<any, any, any, any>;\n    newInstance.config.id = value;\n    return newInstance as ColumnConfigBuilder<TData, TType, TVal, TNewId>;\n  }\n\n  accessor<TNewVal>(\n    accessor: TAccessorFn<TData, TNewVal>,\n  ): ColumnConfigBuilder<TData, TType, TNewVal, TId> {\n    const newInstance = this.clone() as ColumnConfigBuilder<any, any, any, any>;\n    newInstance.config.accessor = accessor;\n    return newInstance as ColumnConfigBuilder<TData, TType, TNewVal, TId>;\n  }\n\n  displayName(value: string): ColumnConfigBuilder<TData, TType, TVal, TId> {\n    const newInstance = this.clone();\n    newInstance.config.displayName = value;\n    return newInstance;\n  }\n\n  icon(value: any): ColumnConfigBuilder<TData, TType, TVal, TId> {\n    const newInstance = this.clone();\n    newInstance.config.icon = value;\n    return newInstance;\n  }\n\n  hidden(value: boolean): ColumnConfigBuilder<TData, TType, TVal, TId> {\n    const newInstance = this.clone();\n    newInstance.config.hidden = value;\n    return newInstance;\n  }\n\n  // Number-specific methods\n  min(\n    value: TType extends \"number\"\n      ? number\n      : TType extends \"bigint\"\n        ? bigint\n        : never,\n  ): this {\n    this.validateType([\"number\", \"bigint\"], \"min()\");\n    this.config.min = value as any;\n    return this;\n  }\n\n  max(\n    value: TType extends \"number\"\n      ? number\n      : TType extends \"bigint\"\n        ? bigint\n        : never,\n  ): this {\n    this.validateType([\"number\", \"bigint\"], \"max()\");\n    this.config.max = value as any;\n    return this;\n  }\n\n  // Option-specific methods\n  options(value: ColumnOption[]): this {\n    this.validateType([\"option\", \"multiOption\"], \"options()\");\n    this.config.options = value as any;\n    return this;\n  }\n\n  transformValueToOptionFn(fn: TTransformValueToOptionFn<TVal>): this {\n    this.validateType([\"option\", \"multiOption\"], \"transformValueToOptionFn()\");\n    this.config.transformValueToOptionFn = fn as any;\n    return this;\n  }\n\n  /**\n   * Transforms the computed column options after initial computation, with access to faceted data.\n   * This is applied AFTER transformValueToOptionFn and has access to both the computed options array\n   * and faceted unique values data.\n   *\n   * @param fn - Function that receives the computed options and faceted data, returns transformed options\n   */\n  transformOptionsFn(fn: TTransformOptionsFn): this {\n    this.validateType([\"option\", \"multiOption\"], \"transformOptionsFn()\");\n    this.config.transformOptionsFn = fn as any;\n    return this;\n  }\n\n  orderFn(name: TBuiltInOrderFnName, direction: OrderDirection): this;\n  orderFn(customFn: TCustomOrderFn): this;\n  orderFn(...args: TOrderFnArg[]): this;\n  orderFn(...args: any[]): this {\n    this.validateType([\"option\", \"multiOption\"], \"orderFn()\");\n\n    const orderFnsToApply: TOrderFns = [];\n\n    // Handle the case where first two args are built-in name and direction\n    if (\n      args.length === 2 &&\n      isBuiltInOrderFnName(args[0]) &&\n      isOrderDirection(args[1])\n    ) {\n      const [name, direction] = args;\n      orderFnsToApply.push((a: ColumnOption, b: ColumnOption) =>\n        orderFns[name](a, b, direction),\n      );\n    } else if (args.length === 1 && isCustomOrderFn(args[0])) {\n      orderFnsToApply.push(args[0]);\n    } else {\n      // Handle array/rest syntax - validate each argument\n      for (const arg of args) {\n        if (isBuiltInOrderFnTuple(arg)) {\n          const [name, direction] = arg;\n          orderFnsToApply.push((a: ColumnOption, b: ColumnOption) =>\n            orderFns[name](a, b, direction),\n          );\n        } else if (isCustomOrderFn(arg)) {\n          orderFnsToApply.push(arg);\n        } else {\n          throw new Error(\n            `Invalid argument: ${JSON.stringify(arg)}. Expected built-in function tuple or custom function.`,\n          );\n        }\n      }\n    }\n\n    this.config.orderFn = orderFnsToApply as any;\n    return this;\n  }\n\n  toggledStateName(\n    value: string,\n  ): ColumnConfigBuilder<\n    TData,\n    TType extends \"boolean\" ? TType : never,\n    TVal,\n    TId\n  > {\n    if (this.config.type !== \"boolean\")\n      throw new Error(\n        \"toggledStateName() is only applicable to boolean columns\",\n      );\n\n    const newInstance = this.clone() as ColumnConfigBuilder<any, any, any, any>;\n    newInstance.config.toggledStateName = value;\n    return newInstance;\n  }\n\n  meta(value: ColumnMeta): ColumnConfigBuilder<TData, TType, TVal, TId> {\n    const newInstance = this.clone();\n    newInstance.config.meta = value;\n    return newInstance;\n  }\n\n  private validateType(\n    expectedTypes: ColumnDataType | ColumnDataType[],\n    methodName: string,\n  ) {\n    const types = Array.isArray(expectedTypes)\n      ? expectedTypes\n      : [expectedTypes];\n    if (!isAnyOf(this.config.type, types)) {\n      throw new Error(\n        `[Column config builder] ${methodName} is only applicable to ${types.join(\" or \")} columns`,\n      );\n    }\n  }\n\n  build(): ColumnConfig<TData, TType, TVal, TId> {\n    this.validateRequiredFields();\n    return this.config as ColumnConfig<TData, TType, TVal, TId>;\n  }\n\n  private validateRequiredFields() {\n    if (!this.config.id) throw new Error(\"id is required\");\n    if (!this.config.accessor) throw new Error(\"accessor is required\");\n    if (!this.config.displayName) throw new Error(\"displayName is required\");\n  }\n}\n\n// Update the helper interface\ninterface FluentColumnConfigHelper<TData> {\n  text: () => ColumnConfigBuilder<TData, \"text\", string>;\n  number: () => ColumnConfigBuilder<TData, \"number\", number>;\n  bigint: () => ColumnConfigBuilder<TData, \"bigint\", bigint>;\n  date: () => ColumnConfigBuilder<TData, \"date\", Date>;\n  boolean: () => ColumnConfigBuilder<TData, \"boolean\", boolean>;\n  option: () => ColumnConfigBuilder<TData, \"option\", string>;\n  multiOption: () => ColumnConfigBuilder<TData, \"multiOption\", string[]>;\n}\n\n// Factory function remains mostly the same\nexport function createColumnConfigHelper<\n  TData,\n>(): FluentColumnConfigHelper<TData> {\n  return {\n    text: () => new ColumnConfigBuilder<TData, \"text\", string>(\"text\"),\n    number: () => new ColumnConfigBuilder<TData, \"number\", number>(\"number\"),\n    bigint: () => new ColumnConfigBuilder<TData, \"bigint\", bigint>(\"bigint\"),\n    date: () => new ColumnConfigBuilder<TData, \"date\", Date>(\"date\"),\n    boolean: () =>\n      new ColumnConfigBuilder<TData, \"boolean\", boolean>(\"boolean\"),\n    option: () => new ColumnConfigBuilder<TData, \"option\", string>(\"option\"),\n    multiOption: () =>\n      new ColumnConfigBuilder<TData, \"multiOption\", string[]>(\"multiOption\"),\n  };\n}\n",
    "/filter-package/core/columns/column-factory.ts": "import type {\n  Column,\n  ColumnConfig,\n  ColumnDataType,\n  ElementType,\n  FilterStrategy,\n} from \"../types\";\nimport { memo } from \"../../lib/memo\";\nimport { ColumnDataService } from \"./column-data-service\";\n\nexport function createColumns<TData>(\n  data: TData[],\n  columnConfigs: ReadonlyArray<ColumnConfig<TData, any, any, any>>,\n  strategy: FilterStrategy,\n): Column<TData>[] {\n  return columnConfigs.map((columnConfig) =>\n    createColumn(columnConfig, data, strategy),\n  );\n}\n\nexport function createColumn<TData>(\n  columnConfig: ColumnConfig<TData, any, any, any>,\n  data: TData[],\n  strategy: FilterStrategy,\n): Column<TData> {\n  // Create the centralized data service\n  const dataService = new ColumnDataService(data, strategy);\n\n  // Create memoized functions\n  const getValues = createMemoizedValues(columnConfig, dataService);\n  const getUniqueValues = createMemoizedUniqueValues(\n    columnConfig,\n    dataService,\n    getValues,\n  );\n  const getMinMaxValues = createMemoizedMinMaxValues(columnConfig, dataService);\n\n  // Create the main getOptions function that handles all transforms\n  const getOptions = createMemoizedOptions(\n    columnConfig,\n    dataService,\n    getValues,\n  );\n\n  // Create the Column instance\n  const column: Column<TData> = {\n    ...columnConfig,\n    getOptions, // This now returns fully processed options\n    getValues,\n    getFacetedUniqueValues: getUniqueValues,\n    getFacetedMinMaxValues: getMinMaxValues,\n    // Prefetch methods will be added below\n    prefetchOptions: async () => {}, // Placeholder, defined below\n    prefetchValues: async () => {},\n    prefetchFacetedUniqueValues: async () => {},\n    prefetchFacetedMinMaxValues: async () => {},\n    _prefetchedOptionsCache: null, // Initialize private cache\n    _prefetchedValuesCache: null,\n    _prefetchedFacetedUniqueValuesCache: null,\n    _prefetchedFacetedMinMaxValuesCache: null,\n  };\n\n  if (strategy === \"client\") {\n    // Define prefetch methods with access to the column instance\n    setupPrefetchMethods(column, {\n      getOptions,\n      getValues,\n      getUniqueValues,\n      getMinMaxValues,\n    });\n  }\n\n  return column;\n}\n\n/**\n * Creates the main getOptions function that returns fully processed options.\n * This includes all transforms and post-processing, plus automatic count population.\n */\nfunction createMemoizedOptions<TData>(\n  columnConfig: ColumnConfig<TData, any, any, any>,\n  dataService: ColumnDataService<TData>,\n  getValues: () => ElementType<NonNullable<any>>[],\n) {\n  return memo(\n    () => [\n      dataService,\n      columnConfig.options,\n      columnConfig.transformValueToOptionFn,\n      columnConfig.transformOptionsFn,\n      columnConfig.orderFn,\n      getValues(), // Include values as dependency for reactivity\n    ],\n    () => {\n      return dataService.computeTransformedOptions(columnConfig);\n    },\n    { key: `final-options-${columnConfig.id}` },\n  );\n}\n\nfunction createMemoizedValues<TData>(\n  columnConfig: ColumnConfig<TData, any, any, any>,\n  dataService: ColumnDataService<TData>,\n) {\n  return memo(\n    () => [dataService],\n    ([dataService]) => dataService.getValues(columnConfig),\n    { key: `values-${columnConfig.id}` },\n  );\n}\n\nfunction createMemoizedUniqueValues<TData>(\n  columnConfig: ColumnConfig<TData, any, any, any>,\n  dataService: ColumnDataService<TData>,\n  getValues: () => ElementType<NonNullable<any>>[],\n) {\n  return memo(\n    () => [getValues(), dataService],\n    ([values, dataService]) =>\n      dataService.computeFacetedUniqueValues(columnConfig, values as any),\n    { key: `faceted-${columnConfig.id}` },\n  );\n}\n\nfunction createMemoizedMinMaxValues<TData, TType extends ColumnDataType>(\n  columnConfig: ColumnConfig<TData, TType, any, any>,\n  dataService: ColumnDataService<TData>,\n) {\n  return memo(\n    () => [dataService],\n    ([dataService]) => dataService.computeFacetedMinMaxValues(columnConfig),\n    { key: `minmax-${columnConfig.id}` },\n  );\n}\n\nfunction setupPrefetchMethods<TData>(\n  column: Column<TData>,\n  methods: {\n    getOptions: () => any;\n    getValues: () => any;\n    getUniqueValues: () => any;\n    getMinMaxValues: () => any;\n  },\n) {\n  const { getOptions, getValues, getUniqueValues, getMinMaxValues } = methods;\n\n  column.prefetchOptions = async (): Promise<void> => {\n    if (!column._prefetchedOptionsCache) {\n      await new Promise((resolve) =>\n        setTimeout(() => {\n          column._prefetchedOptionsCache = getOptions();\n          resolve(undefined);\n        }, 0),\n      );\n    }\n  };\n\n  column.prefetchValues = async (): Promise<void> => {\n    if (!column._prefetchedValuesCache) {\n      await new Promise((resolve) =>\n        setTimeout(() => {\n          column._prefetchedValuesCache = getValues();\n          resolve(undefined);\n        }, 0),\n      );\n    }\n  };\n\n  column.prefetchFacetedUniqueValues = async (): Promise<void> => {\n    if (!column._prefetchedFacetedUniqueValuesCache) {\n      await new Promise((resolve) =>\n        setTimeout(() => {\n          column._prefetchedFacetedUniqueValuesCache =\n            getUniqueValues() ?? null;\n          resolve(undefined);\n        }, 0),\n      );\n    }\n  };\n\n  column.prefetchFacetedMinMaxValues = async (): Promise<void> => {\n    if (!column._prefetchedFacetedMinMaxValuesCache) {\n      await new Promise((resolve) =>\n        setTimeout(() => {\n          column._prefetchedFacetedMinMaxValuesCache =\n            getMinMaxValues() ?? null;\n          resolve(undefined);\n        }, 0),\n      );\n    }\n  };\n}\n",
    "/filter-package/core/columns/index.ts": "export * from \"./column-builder\";\nexport * from \"./column-factory\";\n",
    "/filter-package/core/columns/column-data-service.ts": "import type {\n  ColumnConfig,\n  ColumnDataType,\n  ColumnOption,\n  ElementType,\n  FilterStrategy,\n  MinMaxReturn,\n  Nullable,\n  NumericValue,\n} from \"../types\";\nimport { isAnyOf, minMax, uniq } from \"../../lib/array\";\nimport { isColumnOptionArray } from \"../../lib/helpers\";\nimport { memo } from \"../../lib/memo\";\nimport { applyOrderFns } from \"../../lib/order-fns\";\n\n/**\n * Consolidated service for handling all column data operations including:\n * - Computing column options\n * - Getting column values\n * - Computing faceted unique values\n * - Computing faceted min/max values\n *\n * This centralizes the logic that was previously scattered across utils.ts and column-factory.ts\n */\nexport class ColumnDataService<TData> {\n  constructor(\n    private data: TData[],\n    private strategy: FilterStrategy,\n  ) {}\n\n  /**\n   * Step 1: Computes base column options without counts, ordering, or transforms\n   */\n  computeBaseOptions<TType extends ColumnDataType, TVal>(\n    column: ColumnConfig<TData, TType, TVal>,\n  ): ColumnOption[] {\n    if (!isAnyOf(column.type, [\"option\", \"multiOption\"])) {\n      return [];\n    }\n\n    if (this.strategy === \"server\" && !column.options) {\n      throw new Error(\"column options are required for server-side filtering\");\n    }\n\n    // If static options are provided, use them as the base\n    if (column.options) {\n      return column.options;\n    }\n\n    // Compute options from data\n    const filtered = this.data\n      .flatMap(column.accessor)\n      .filter((v): v is NonNullable<TVal> => v !== undefined && v !== null);\n\n    const uniqueValues = uniq(filtered);\n    let columnOptions: ColumnOption[] = [];\n\n    // Transform individual values to options\n    if (column.transformValueToOptionFn) {\n      columnOptions = uniqueValues.map((m) =>\n        column.transformValueToOptionFn!(m as ElementType<NonNullable<TVal>>),\n      );\n    }\n\n    if (isColumnOptionArray(columnOptions)) {\n      return columnOptions;\n    }\n\n    throw new Error(\n      `[data-table-filter] [${column.id}] Either provide static options, a transformValueToOptionFn, or ensure the column data conforms to ColumnOption type`,\n    );\n  }\n\n  /**\n   * Step 2: Computes ordered options with counts applied\n   */\n  computeOrderedOptions<TType extends ColumnDataType, TVal>(\n    column: ColumnConfig<TData, TType, TVal>,\n  ): ColumnOption[] {\n    const baseOptions = this.computeBaseOptions(column);\n    const values = this.getValues(column);\n\n    // Add counts to base options\n    const facetedData = this.computeFacetedUniqueValues(column, values as any);\n    const optionsWithCounts = baseOptions.map((option) => ({\n      ...option,\n      count: facetedData?.get(option.value) || 0,\n    }));\n\n    // Apply ordering if provided\n    if (column.orderFn) {\n      return applyOrderFns(column.orderFn, optionsWithCounts);\n    }\n\n    return optionsWithCounts;\n  }\n\n  /**\n   * Step 3: Computes final transformed options\n   */\n  computeTransformedOptions<TType extends ColumnDataType, TVal>(\n    column: ColumnConfig<TData, TType, TVal>,\n  ): ColumnOption[] {\n    const orderedOptions = this.computeOrderedOptions(column);\n\n    if (!column.transformOptionsFn) return orderedOptions;\n    return column.transformOptionsFn(orderedOptions);\n  }\n\n  /**\n   * Gets raw column values for processing\n   */\n  getValues<TType extends ColumnDataType, TVal>(\n    column: ColumnConfig<TData, TType, TVal>,\n  ): ElementType<NonNullable<TVal>>[] {\n    // Memoize accessor calls\n    const memoizedAccessor = memo(\n      () => [this.data],\n      (deps) =>\n        (deps[0] ?? [])\n          .flatMap(column.accessor)\n          .filter(\n            (v): v is NonNullable<TVal> => v !== undefined && v !== null,\n          ) as ElementType<NonNullable<TVal>>[],\n      { key: `accessor-${column.id}` },\n    );\n\n    const raw = memoizedAccessor();\n\n    if (!isAnyOf(column.type, [\"option\", \"multiOption\"])) {\n      return raw;\n    }\n\n    if (column.options) {\n      return raw\n        .map((v) => column.options?.find((o) => o.value === v)?.value)\n        .filter((v) => v !== undefined && v !== null) as ElementType<\n        NonNullable<TVal>\n      >[];\n    }\n\n    if (column.transformValueToOptionFn) {\n      const memoizedTransform = memo(\n        () => [raw],\n        (deps) =>\n          (deps[0] ?? []).map(\n            (v) =>\n              column.transformValueToOptionFn!(v) as ElementType<\n                NonNullable<TVal>\n              >,\n          ),\n        { key: `transform-values-${column.id}` },\n      );\n      return memoizedTransform();\n    }\n\n    if (isColumnOptionArray(raw)) {\n      return raw;\n    }\n\n    throw new Error(\n      `[data-table-filter] [${column.id}] Either provide static options, a transformValueToOptionFn, or ensure the column data conforms to ColumnOption type`,\n    );\n  }\n\n  /**\n   * Computes faceted unique values for option-based columns\n   */\n  computeFacetedUniqueValues<TType extends ColumnDataType, TVal>(\n    column: ColumnConfig<TData, TType, TVal>,\n    values: string[] | ColumnOption[],\n  ): Map<string, number> | undefined {\n    if (!isAnyOf(column.type, [\"option\", \"multiOption\"])) {\n      console.warn(\n        \"Faceted unique values can only be retrieved for option and multiOption columns\",\n      );\n      return new Map<string, number>();\n    }\n\n    if (this.strategy === \"server\") {\n      return column.facetedOptions;\n    }\n\n    const acc = new Map<string, number>();\n\n    if (isColumnOptionArray(values)) {\n      for (const option of values) {\n        const curr = acc.get(option.value) ?? 0;\n        acc.set(option.value, curr + 1);\n      }\n    } else {\n      for (const option of values) {\n        const curr = acc.get(option as string) ?? 0;\n        acc.set(option as string, curr + 1);\n      }\n    }\n\n    return acc;\n  }\n\n  /**\n   * Computes faceted min/max values for number/bigint columns\n   */\n  computeFacetedMinMaxValues<TType extends ColumnDataType, TVal>(\n    column: ColumnConfig<TData, TType, TVal>,\n  ): MinMaxReturn<TType> {\n    if (!isAnyOf(column.type, [\"number\", \"bigint\"])) {\n      return undefined as MinMaxReturn<TType>;\n    }\n\n    // Check for static min/max values\n    if (column.min !== undefined && column.max !== undefined) {\n      return [column.min, column.max] as MinMaxReturn<TType>;\n    }\n\n    if (this.strategy === \"server\") {\n      return undefined as MinMaxReturn<TType>;\n    }\n\n    // Extract values using the accessor\n    const rawValues = this.data\n      .flatMap((row) => column.accessor(row) as Nullable<NumericValue>)\n      .filter(\n        (v): v is NumericValue =>\n          (typeof v === \"number\" && !Number.isNaN(v)) || typeof v === \"bigint\",\n      );\n\n    if (rawValues.length === 0) {\n      const defaultValue = column.type === \"bigint\" ? [0n, 0n] : [0, 0];\n      return defaultValue as MinMaxReturn<TType>;\n    }\n\n    // Filter to ensure type consistency\n    if (column.type === \"number\") {\n      const numberValues = rawValues.filter(\n        (v): v is number => typeof v === \"number\",\n      );\n      return minMax(numberValues) as MinMaxReturn<TType>;\n    }\n    const bigintValues = rawValues.filter(\n      (v): v is bigint => typeof v === \"bigint\",\n    );\n    return minMax(bigintValues) as MinMaxReturn<TType>;\n  }\n}\n",
    "/filter-package/integrations/tanstack-table/filter-fns.ts": "import type { FilterModel } from \"../../core/types\";\nimport type { Row } from \"@tanstack/react-table\";\nimport * as f from \"../../lib/filter-fns\";\n\nexport function dateFilterFn<TData>(\n  row: Row<TData>,\n  columnId: string,\n  filterValue: FilterModel<\"date\">,\n): boolean {\n  const value = row.getValue<Date>(columnId);\n\n  return f.dateFilterFn(value, filterValue);\n}\n\nexport function textFilterFn<TData>(\n  row: Row<TData>,\n  columnId: string,\n  filterValue: FilterModel<\"text\">,\n): boolean {\n  const value = row.getValue<string>(columnId) ?? \"\";\n\n  return f.textFilterFn(value, filterValue);\n}\n\nexport function numberFilterFn<TData>(\n  row: Row<TData>,\n  columnId: string,\n  filterValue: FilterModel<\"number\">,\n): boolean {\n  const value = row.getValue<number>(columnId);\n\n  return f.numberFilterFn(value, filterValue);\n}\n\nexport function booleanFilterFn<TData>(\n  row: Row<TData>,\n  columnId: string,\n  filterValue: FilterModel<\"boolean\">,\n): boolean {\n  const value = row.getValue<boolean>(columnId) ?? false;\n\n  return f.booleanFilterFn(value, filterValue);\n}\n",
    "/filter-package/integrations/tanstack-table/index.ts": "import type { Column, FilterModel, FiltersState } from \"../../core/types\";\nimport type { ColumnDef, ColumnFiltersState } from \"@tanstack/react-table\";\nimport { multiOptionFilterFn, optionFilterFn } from \"../../lib/filter-fns\";\nimport {\n  isColumnOption,\n  isColumnOptionArray,\n  isStringArray,\n} from \"../../lib/helpers\";\nimport {\n  booleanFilterFn,\n  dateFilterFn,\n  numberFilterFn,\n  textFilterFn,\n} from \"./filter-fns\";\n\ninterface CreateTSTColumns<TData> {\n  columns: ColumnDef<TData, any>[];\n  configs: Column<TData>[];\n}\n\nexport function createTSTColumns<TData>({\n  columns,\n  configs,\n}: CreateTSTColumns<TData>) {\n  const _cols: ColumnDef<TData>[] = [];\n\n  for (const col of columns) {\n    // Get the column filter config for this column\n    const config = configs.find((c) => c.id === col.id);\n\n    // If the column is not filterable or doesn't have a filter config, skip it\n    // An explicit check is done on `enableColumnFilter`\n    if (col.enableColumnFilter === false || !config) {\n      _cols.push(col);\n      continue;\n    }\n\n    if (config.type === \"text\") {\n      col.filterFn = textFilterFn;\n      _cols.push(col);\n      continue;\n    }\n\n    if (config.type === \"number\") {\n      col.filterFn = numberFilterFn;\n      _cols.push(col);\n      continue;\n    }\n\n    if (config.type === \"date\") {\n      col.filterFn = dateFilterFn;\n      _cols.push(col);\n      continue;\n    }\n\n    if (config.type === \"boolean\") {\n      col.filterFn = booleanFilterFn;\n      _cols.push(col);\n      continue;\n    }\n\n    if (config.type === \"option\") {\n      col.filterFn = (row, columnId, filterValue: FilterModel<\"option\">) => {\n        const value = row.getValue<unknown>(columnId);\n\n        if (!value) return false;\n\n        if (typeof value === \"string\") {\n          return optionFilterFn(value, filterValue);\n        }\n\n        if (isColumnOption(value)) {\n          return optionFilterFn(value.value, filterValue);\n        }\n\n        const sanitizedValue = config.transformValueToOptionFn!(value as never);\n        return optionFilterFn(sanitizedValue.value, filterValue);\n      };\n    }\n\n    if (config.type === \"multiOption\") {\n      col.filterFn = (\n        row,\n        columnId,\n        filterValue: FilterModel<\"multiOption\">,\n      ) => {\n        const value = row.getValue(columnId);\n\n        if (!value) return false;\n\n        if (isStringArray(value)) {\n          return multiOptionFilterFn(value, filterValue);\n        }\n\n        if (isColumnOptionArray(value)) {\n          return multiOptionFilterFn(\n            value.map((v) => v.value),\n            filterValue,\n          );\n        }\n\n        const sanitizedValue = (value as never[]).map((v) =>\n          config.transformValueToOptionFn!(v),\n        );\n\n        return multiOptionFilterFn(\n          sanitizedValue.map((v) => v.value),\n          filterValue,\n        );\n      };\n    }\n\n    _cols.push(col);\n  }\n\n  return _cols;\n}\n\nexport function createTSTFilters(filters: FiltersState): ColumnFiltersState {\n  return filters.map((filter) => ({ id: filter.columnId, value: filter }));\n}\n",
    "/ui/utils.tsx": "import type { CxOptions } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cx } from \"class-variance-authority\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport const cn = (...inputs: CxOptions) => twMerge(cx(inputs));\n\n/**\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/composeRefs.tsx\n */\ntype PossibleRef<T> = React.Ref<T> | undefined;\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef<T>(ref: PossibleRef<T>, value: T) {\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else if (ref !== null && ref !== undefined) {\n    (ref as React.MutableRefObject<T>).current = value;\n  }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nexport function composeRefs<T>(...refs: PossibleRef<T>[]) {\n  return (node: T) => refs.forEach((ref) => setRef(ref, node));\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nexport function useComposedRefs<T>(...refs: PossibleRef<T>[]) {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return React.useCallback(composeRefs(...refs), refs);\n}\n\n/**\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/use-callback-ref/src/useCallbackRef.tsx\n */\n/**\n * A custom hook that converts a callback to a ref to avoid triggering re-renders when passed as a\n * prop or avoid re-executing effects when passed as a dependency\n */\nexport function useCallbackRef<T extends (...args: never[]) => unknown>(\n  callback: T | undefined,\n): T {\n  const callbackRef = React.useRef(callback);\n\n  React.useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  // https://github.com/facebook/react/issues/19240\n  return React.useMemo(\n    () => ((...args) => callbackRef.current?.(...args)) as T,\n    [],\n  );\n}\n\nexport function useDebounce<T>(value: T, delay?: number): T {\n  const [debouncedValue, setDebouncedValue] = React.useState<T>(value);\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay ?? 500);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function useDebouncedCallback<T extends (...args: never[]) => unknown>(\n  callback: T,\n  delay: number,\n) {\n  const handleCallback = useCallbackRef(callback);\n  const debounceTimerRef = React.useRef(0);\n  React.useEffect(\n    () => () => window.clearTimeout(debounceTimerRef.current),\n    [],\n  );\n\n  const setValue = React.useCallback(\n    (...args: Parameters<T>) => {\n      window.clearTimeout(debounceTimerRef.current);\n      debounceTimerRef.current = window.setTimeout(\n        () => handleCallback(...args),\n        delay,\n      );\n    },\n    [handleCallback, delay],\n  );\n\n  return setValue;\n}\n\nexport function useMediaQuery(query = \"(min-width: 640px)\") {\n  const [value, setValue] = React.useState(false);\n\n  React.useEffect(() => {\n    function onChange(event: MediaQueryListEvent) {\n      setValue(event.matches);\n    }\n\n    const result = matchMedia(query);\n    result.addEventListener(\"change\", onChange);\n    setValue(result.matches);\n\n    return () => result.removeEventListener(\"change\", onChange);\n  }, [query]);\n\n  return value;\n}\n\nexport function formatDate(\n  date: Date | string | number,\n  opts: Intl.DateTimeFormatOptions = {},\n) {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: opts.month ?? \"long\",\n    day: opts.day ?? \"numeric\",\n    year: opts.year ?? \"numeric\",\n    ...opts,\n  }).format(new Date(date));\n}\n\nconst MOBILE_BREAKPOINT = 768;\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(\n    undefined,\n  );\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    mql.addEventListener(\"change\", onChange);\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, []);\n\n  return !!isMobile;\n}\n",
    "/ui/spinner.tsx": "export const Spinner = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path d=\"M2,12A10.94,10.94,0,0,1,5,4.65c-.21-.19-.42-.36-.62-.55h0A11,11,0,0,0,12,23c.34,0,.67,0,1-.05C6,23,2,17.74,2,12Z\">\n      <animateTransform\n        attributeName=\"transform\"\n        type=\"rotate\"\n        dur=\"0.6s\"\n        values=\"0 12 12;360 12 12\"\n        repeatCount=\"indefinite\"\n      />\n    </path>\n  </svg>\n);\n",
    "/ui/button.tsx": "import type { VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cva } from \"class-variance-authority\";\nimport { Slot } from \"radix-ui\";\n\nimport { Spinner } from \"./spinner.tsx\";\nimport { cn } from \"./utils.tsx\";\n\nconst buttonVariants = cva(\n  \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive relative inline-flex shrink-0 items-center justify-center gap-2 rounded-full text-sm font-medium whitespace-nowrap transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-xs\",\n        destructive:\n          \"bg-destructive hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-white shadow-xs\",\n        outline:\n          \"bg-background hover:bg-accent hover:text-accent-foreground border shadow-xs\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-xs\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 gap-1.5 rounded-full px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-full px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n      loading: {\n        true: \"disabled:opacity-100\",\n      },\n    },\n    compoundVariants: [\n      {\n        variant: \"default\",\n        loading: true,\n        className: \"[&>:first-child]:bg-primary\",\n      },\n      {\n        variant: \"destructive\",\n        loading: true,\n        className: \"[&>:first-child]:bg-destructive\",\n      },\n      {\n        variant: \"outline\",\n        loading: true,\n        className: \"[&>:first-child]:bg-background\",\n      },\n      {\n        variant: \"secondary\",\n        loading: true,\n        className: \"[&>:first-child]:bg-secondary\",\n      },\n    ],\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Button = ({\n  className,\n  variant,\n  size,\n  asChild = false,\n  children,\n  disabled,\n  loading,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n    loading?: boolean;\n  }) => {\n  const Comp = asChild ? Slot.Root : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, loading, className }))}\n      disabled={loading ?? disabled}\n      {...props}\n    >\n      {loading && (\n        <span className=\"pointer-events-none absolute inset-0 grid place-items-center rounded-full\">\n          <Spinner className=\"size-4\" />\n        </span>\n      )}\n      <Slot.Slottable>{children}</Slot.Slottable>\n    </Comp>\n  );\n};\n\nexport { Button, buttonVariants };\n",
    "/ui/dialog.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { XIcon } from \"lucide-react\";\nimport { Dialog as DialogPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Dialog = ({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) => {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n};\n\nconst DialogTrigger = ({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) => {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\n};\n\nconst DialogPortal = ({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) => {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n};\n\nconst DialogClose = ({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) => {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\n};\n\nconst DialogOverlay = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) => {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur-sm\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst DialogContent = ({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean;\n}) => {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n};\n\nconst DialogHeader = ({ className, ...props }: React.ComponentProps<\"div\">) => {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  );\n};\n\nconst DialogFooter = ({ className, ...props }: React.ComponentProps<\"div\">) => {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst DialogTitle = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) => {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n};\n\nconst DialogDescription = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) => {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n};\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n};\n",
    "/ui/command.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { Command as CommandPrimitive } from \"cmdk\";\nimport { SearchIcon } from \"lucide-react\";\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"./dialog.tsx\";\nimport { cn } from \"./utils.tsx\";\n\nconst Command = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) => {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst CommandDialog = ({\n  title = \"Command Palette\",\n  description = \"Search for a command to run...\",\n  children,\n  className,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string;\n  description?: string;\n  className?: string;\n  showCloseButton?: boolean;\n}) => {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent\n        className={cn(\"overflow-hidden p-0\", className)}\n        showCloseButton={showCloseButton}\n      >\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst CommandInput = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) => {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n};\n\nconst CommandList = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) => {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst CommandEmpty = ({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) => {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  );\n};\n\nconst CommandGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) => {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst CommandSeparator = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) => {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn(\"bg-border -mx-1 h-px\", className)}\n      {...props}\n    />\n  );\n};\n\nconst CommandItem = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) => {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n",
    "/ui/popover.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { Popover as PopoverPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Popover = ({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) => {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />;\n};\n\nconst PopoverTrigger = ({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) => {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />;\n};\n\nconst PopoverContent = ({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) => {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className,\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  );\n};\n\nconst PopoverAnchor = ({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) => {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />;\n};\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };\n",
    "/ui/checkbox.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { CheckIcon } from \"lucide-react\";\nimport { Checkbox as CheckboxPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Checkbox = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) => {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"text-primary-foreground size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  );\n};\n\nexport { Checkbox };\n",
    "/ui/separator.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { Separator as SeparatorPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Separator = ({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) => {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport { Separator };\n",
    "/ui/calendar.tsx": "\"use client\";\n\nimport type { DayButton } from \"react-day-picker\";\nimport * as React from \"react\";\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\";\nimport { DayPicker, getDefaultClassNames } from \"react-day-picker\";\n\nimport { Button, buttonVariants } from \"./button.tsx\";\nimport { cn } from \"./utils.tsx\";\n\nconst Calendar = ({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"];\n}) => {\n  const defaultClassNames = getDefaultClassNames();\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className,\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months,\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav,\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"size-(--cell-size) p-0 select-none aria-disabled:opacity-50\",\n          defaultClassNames.button_previous,\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"size-(--cell-size) p-0 select-none aria-disabled:opacity-50\",\n          defaultClassNames.button_next,\n        ),\n        month_caption: cn(\n          \"flex h-(--cell-size) w-full items-center justify-center px-(--cell-size)\",\n          defaultClassNames.month_caption,\n        ),\n        dropdowns: cn(\n          \"flex h-(--cell-size) w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns,\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input has-focus:ring-ring/50 relative rounded-md border shadow-xs has-focus:ring-[3px]\",\n          defaultClassNames.dropdown_root,\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown,\n        ),\n        caption_label: cn(\n          \"font-medium select-none\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pr-1 pl-2 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label,\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 rounded-md text-[0.8rem] font-normal select-none\",\n          defaultClassNames.weekday,\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-(--cell-size) select-none\",\n          defaultClassNames.week_number_header,\n        ),\n        week_number: cn(\n          \"text-muted-foreground text-[0.8rem] select-none\",\n          defaultClassNames.week_number,\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full p-0 text-center select-none [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day,\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start,\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today,\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside,\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled,\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          );\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            );\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            );\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          );\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-(--cell-size) items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          );\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  );\n};\n\nconst CalendarDayButton = ({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) => {\n  const defaultClassNames = getDefaultClassNames();\n\n  const ref = React.useRef<HTMLButtonElement>(null);\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus();\n  }, [modifiers.focused]);\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport { Calendar, CalendarDayButton };\n",
    "/ui/input.tsx": "import * as React from \"react\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Input = ({\n  className,\n  type,\n  ...props\n}: React.ComponentProps<\"input\">) => {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport { Input };\n",
    "/ui/slider.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { Slider as SliderPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Slider = ({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) => {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max],\n  );\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className,\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\",\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\",\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  );\n};\n\nexport { Slider };\n",
    "/ui/switch.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { Switch as SwitchPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Switch = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) => {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\",\n        )}\n      />\n    </SwitchPrimitive.Root>\n  );\n};\n\nexport { Switch };\n",
    "/ui/tabs.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { AnimatePresence, motion } from \"motion/react\";\nimport { Tabs as TabsPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Tabs = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) => {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  );\n};\n\nconst TabsList = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) => {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst TabsTrigger = ({\n  className,\n  children,\n  isSelected,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger> & {\n  isSelected?: boolean;\n}) => {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input text-foreground dark:text-muted-foreground relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <AnimatePresence initial={false}>\n        {isSelected && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"bg-background pointer-events-none absolute inset-0 rounded-md shadow-sm\"\n            layoutId=\"selected-indicator\"\n          />\n        )}\n      </AnimatePresence>\n      <div className=\"relative\">{children}</div>\n    </TabsPrimitive.Trigger>\n  );\n};\n\nconst TabsContent = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) => {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  );\n};\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n"
  },
  "previewCode": "\"use client\";\n\nimport React, { useState } from \"react\";\n\nimport type { FiltersState } from \"./filter-package/core/types\";\nimport { DataTableFilter } from \"./_components/data-table-filter\";\nimport { createTypedDataTableFilters } from \"./filter-package\";\nimport { columnsConfig } from \"./filters\";\n\nconst usePeopleTableFilters = createTypedDataTableFilters();\n\nexport default function Preview() {\n  const [filtersState, setFiltersState] = useState<FiltersState>([]);\n\n  const { columns, filters, actions, strategy, entityName } =\n    usePeopleTableFilters({\n      strategy: \"client\",\n      data: [],\n      entityName: \"Person\",\n      columnsConfig,\n      filters: filtersState,\n      onFiltersChange: setFiltersState,\n    });\n\n  return (\n    <div className=\"flex h-screen items-center bg-stone-100 p-10\">\n      <DataTableFilter\n        filters={filters}\n        columns={columns}\n        actions={actions}\n        strategy={strategy}\n        entityName={entityName}\n      />\n    </div>\n  );\n}\n",
  "previousSlug": "expanding-header-menu",
  "nextSlug": "infinite-grid"
},
  "infinite-grid": {
  "name": "Infinite Grid",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/infinite-grid/infinite-grid.mp4",
  "coverType": "video",
  "tags": [
    "design",
    "geometric",
    "grids"
  ],
  "slug": "infinite-grid",
  "type": "local",
  "dependencies": {
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/infinite-grid.tsx": "import React, { Component } from \"react\";\n\n// Grid physics constants\nconst MIN_VELOCITY = 0.2;\nconst UPDATE_INTERVAL = 16;\nconst VELOCITY_HISTORY_SIZE = 5;\nconst FRICTION = 0.9;\nconst VELOCITY_THRESHOLD = 0.3;\n\n// Custom debounce implementation\nfunction debounce<T extends (...args: unknown[]) => unknown>(\n  func: T,\n  wait: number,\n) {\n  let timeoutId: ReturnType<typeof setTimeout> | undefined = undefined;\n\n  const debouncedFn = function (...args: Parameters<T>) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      func(...args);\n      timeoutId = undefined;\n    }, wait);\n  };\n\n  debouncedFn.cancel = function () {\n    clearTimeout(timeoutId);\n    timeoutId = undefined;\n  };\n\n  return debouncedFn;\n}\n\n// Custom throttle implementation\nfunction throttle<T extends (...args: unknown[]) => unknown>(\n  func: T,\n  limit: number,\n  options: { leading?: boolean; trailing?: boolean } = {},\n) {\n  let lastCall = 0;\n  let timeoutId: ReturnType<typeof setTimeout> | undefined = undefined;\n  const { leading = true, trailing = true } = options;\n\n  const throttledFn = function (...args: Parameters<T>) {\n    const now = Date.now();\n\n    if (!lastCall && !leading) {\n      lastCall = now;\n    }\n\n    const remaining = limit - (now - lastCall);\n\n    if (remaining <= 0 || remaining > limit) {\n      clearTimeout(timeoutId);\n      timeoutId = undefined;\n      lastCall = now;\n      func(...args);\n    } else if (!timeoutId && trailing) {\n      timeoutId = setTimeout(() => {\n        lastCall = leading ? Date.now() : 0;\n        timeoutId = undefined;\n        func(...args);\n      }, remaining);\n    }\n  };\n\n  throttledFn.cancel = function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = undefined;\n    }\n  };\n\n  return throttledFn;\n}\n\nfunction getDistance(p1: Position, p2: Position) {\n  const dx = p2.x - p1.x;\n  const dy = p2.y - p1.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\ntype Position = {\n  x: number;\n  y: number;\n};\n\ntype GridItem = {\n  position: Position;\n  gridIndex: number;\n};\n\ntype State = {\n  offset: Position;\n  isDragging: boolean;\n  startPos: Position;\n  restPos: Position;\n  velocity: Position;\n  gridItems: GridItem[];\n  isMoving: boolean;\n  lastMoveTime: number;\n  velocityHistory: Position[];\n};\n\nexport type GridItemConfig = {\n  isMoving: boolean;\n  position: Position;\n  gridIndex: number;\n};\n\nexport type InfiniteGridProps = {\n  gridSize: number;\n  renderItem: (itemConfig: GridItemConfig) => React.ReactNode;\n  className?: string;\n  initialPosition?: Position;\n};\n\nexport class InfiniteGrid extends Component<InfiniteGridProps, State> {\n  private containerRef: React.RefObject<HTMLElement | null>;\n  private lastPos: Position;\n  private animationFrame: number | null;\n  private isComponentMounted: boolean;\n  private lastUpdateTime: number;\n  private debouncedUpdateGridItems: ReturnType<typeof throttle>;\n\n  constructor(props: InfiniteGridProps) {\n    super(props);\n    const offset = this.props.initialPosition || { x: 0, y: 0 };\n    this.state = {\n      offset: { ...offset },\n      restPos: { ...offset },\n      startPos: { ...offset },\n      velocity: { x: 0, y: 0 },\n      isDragging: false,\n      gridItems: [],\n      isMoving: false,\n      lastMoveTime: 0,\n      velocityHistory: [],\n    };\n    this.containerRef = React.createRef();\n    this.lastPos = { x: 0, y: 0 };\n    this.animationFrame = null;\n    this.isComponentMounted = false;\n    this.lastUpdateTime = 0;\n    this.debouncedUpdateGridItems = throttle(\n      this.updateGridItems,\n      UPDATE_INTERVAL,\n      {\n        leading: true,\n        trailing: true,\n      },\n    );\n  }\n\n  componentDidMount() {\n    this.isComponentMounted = true;\n    this.updateGridItems();\n\n    // Add non-passive event listener\n    if (this.containerRef.current) {\n      this.containerRef.current.addEventListener(\"wheel\", this.handleWheel, {\n        passive: false,\n      });\n      this.containerRef.current.addEventListener(\n        \"touchmove\",\n        this.handleTouchMove,\n        { passive: false },\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.isComponentMounted = false;\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n    }\n    this.debouncedUpdateGridItems.cancel();\n\n    // Remove event listeners\n    if (this.containerRef.current) {\n      this.containerRef.current.removeEventListener(\"wheel\", this.handleWheel);\n      this.containerRef.current.removeEventListener(\n        \"touchmove\",\n        this.handleTouchMove,\n      );\n    }\n  }\n\n  public publicGetCurrentPosition = () => {\n    return this.state.offset;\n  };\n\n  private calculateVisiblePositions = (): Position[] => {\n    if (!this.containerRef.current) return [];\n\n    const rect = this.containerRef.current.getBoundingClientRect();\n    const width = rect.width;\n    const height = rect.height;\n\n    // Calculate grid cells needed to fill container\n    const cellsX = Math.ceil(width / this.props.gridSize);\n    const cellsY = Math.ceil(height / this.props.gridSize);\n\n    // Calculate center position based on offset\n    const centerX = -Math.round(this.state.offset.x / this.props.gridSize);\n    const centerY = -Math.round(this.state.offset.y / this.props.gridSize);\n\n    const positions: Position[] = [];\n    const halfCellsX = Math.ceil(cellsX / 2);\n    const halfCellsY = Math.ceil(cellsY / 2);\n\n    for (let y = centerY - halfCellsY; y <= centerY + halfCellsY; y++) {\n      for (let x = centerX - halfCellsX; x <= centerX + halfCellsX; x++) {\n        positions.push({ x, y });\n      }\n    }\n\n    return positions;\n  };\n\n  private getItemIndexForPosition = (x: number, y: number): number => {\n    // Special case for center\n    if (x === 0 && y === 0) return 0;\n\n    // Determine which layer of the spiral we're in\n    const layer = Math.max(Math.abs(x), Math.abs(y));\n\n    // Calculate the size of all inner layers\n    const innerLayersSize = Math.pow(2 * layer - 1, 2);\n\n    // Calculate position within current layer\n    let positionInLayer = 0;\n\n    if (y === 0 && x === layer) {\n      // Starting position (middle right)\n      positionInLayer = 0;\n    } else if (y < 0 && x === layer) {\n      // Right side, bottom half\n      positionInLayer = -y;\n    } else if (y === -layer && x > -layer) {\n      // Bottom side\n      positionInLayer = layer + (layer - x);\n    } else if (x === -layer && y < layer) {\n      // Left side\n      positionInLayer = 3 * layer + (layer + y);\n    } else if (y === layer && x < layer) {\n      // Top side\n      positionInLayer = 5 * layer + (layer + x);\n    } else {\n      // Right side, top half (y > 0 && x === layer)\n      positionInLayer = 7 * layer + (layer - y);\n    }\n\n    const index = innerLayersSize + positionInLayer;\n    return index;\n  };\n\n  private debouncedStopMoving = debounce(() => {\n    this.setState({ isMoving: false, restPos: { ...this.state.offset } });\n  }, 200);\n\n  private updateGridItems = () => {\n    if (!this.isComponentMounted) return;\n\n    const positions = this.calculateVisiblePositions();\n    const newItems = positions.map((position) => {\n      const gridIndex = this.getItemIndexForPosition(position.x, position.y);\n      return {\n        position,\n        gridIndex,\n      };\n    });\n\n    const distanceFromRest = getDistance(this.state.offset, this.state.restPos);\n\n    this.setState({ gridItems: newItems, isMoving: distanceFromRest > 5 });\n\n    this.debouncedStopMoving();\n  };\n\n  private animate = () => {\n    if (!this.isComponentMounted) return;\n\n    const currentTime = performance.now();\n    const deltaTime = currentTime - this.lastUpdateTime;\n\n    if (deltaTime >= UPDATE_INTERVAL) {\n      const { velocity } = this.state;\n      const speed = Math.sqrt(\n        velocity.x * velocity.x + velocity.y * velocity.y,\n      );\n\n      if (speed < MIN_VELOCITY) {\n        this.setState({ velocity: { x: 0, y: 0 } });\n        return;\n      }\n\n      // Apply non-linear deceleration based on speed\n      let deceleration = FRICTION;\n      if (speed < VELOCITY_THRESHOLD) {\n        // Apply stronger deceleration at lower speeds for more natural stopping\n        deceleration = FRICTION * (speed / VELOCITY_THRESHOLD);\n      }\n\n      this.setState(\n        (prevState) => ({\n          offset: {\n            x: prevState.offset.x + prevState.velocity.x,\n            y: prevState.offset.y + prevState.velocity.y,\n          },\n          velocity: {\n            x: prevState.velocity.x * deceleration,\n            y: prevState.velocity.y * deceleration,\n          },\n        }),\n        this.debouncedUpdateGridItems,\n      );\n\n      this.lastUpdateTime = currentTime;\n    }\n\n    this.animationFrame = requestAnimationFrame(this.animate);\n  };\n\n  private handleDown = (p: Position) => {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n    }\n\n    this.setState({\n      isDragging: true,\n      startPos: {\n        x: p.x - this.state.offset.x,\n        y: p.y - this.state.offset.y,\n      },\n      velocity: { x: 0, y: 0 },\n    });\n\n    this.lastPos = { x: p.x, y: p.y };\n  };\n  private handleMove = (p: Position) => {\n    if (!this.state.isDragging) return;\n\n    const currentTime = performance.now();\n    const timeDelta = currentTime - this.state.lastMoveTime;\n\n    // Calculate raw velocity based on position and time\n    const rawVelocity = {\n      x: (p.x - this.lastPos.x) / (timeDelta || 1),\n      y: (p.y - this.lastPos.y) / (timeDelta || 1),\n    };\n\n    // Add to velocity history and maintain fixed size\n    const velocityHistory = [...this.state.velocityHistory, rawVelocity];\n    if (velocityHistory.length > VELOCITY_HISTORY_SIZE) {\n      velocityHistory.shift();\n    }\n\n    // Calculate smoothed velocity using moving average\n    const smoothedVelocity = velocityHistory.reduce(\n      (acc, vel) => ({\n        x: acc.x + vel.x / velocityHistory.length,\n        y: acc.y + vel.y / velocityHistory.length,\n      }),\n      { x: 0, y: 0 },\n    );\n\n    this.setState(\n      {\n        velocity: smoothedVelocity,\n        offset: {\n          x: p.x - this.state.startPos.x,\n          y: p.y - this.state.startPos.y,\n        },\n        lastMoveTime: currentTime,\n        velocityHistory,\n      },\n      this.updateGridItems,\n    );\n\n    this.lastPos = { x: p.x, y: p.y };\n  };\n  private handleUp = () => {\n    this.setState({ isDragging: false });\n    this.animationFrame = requestAnimationFrame(this.animate);\n  };\n\n  private handleMouseDown = (e: React.MouseEvent) => {\n    this.handleDown({\n      x: e.clientX,\n      y: e.clientY,\n    });\n  };\n\n  private handleMouseMove = (e: React.MouseEvent) => {\n    e.preventDefault();\n    this.handleMove({\n      x: e.clientX,\n      y: e.clientY,\n    });\n  };\n\n  private handleMouseUp = () => {\n    this.handleUp();\n  };\n\n  private handleTouchStart = (e: React.TouchEvent) => {\n    const touch = e.touches[0];\n\n    if (!touch) return;\n\n    this.handleDown({\n      x: touch.clientX,\n      y: touch.clientY,\n    });\n  };\n\n  private handleTouchMove = (e: TouchEvent) => {\n    const touch = e.touches[0];\n\n    if (!touch) return;\n\n    e.preventDefault();\n    this.handleMove({\n      x: touch.clientX,\n      y: touch.clientY,\n    });\n  };\n\n  private handleTouchEnd = () => {\n    this.handleUp();\n  };\n\n  private handleWheel = (e: WheelEvent) => {\n    e.preventDefault();\n\n    // Get the scroll deltas\n    const deltaX = e.deltaX;\n    const deltaY = e.deltaY;\n\n    this.setState(\n      (prevState) => ({\n        offset: {\n          x: prevState.offset.x - deltaX,\n          y: prevState.offset.y - deltaY,\n        },\n        velocity: { x: 0, y: 0 }, // Reset velocity when scrolling\n      }),\n      this.debouncedUpdateGridItems,\n    );\n  };\n\n  render() {\n    const { offset, isDragging, gridItems, isMoving } = this.state;\n    const { gridSize, className } = this.props;\n\n    // Get container dimensions\n    const containerRect = this.containerRef.current?.getBoundingClientRect();\n    const containerWidth = containerRect?.width || 0;\n    const containerHeight = containerRect?.height || 0;\n\n    return (\n      <div\n        ref={this.containerRef as React.RefObject<HTMLDivElement>}\n        className={className}\n        style={{\n          position: \"absolute\",\n          inset: 0,\n          touchAction: \"none\",\n          overflow: \"hidden\",\n          cursor: isDragging ? \"grabbing\" : \"grab\",\n        }}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onMouseUp={this.handleMouseUp}\n        onMouseLeave={this.handleMouseUp}\n        onTouchStart={this.handleTouchStart}\n        onTouchEnd={this.handleTouchEnd}\n        onTouchCancel={this.handleTouchEnd}\n      >\n        <div\n          style={{\n            position: \"absolute\",\n            inset: 0,\n            transform: `translate3d(${offset.x}px, ${offset.y}px, 0)`,\n            willChange: \"transform\",\n          }}\n        >\n          {gridItems.map((item) => {\n            const x = item.position.x * gridSize + containerWidth / 2;\n            const y = item.position.y * gridSize + containerHeight / 2;\n\n            return (\n              <div\n                key={`${item.position.x}-${item.position.y}`}\n                style={{\n                  position: \"absolute\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  userSelect: \"none\",\n                  width: gridSize,\n                  height: gridSize,\n                  transform: `translate3d(${x}px, ${y}px, 0)`,\n                  marginLeft: `-${gridSize / 2}px`,\n                  marginTop: `-${gridSize / 2}px`,\n                  willChange: \"transform\",\n                }}\n              >\n                {this.props.renderItem({\n                  gridIndex: item.gridIndex,\n                  position: item.position,\n                  isMoving,\n                })}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n"
  },
  "previewCode": "import React from \"react\";\nimport { motion } from \"motion/react\";\n\nimport { GridItemConfig, InfiniteGrid } from \"./infinite-grid\";\n\nconst Cell = ({ gridIndex }: GridItemConfig) => (\n  <motion.div\n    className=\"absolute inset-1 flex items-center justify-center\"\n    initial={{ opacity: 0, scale: 0 }}\n    animate={{ opacity: 1, scale: 1 }}\n    transition={{\n      duration: 0.4,\n      scale: { type: \"spring\", visualDuration: 0.4, bounce: 0.5 },\n    }}\n  >\n    <img\n      className=\"pointer-events-none size-20\"\n      src={`https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/illustrations/blueprint/%20${(gridIndex % 100) + 1}.svg`}\n    />\n  </motion.div>\n);\n\nconst Preview = () => {\n  return (\n    <div className=\"h-screen w-screen bg-blue-50\">\n      <InfiniteGrid gridSize={150} renderItem={Cell} />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "filter-bar",
  "nextSlug": "ios-volume-slider"
},
  "ios-volume-slider": {
  "name": "iOS Volume Slider",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/ios-volume-slider/ios-volume-slider.mp4",
  "coverType": "video",
  "tags": [
    "entertainment",
    "skeuomorphism",
    "video-audio"
  ],
  "slug": "ios-volume-slider",
  "type": "local",
  "dependencies": {
    "@radix-ui/react-slider": "^1.3.6",
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/ios-volume-slider.tsx": "import React, { useRef, useState } from \"react\";\nimport * as Slider from \"@radix-ui/react-slider\";\nimport {\n  animate,\n  motion,\n  useMotionValue,\n  useMotionValueEvent,\n  useTransform,\n} from \"motion/react\";\n\nfunction decay(value: number, max: number) {\n  let entry = value / max;\n  let sigmoid = 2 / (1 + Math.exp(-entry)) - 1;\n  let exit = sigmoid * max;\n\n  return exit;\n}\n\nexport function Volume() {\n  const [value, setValue] = useState([0]);\n  const [position, setPosition] = useState<\"top\" | \"middle\" | \"bottom\">(\n    \"middle\",\n  );\n\n  const clientY = useMotionValue(0);\n  const y = useMotionValue(1);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useMotionValueEvent(clientY, \"change\", (latestValue) => {\n    if (!ref.current) return;\n\n    let overflow = latestValue - ref.current.getBoundingClientRect().top;\n\n    if (overflow < 0) {\n      y.jump(decay(overflow, 50));\n      setPosition(\"bottom\");\n    } else if (overflow > 200) {\n      y.jump(decay(overflow - 200, 50));\n      setPosition(\"top\");\n    } else {\n      y.jump(1);\n      setPosition(\"middle\");\n    }\n  });\n\n  return (\n    <div className=\"flex h-96 flex-col items-center justify-center gap-12\">\n      <Slider.Root\n        ref={ref}\n        className=\"relative flex h-[200px] w-[60px] touch-none flex-col items-center select-none\"\n        value={value}\n        onValueChange={setValue}\n        max={100}\n        step={1}\n        orientation=\"vertical\"\n        asChild\n      >\n        <motion.div\n          style={{\n            scaleY: useTransform(() => (200 - y.get()) / 200),\n            transformOrigin:\n              position === \"top\"\n                ? \"bottom\"\n                : position === \"bottom\"\n                  ? \"bottom\"\n                  : \"center\",\n          }}\n          onPointerMove={(events) => {\n            if (events.buttons > 0) {\n              clientY.set(events.clientY);\n            }\n          }}\n          onLostPointerCapture={() => {\n            animate(y, 1, { type: \"spring\", bounce: 0.5 });\n          }}\n        >\n          <Slider.Track className=\"relative w-full grow overflow-hidden rounded-xl bg-neutral-800\">\n            <Slider.Range className=\"absolute w-full bg-white\" />\n          </Slider.Track>\n        </motion.div>\n      </Slider.Root>\n\n      <div className=\"flex w-96 flex-col items-center gap-1\">\n        <span className=\"text-neutral-300\">value: {value[0]}</span>\n        <span className=\"text-neutral-300\">\n          y:{\" \"}\n          <motion.span>{useTransform(() => Math.floor(y.get()))}</motion.span>\n        </span>\n      </div>\n    </div>\n  );\n}\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { Volume } from \"./ios-volume-slider\";\n\nconst Preview = () => {\n  return (\n    <main className=\"flex h-dvh items-center justify-center bg-neutral-900\">\n      <Volume />\n    </main>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "infinite-grid",
  "nextSlug": "light-dark-toggle"
},
  "light-dark-toggle": {
  "name": "Light/Dark Toggle",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/light-dark-toggle/light-dark-toggle.mp4",
  "coverType": "video",
  "tags": [
    "utilities",
    "minimal",
    "inputs"
  ],
  "slug": "light-dark-toggle",
  "type": "local",
  "dependencies": {
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/light-dark-toggle.tsx": "import React from \"react\";\nimport { motion } from \"motion/react\";\n\ntype LightDarkToggleProps = {\n  isLight: boolean;\n};\n\nexport const LightDarkToggle = ({ isLight }: LightDarkToggleProps) => {\n  return (\n    <svg\n      viewBox=\"0 0 18 18\"\n      style={{ transform: isLight ? \"rotate(90deg)\" : \"rotate(40deg)\" }}\n      className=\"size-6 overflow-visible transition-transform duration-500\"\n    >\n      <mask id=\"moon-mask-main-nav\">\n        <rect x=\"0\" y=\"0\" width=\"18\" height=\"18\" fill=\"#FFF\" />\n        <motion.circle\n          animate={{ cx: isLight ? 25 : 10 }}\n          cy=\"2\"\n          r=\"8\"\n          fill=\"black\"\n        />\n      </mask>\n      <motion.circle\n        cx=\"9\"\n        cy=\"9\"\n        fill=\"currentColor\"\n        mask=\"url(#moon-mask-main-nav)\"\n        animate={{ r: isLight ? 5 : 8 }}\n      />\n      <g>\n        <motion.circle\n          cx=\"17\"\n          cy=\"9\"\n          r=\"1.5\"\n          fill=\"currentColor\"\n          animate={{ scale: isLight ? 1 : 0 }}\n        />\n        <motion.circle\n          cx=\"13\"\n          cy=\"15.928203230275509\"\n          r=\"1.5\"\n          fill=\"currentColor\"\n          animate={{ scale: isLight ? 1 : 0 }}\n          transition={{ delay: isLight ? 0.05 : 0 }}\n        />\n        <motion.circle\n          cx=\"5.000000000000002\"\n          cy=\"15.92820323027551\"\n          r=\"1.5\"\n          fill=\"currentColor\"\n          animate={{ scale: isLight ? 1 : 0 }}\n          transition={{ delay: isLight ? 0.1 : 0 }}\n        />\n        <motion.circle\n          cx=\"1\"\n          cy=\"9.000000000000002\"\n          r=\"1.5\"\n          fill=\"currentColor\"\n          animate={{ scale: isLight ? 1 : 0 }}\n          transition={{ delay: isLight ? 0.15 : 0 }}\n        />\n        <motion.circle\n          cx=\"4.9999999999999964\"\n          cy=\"2.071796769724492\"\n          r=\"1.5\"\n          fill=\"currentColor\"\n          animate={{ scale: isLight ? 1 : 0 }}\n          transition={{ delay: isLight ? 0.2 : 0 }}\n        />\n        <motion.circle\n          cx=\"13\"\n          cy=\"2.0717967697244912\"\n          r=\"1.5\"\n          fill=\"currentColor\"\n          animate={{ scale: isLight ? 1 : 0 }}\n          transition={{ delay: isLight ? 0.25 : 0 }}\n        />\n      </g>\n    </svg>\n  );\n};\n"
  },
  "previewCode": "import React, { useState } from \"react\";\n\nimport { LightDarkToggle } from \"./light-dark-toggle\";\n\nconst Preview = () => {\n  const [isLight, setIsLight] = useState(true);\n\n  return (\n    <div\n      className={`main flex h-dvh items-center justify-center ${isLight ? \"bg-stone-300\" : \"bg-stone-900\"}`}\n    >\n      <button\n        className={`grid size-12 place-items-center rounded-xl bg-gradient-to-t shadow-lg ${isLight ? \"from-[#f8fafc] to-[#f1f5f9] text-stone-950\" : \"from-[#020617] to-[#0F172A] text-stone-50\"}`}\n        onClick={() => setIsLight(!isLight)}\n      >\n        <LightDarkToggle isLight={isLight} />\n      </button>\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "ios-volume-slider",
  "nextSlug": "like-button"
},
  "like-button": {
  "name": "Like Button",
  "description": "Twitter style like button",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/like-button/like-button.mp4",
  "coverType": "video",
  "tags": [
    "social",
    "colorful",
    "buttons-and-links"
  ],
  "slug": "like-button",
  "type": "local",
  "dependencies": {
    "@number-flow/react": "^0.5.10",
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/like-button.tsx": "\"use client\";\n\nimport React, { useRef, useState } from \"react\";\nimport NumberFlow from \"@number-flow/react\";\nimport { motion } from \"motion/react\";\n\nconst CircleAnimation = () => {\n  const CIRCLE_RADIUS = 20;\n\n  return (\n    <svg\n      className=\"pointer-events-none absolute -top-3 -left-3\"\n      style={{\n        width: CIRCLE_RADIUS * 2,\n        height: CIRCLE_RADIUS * 2,\n      }}\n    >\n      <motion.circle\n        cx={CIRCLE_RADIUS}\n        cy={CIRCLE_RADIUS}\n        r={CIRCLE_RADIUS - 2}\n        fill=\"none\"\n        initial={{\n          scale: 0,\n          stroke: \"#E5214A\",\n          strokeWidth: CIRCLE_RADIUS * 2,\n        }}\n        animate={{\n          scale: 1,\n          stroke: \"#CC8EF5\",\n          strokeWidth: 0,\n        }}\n        transition={{\n          duration: 0.4,\n          ease: [0.33, 1, 0.68, 1], // cubic-out\n        }}\n      />\n    </svg>\n  );\n};\n\n// Burst animation with particles\nconst BurstAnimation = () => {\n  // Colors for particles with from/to transitions\n  const colorPairs = [\n    { from: \"#9EC9F5\", to: \"#9ED8C6\" },\n    { from: \"#91D3F7\", to: \"#9AE4CF\" },\n    { from: \"#DC93CF\", to: \"#E3D36B\" },\n    { from: \"#CF8EEF\", to: \"#CBEB98\" },\n    { from: \"#87E9C6\", to: \"#1FCC93\" },\n    { from: \"#A7ECD0\", to: \"#9AE4CF\" },\n    { from: \"#87E9C6\", to: \"#A635D9\" },\n    { from: \"#D58EB3\", to: \"#E0B6F5\" },\n    { from: \"#F48BA2\", to: \"#CF8EEF\" },\n    { from: \"#91D3F7\", to: \"#A635D9\" },\n    { from: \"#CF8EEF\", to: \"#CBEB98\" },\n    { from: \"#87E9C6\", to: \"#A635D9\" },\n    { from: \"#9EC9F5\", to: \"#9ED8C6\" },\n    { from: \"#91D3F7\", to: \"#9AE4CF\" },\n  ];\n\n  return (\n    <div className=\"pointer-events-none absolute -top-3 -left-3 grid size-10 place-items-center\">\n      {colorPairs.map((colors, index) => (\n        <Particle\n          key={index}\n          fromColor={colors.from}\n          toColor={colors.to}\n          index={index}\n          totalParticles={colorPairs.length}\n        />\n      ))}\n    </div>\n  );\n};\n\nconst BURST_RADIUS = 32;\nconst START_RADIUS = 4;\nconst PATH_SCALE_FACTOR = 0.8;\n\n// Particle component for burst animation\nconst Particle = ({\n  fromColor,\n  toColor,\n  index,\n  totalParticles,\n}: {\n  fromColor: string;\n  toColor: string;\n  index: number;\n  totalParticles: number;\n}) => {\n  // Calculate angle based on index with 45 degree offset\n  const angle = (index / totalParticles) * 360 + 45;\n  const radians = (angle * Math.PI) / 180;\n\n  // Add randomness to the burst distance (15%)\n  const randomFactor = 0.85 + Math.random() * 0.3;\n  const burstDistance = BURST_RADIUS * randomFactor;\n\n  // Randomize duration between 500-700ms\n  const duration = 500 + Math.random() * 200;\n\n  // Calculate the degree shift (13 degrees in radians)\n  const degreeShift = (13 * Math.PI) / 180;\n\n  return (\n    <motion.div\n      className=\"pointer-events-none absolute size-1.5 rounded-full\"\n      style={{ backgroundColor: fromColor, opacity: 0 }}\n      initial={{\n        opacity: 0,\n        scale: 1,\n        x: Math.cos(radians) * START_RADIUS * PATH_SCALE_FACTOR,\n        y: Math.sin(radians) * START_RADIUS * PATH_SCALE_FACTOR,\n        backgroundColor: fromColor,\n      }}\n      animate={{\n        opacity: [0, 1, 1, 0],\n        x: Math.cos(radians + degreeShift) * burstDistance * PATH_SCALE_FACTOR,\n        y: Math.sin(radians + degreeShift) * burstDistance * PATH_SCALE_FACTOR,\n        scale: 0,\n        backgroundColor: toColor,\n      }}\n      transition={{\n        opacity: {\n          times: [0, 0.01, 0.99, 1],\n          duration: duration / 1000,\n          delay: 0.4,\n        },\n        x: {\n          duration: duration / 1000,\n          ease: [0.23, 1, 0.32, 1], // quint.out for movement\n          delay: 0.3,\n        },\n        y: {\n          duration: duration / 1000,\n          ease: [0.23, 1, 0.32, 1], // quint.out for movement\n          delay: 0.3,\n        },\n        scale: {\n          duration: duration / 1000,\n          ease: [0.55, 0.085, 0.68, 0.53], // quad.in for scaling\n          delay: 0.3,\n        },\n        backgroundColor: {\n          duration: duration / 1000,\n          delay: 0.3,\n        },\n      }}\n    />\n  );\n};\n\nexport const LikeButton = () => {\n  const [likeCount, setLikeCount] = useState(0);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const iconButtonRef = useRef<null | HTMLButtonElement>(null);\n\n  const toggleLike = () => {\n    if (isLiked) {\n      setLikeCount(likeCount - 1);\n      setIsLiked(false);\n    } else {\n      setLikeCount(likeCount + 1);\n      setIsLiked(true);\n      setIsAnimating(true);\n    }\n  };\n\n  return (\n    <button\n      ref={iconButtonRef}\n      type=\"button\"\n      className=\"hover:bg-accent relative flex h-8 cursor-pointer items-center gap-1.5 rounded-lg p-2 transition\"\n      onClick={toggleLike}\n    >\n      <div className=\"relative\">\n        {isAnimating && <CircleAnimation />}\n        {isAnimating && <BurstAnimation />}\n        {isAnimating ? (\n          <motion.svg\n            key=\"animating-heart\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{\n              type: \"spring\",\n              stiffness: 300,\n              damping: 10,\n              delay: 0.3,\n            }}\n            onAnimationComplete={() => setIsAnimating(false)}\n            className=\"text-red-500\"\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            fill=\"currentColor\"\n          >\n            <path d=\"m18.199 2.04c-2.606-.284-4.262.961-6.199 3.008-2.045-2.047-3.593-3.292-6.199-3.008-3.544.388-6.321 4.43-5.718 7.96.966 5.659 5.944 9 11.917 12 5.973-3 10.951-6.341 11.917-12 .603-3.53-2.174-7.572-5.718-7.96z\" />\n          </motion.svg>\n        ) : (\n          <svg\n            className={`${isLiked ? \"text-red-500\" : \"text-inherit\"}`}\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            fill=\"currentColor\"\n          >\n            <path d=\"m18.199 2.04c-2.606-.284-4.262.961-6.199 3.008-2.045-2.047-3.593-3.292-6.199-3.008-3.544.388-6.321 4.43-5.718 7.96.966 5.659 5.944 9 11.917 12 5.973-3 10.951-6.341 11.917-12 .603-3.53-2.174-7.572-5.718-7.96z\" />\n          </svg>\n        )}\n      </div>\n      <span className=\"min-w-[0.75rem]\">\n        <NumberFlow value={likeCount} />\n        <span className=\"sr-only\">\n          {\" \"}\n          likes, click to {isLiked ? \"unlike\" : \"like\"}\n        </span>\n      </span>\n    </button>\n  );\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { LikeButton } from \"./like-button\";\n\nconst Preview = () => {\n  return (\n    <div className=\"flex h-screen items-center justify-center text-gray-400\">\n      <LikeButton />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "light-dark-toggle",
  "nextSlug": "line-chart"
},
  "line-chart": {
  "name": "Line Chart",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/line-chart/line-chart.mp4",
  "coverType": "video",
  "tags": [
    "finance",
    "minimal",
    "effects"
  ],
  "defaultSize": "full",
  "slug": "line-chart",
  "type": "remote",
  "iframeUrl": "https://covid-19.kyh.io",
  "sourceUrl": "https://github.com/kyh/kyh.io/tree/main/apps/covid-19",
  "previousSlug": "like-button",
  "nextSlug": "radial-slider"
},
  "radial-slider": {
  "name": "Radial Slider",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/radial-slider/radial-slider.mp4",
  "coverType": "video",
  "tags": [
    "productivity",
    "cyberpunk",
    "inputs"
  ],
  "slug": "radial-slider",
  "type": "local",
  "dependencies": {
    "@number-flow/react": "^0.5.10",
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/radial-slider.tsx": "import React, { useRef, useState } from \"react\";\nimport NumberFlow from \"@number-flow/react\";\nimport {\n  animate,\n  motion,\n  useMotionValue,\n  useMotionValueEvent,\n} from \"motion/react\";\n\ninterface RadialSliderProps {\n  value: number;\n  onChange: (value: number) => void;\n  maxValue?: number;\n}\n\nexport const RadialSlider = ({\n  onChange,\n  maxValue = 100,\n}: RadialSliderProps) => {\n  const motionX = useMotionValue(0);\n  const rotate = useMotionValue(0);\n  const accumulatedRotation = useRef(0);\n\n  useMotionValueEvent(motionX, \"change\", (latest) => {\n    rotate.set(accumulatedRotation.current + latest / 5);\n  });\n\n  return (\n    <>\n      <motion.div\n        drag=\"x\"\n        dragConstraints={{ left: 0, right: 0 }}\n        dragElastic={0}\n        onDrag={(event, info) => {\n          motionX.set(info.offset.x);\n\n          const currentRotation = rotate.get();\n\n          const snapAngle = 360 / maxValue;\n          let normalizedRotation = currentRotation;\n          normalizedRotation = ((normalizedRotation % 360) + 360) % 360;\n          const nearestMultiple =\n            Math.round(normalizedRotation / snapAngle) * snapAngle;\n\n          const topIndex = (maxValue - nearestMultiple / snapAngle) % maxValue;\n          onChange(Math.floor(topIndex));\n        }}\n        onDragEnd={() => {\n          const currentRotation = rotate.get();\n\n          const snapAngle = 360 / maxValue;\n          let normalizedRotation = currentRotation;\n          normalizedRotation = ((normalizedRotation % 360) + 360) % 360;\n          const nearestMultiple =\n            Math.round(normalizedRotation / snapAngle) * snapAngle;\n\n          const fullRotations = Math.floor(currentRotation / 360) * 360;\n          const finalRotation = fullRotations + nearestMultiple;\n\n          accumulatedRotation.current = finalRotation;\n\n          animate(rotate, finalRotation, {\n            type: \"spring\",\n            stiffness: 300,\n            damping: 30,\n          });\n        }}\n        style={{ rotate }}\n        className=\"relative aspect-square w-full cursor-grab rounded-full bg-transparent active:cursor-grabbing\"\n      >\n        {Array.from({ length: maxValue }).map((_, i) => (\n          <div\n            key={i}\n            data-index={i}\n            className=\"absolute inset-0 flex justify-center overflow-hidden rounded-full\"\n            style={{\n              transform: `rotate(${i * (360 / maxValue)}deg)`,\n            }}\n          >\n            <div className=\"absolute h-8 w-0.5 bg-gray-200\" />\n          </div>\n        ))}\n      </motion.div>\n      <div className=\"pointer-events-none absolute right-0 bottom-0 left-0 z-10 h-[calc(50%+1rem)] bg-gradient-to-r from-blue-500 to-yellow-500 mix-blend-multiply\" />\n    </>\n  );\n};\n"
  },
  "previewCode": "import React, { useState } from \"react\";\nimport NumberFlow from \"@number-flow/react\";\n\nimport { RadialSlider } from \"./radial-slider\";\n\nconst Preview = () => {\n  const [value, setValue] = useState(0);\n\n  return (\n    <main className=\"flex h-dvh items-center justify-center bg-zinc-900 p-5\">\n      <div className=\"relative h-36 w-96 overflow-hidden rounded-3xl bg-black p-4 shadow-2xl\">\n        <div className=\"pointer-events-none absolute right-0 bottom-0 left-0 z-30 h-[20%] bg-gradient-to-b from-transparent to-black\" />\n        <div className=\"mb-6 flex items-center justify-center text-white\">\n          <NumberFlow value={value} className=\"text-xl\" />\n        </div>\n        <div className=\"pointer-events-none absolute left-1/2 z-20 h-full w-1 -translate-x-1/2 -translate-y-3 rounded-full bg-white\" />\n        <RadialSlider value={value} onChange={setValue} />\n      </div>\n    </main>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "line-chart",
  "nextSlug": "sidebar"
},
  "sidebar": {
  "name": "Resizable Sidebar",
  "description": "A shadcn-inspired application sidebar with a draggable resize handle.",
  "coverUrl": "",
  "coverType": "video",
  "tags": [
    "layout",
    "sidebar"
  ],
  "slug": "sidebar",
  "type": "local",
  "dependencies": {
    "lucide-react": "^0.544.0",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/dashboard.tsx": "import React from \"react\";\n\nexport const Dashboard = () => {\n  return (\n    <div>\n      {/* Header Section */}\n      <div className=\"border-b border-[#EEEFF1]\">\n        <div className=\"flex items-center justify-between pt-3 pr-[19px] pb-[11px] pl-4\">\n          <div className=\"flex items-center gap-x-[7px]\">\n            <div className=\"h-5 w-20 rounded bg-gray-200\"></div>\n            <div className=\"size-4 rounded-full bg-gray-200\"></div>\n          </div>\n          <div className=\"flex items-center gap-x-[26px]\">\n            <div className=\"flex\">\n              <div className=\"w-4\">\n                <div className=\"size-6 rounded-full bg-gray-200\"></div>\n              </div>\n              <div className=\"w-4\">\n                <div className=\"size-6 rounded-full bg-gray-200\"></div>\n              </div>\n              <div className=\"w-4\">\n                <div className=\"size-6 rounded-full bg-gray-200\"></div>\n              </div>\n              <div className=\"w-4\">\n                <div className=\"size-6 rounded-full bg-gray-200\"></div>\n              </div>\n            </div>\n            <div className=\"size-4 rounded bg-gray-200\"></div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filter Section */}\n      <div className=\"border-b border-[#EEEFF1]\">\n        <div className=\"flex items-center justify-between px-3 pt-2.5 pb-[9px]\">\n          <div className=\"h-5 w-24 rounded bg-gray-200\"></div>\n          <div className=\"flex items-center gap-x-2\">\n            <div className=\"bg-primary-background flex items-center gap-1.5 rounded-sm py-1 pr-2 pl-1.5 shadow-[0px_0px_1px_0px_#E0E0E0,0px_1px_2px_-1px_rgba(24,39,75,0.02),0px_2px_2px_-1px_rgba(24,39,75,0.06)]\">\n              <div className=\"h-5 w-16 rounded bg-gray-200\"></div>\n            </div>\n            <div className=\"bg-primary-background flex items-center rounded-sm py-1 pr-1.5 pl-2 shadow-[0px_0px_1px_0px_#E0E0E0,0px_1px_2px_-1px_rgba(24,39,75,0.02),0px_2px_2px_-1px_rgba(24,39,75,0.06)]\">\n              <div className=\"h-5 w-20 rounded bg-gray-200\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"h-full w-full overflow-hidden\">\n        <div className=\"flex h-full w-full flex-col\">\n          {/* Table Controls */}\n          <div className=\"flex h-[49px] shrink-0 items-center gap-x-[7px] border-b border-[#EEEFF1] px-3\">\n            <div className=\"flex h-7 items-center gap-x-1.5 rounded-lg border border-[#E6E7EA] bg-[#FBFBFB] pr-[4.5px] pl-[2.5px]\">\n              <div className=\"h-5 w-32 rounded bg-gray-200\"></div>\n            </div>\n            <div className=\"h-[21px] w-px rounded-full bg-[#EEEFF1]\"></div>\n            <div className=\"flex h-7 items-center rounded-lg border border-[#E6E7EA] bg-[#FBFBFB] pr-[2.5px] pl-1.5\">\n              <div className=\"flex items-center gap-x-[7px]\">\n                <div className=\"h-5 w-24 rounded bg-gray-200\"></div>\n              </div>\n              <div className=\"mr-1 ml-1.5 h-full w-px bg-[#E6E7EA]\"></div>\n              <div className=\"size-4 rounded bg-gray-200\"></div>\n            </div>\n          </div>\n\n          {/* Data Table */}\n          <div className=\"relative h-full w-full flex-1\">\n            <div className=\"home-ui-data-table grid auto-rows-[40px] grid-cols-[204px_minmax(136px,1fr)_minmax(204px,1.5fr)_minmax(136px,1fr)_204px_204px]\">\n              {/* Header Row */}\n              <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                <div className=\"flex h-full w-full items-center justify-between gap-x-1.5 pr-[4.5px] pl-2\">\n                  <div className=\"bg-white-100 flex items-center gap-x-2.5 overflow-hidden\">\n                    <div className=\"h-5 w-16 rounded bg-gray-200\"></div>\n                  </div>\n                  <div className=\"h-5 w-5 rounded bg-gray-200\"></div>\n                </div>\n              </div>\n              <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                  <div className=\"h-5 w-16 rounded bg-gray-200\"></div>\n                </div>\n              </div>\n              <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                  <div className=\"h-5 w-20 rounded bg-gray-200\"></div>\n                </div>\n              </div>\n              <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                  <div className=\"h-5 w-18 rounded bg-gray-200\"></div>\n                </div>\n              </div>\n              <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                  <div className=\"h-5 w-20 rounded bg-gray-200\"></div>\n                </div>\n              </div>\n              <div className=\"bg-white-100 overflow-hidden border-b border-[#EEEFF1]\">\n                <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                  <div className=\"h-5 w-16 rounded bg-gray-200\"></div>\n                </div>\n              </div>\n\n              {/* Data Rows - Generate multiple skeleton rows */}\n              {Array.from({ length: 20 }).map((_, index) => (\n                <React.Fragment key={index}>\n                  <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                    <div className=\"flex h-full w-full items-center justify-between gap-x-1.5 pr-[4.5px] pl-2\">\n                      <div className=\"bg-white-100 flex items-center gap-x-2.5 overflow-hidden\">\n                        <div className=\"size-4 rounded bg-gray-200\"></div>\n                        <div className=\"h-5 w-24 rounded bg-gray-200\"></div>\n                      </div>\n                      <div className=\"h-5 w-5 rounded bg-gray-200\"></div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                    <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                      <div className=\"h-5 w-20 rounded bg-gray-200\"></div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                    <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                      <div className=\"h-5 w-28 rounded bg-gray-200\"></div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                    <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                      <div className=\"h-5 w-16 rounded bg-gray-200\"></div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white-100 overflow-hidden border-r border-b border-[#EEEFF1]\">\n                    <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                      <div className=\"h-5 w-20 rounded bg-gray-200\"></div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white-100 overflow-hidden border-b border-[#EEEFF1]\">\n                    <div className=\"flex h-full w-full items-center gap-x-1.5 pr-[3.5px] pl-1\">\n                      <div className=\"h-5 w-18 rounded bg-gray-200\"></div>\n                    </div>\n                  </div>\n                </React.Fragment>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
    "/resizable-demo.tsx": "import * as React from \"react\";\n\nimport { Sidebar } from \"./sidebar\";\n\nexport const ResizableSidebarDemo = () => {\n  return (\n    <div\n      className=\"grid h-screen w-full overflow-hidden\"\n      style={{ gridTemplateColumns: \"var(--sidebar-width, 280px) 1fr\" }}\n    >\n      {/* Resizable Sidebar */}\n      <Sidebar />\n\n      {/* Main Content Area */}\n      <div className=\"bg-gray-50 p-6\">\n        <div className=\"max-w-4xl\">\n          <h1 className=\"mb-4 text-2xl font-bold text-gray-900\">\n            Resizable Sidebar Demo\n          </h1>\n          <p className=\"mb-4 text-gray-600\">\n            This is a demonstration of the resizable sidebar. You can:\n          </p>\n          <ul className=\"mb-6 list-inside list-disc space-y-2 text-gray-600\">\n            <li>Drag the right edge of the sidebar to resize it</li>\n            <li>\n              The sidebar has a minimum width of 200px and maximum width of\n              400px\n            </li>\n            <li>The resize handle will highlight when you hover over it</li>\n            <li>\n              All navigation items and icons are now organized in separate\n              components\n            </li>\n          </ul>\n\n          <div className=\"rounded-lg border bg-white p-6 shadow-sm\">\n            <h2 className=\"mb-3 text-lg font-semibold text-gray-900\">\n              Features Implemented\n            </h2>\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <h3 className=\"font-medium text-gray-800\">\n                  Sidebar Organization\n                </h3>\n                <ul className=\"space-y-1 text-sm text-gray-600\">\n                  <li> Icon components in separate files</li>\n                  <li> Clean navigation data structure</li>\n                  <li> Reusable NavigationItem component</li>\n                  <li> Reusable NavigationSection component</li>\n                </ul>\n              </div>\n              <div className=\"space-y-2\">\n                <h3 className=\"font-medium text-gray-800\">\n                  Resizable Functionality\n                </h3>\n                <ul className=\"space-y-1 text-sm text-gray-600\">\n                  <li> Custom useResizableSidebar hook</li>\n                  <li> Mouse drag to resize</li>\n                  <li> Min/max width constraints</li>\n                  <li> Visual resize handle</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
    "/sidebar.css": "/* CSS Variables for Resizable Sidebar */\n:root {\n  --sidebar-width: 280px; /* Default sidebar width */\n}\n\n/* Ensure the sidebar takes full height */\n.sidebar-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n",
    "/sidebar.tsx": "import * as React from \"react\";\nimport {\n  BarChart3,\n  Bell,\n  Building,\n  Building2,\n  CheckSquare,\n  ChevronDown,\n  DollarSign,\n  FileText,\n  GitBranch,\n  Grid3X3,\n  Link,\n  Mail,\n  Settings,\n  Star,\n  Users,\n  Workflow,\n} from \"lucide-react\";\n\nimport { useResizableSidebar } from \"./use-resizable-sidebar\";\n\n// Navigation data structure\nconst navigationItems = [\n  { id: \"notifications\", label: \"Notifications\", icon: <Bell size={14} /> },\n  { id: \"tasks\", label: \"Tasks\", icon: <CheckSquare size={14} /> },\n  { id: \"emails\", label: \"Emails\", icon: <Mail size={14} /> },\n  { id: \"reports\", label: \"Reports\", icon: <BarChart3 size={14} /> },\n  {\n    id: \"automations\",\n    label: \"Automations\",\n    icon: <Settings size={14} />,\n    hasSubItems: true,\n    subItems: [\n      { id: \"workflows\", label: \"Workflows\", icon: <Workflow size={14} /> },\n      { id: \"sequences\", label: \"Sequences\", icon: <GitBranch size={14} /> },\n    ],\n  },\n];\n\nconst favoritesItems = [\n  {\n    id: \"onboarding-pipeline\",\n    label: \"Onboarding pipeline\",\n    icon: <Star size={14} />,\n  },\n  {\n    id: \"top-of-funnel\",\n    label: \"Top of funnel\",\n    icon: <Building2 size={14} />,\n  },\n  {\n    id: \"revops-workflows\",\n    label: \"RevOps workflows\",\n    icon: <FileText size={14} />,\n  },\n];\n\nconst recordsItems = [\n  {\n    id: \"companies\",\n    label: \"Companies\",\n    icon: <Building size={14} />,\n    isActive: true,\n  },\n  { id: \"people\", label: \"People\", icon: <Users size={14} /> },\n  { id: \"deals\", label: \"Deals\", icon: <DollarSign size={14} /> },\n  { id: \"workspaces\", label: \"Workspaces\", icon: <Grid3X3 size={14} /> },\n  { id: \"partnerships\", label: \"Partnerships\", icon: <Link size={14} /> },\n];\n\nconst listsItems = [\n  {\n    id: \"strategic-accounts\",\n    label: \"Strategic accounts\",\n    icon: \"\",\n  },\n];\n\n// Navigation item component\nconst NavigationItem = ({\n  item,\n  isSubItem = false,\n}: {\n  item: any;\n  isSubItem?: boolean;\n}) => (\n  <div className=\"flex w-full flex-col\">\n    <div\n      className={`flex min-w-0 items-center gap-x-1.5 rounded-[9px] px-2 py-1 transition-colors duration-500 [transition-timing-function:cubic-bezier(0.65,0,0.35,1)] ${item.isActive ? \"bg-[#F4F5F6]\" : \"\"}`}\n    >\n      <div className=\"relative w-[14px]\">\n        {typeof item.icon === \"string\" ? (\n          <span className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[16px] leading-4\">\n            {item.icon}\n          </span>\n        ) : (\n          item.icon\n        )}\n      </div>\n      <span className=\"min-w-0 flex-1 truncate text-[14px] leading-5 font-medium tracking-[-0.28px]\">\n        {item.label}\n      </span>\n      {item.hasSubItems && <ChevronDown size={14} />}\n    </div>\n    {item.hasSubItems && item.subItems && (\n      <div className=\"flex flex-col gap-y-px py-px\">\n        {item.subItems.map((subItem: any) => (\n          <div key={subItem.id} className=\"relative flex pl-5\">\n            <div className=\"absolute left-3.5 h-[32px] w-px -translate-y-[2px] bg-[#D1D3D6] opacity-40\" />\n            <div className=\"flex w-full flex-col\">\n              <NavigationItem item={subItem} isSubItem />\n            </div>\n          </div>\n        ))}\n      </div>\n    )}\n  </div>\n);\n\n// Section component\nconst NavigationSection = ({\n  title,\n  items,\n}: {\n  title: string;\n  items: any[];\n}) => (\n  <div className=\"flex flex-col\">\n    <div className=\"flex min-w-0 items-center gap-x-1.5 px-2 py-1.5\">\n      <ChevronDown size={14} />\n      <span className=\"min-w-0 flex-1 truncate text-[12px] leading-4 font-medium tracking-normal text-[#75777C]\">\n        {title}\n      </span>\n    </div>\n    <ul className=\"flex flex-col gap-px\">\n      {items.map((item) => (\n        <NavigationItem key={item.id} item={item} />\n      ))}\n    </ul>\n  </div>\n);\n\nexport const Sidebar = () => {\n  const { handleMouseDown } = useResizableSidebar();\n\n  return (\n    <div className=\"sidebar-container relative border-r border-[#EEEFF1] bg-[#FBFBFB]\">\n      <div className=\"flex items-center justify-between gap-x-6 border-r border-b border-[#EEEFF1] bg-[#FBFBFB] pt-3 pr-[15px] pb-[11px] pl-3\">\n        <div className=\"flex min-w-0 flex-1 items-center\">\n          <img\n            alt=\"Basepoint\"\n            loading=\"lazy\"\n            width=\"96\"\n            height=\"96\"\n            decoding=\"async\"\n            data-nimg=\"1\"\n            className=\"size-6 shrink-0\"\n            src=\"\"\n          />\n          <div className=\"text-secondary-foreground ml-2 min-w-0 truncate text-[16px] leading-5 font-semibold tracking-[-0.32px]\">\n            Basepoint\n          </div>\n          <svg className=\"ml-[5px] shrink-0\" width=\"18\" height=\"18\" fill=\"none\">\n            <path\n              d=\"M5.25 7.125 9 10.875l3.75-3.75\"\n              stroke=\"#5C5E63\"\n              stroke-width=\"1.2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            ></path>\n          </svg>\n        </div>\n        <svg\n          width=\"18\"\n          height=\"18\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <g stroke=\"#75777C\" stroke-width=\"1.2\">\n            <rect x=\"1.5\" y=\"2.5\" width=\"15\" height=\"13\" rx=\"3\"></rect>\n            <path d=\"M7.8 2.725v12.5\"></path>\n            <path\n              d=\"M3.975 5.425h1.35M3.975 7.674h1.35\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            ></path>\n          </g>\n        </svg>\n      </div>\n      <div className=\"relative row-span-2 block border-r border-[#EEEFF1] bg-[#FBFBFB] pt-[10px] pr-[7px] pl-2\">\n        <div className=\"flex min-w-0 flex-1 items-center justify-between rounded-sm bg-white py-1 pr-1 pl-1.5 shadow-[0px_0px_2px_0px_#E0E0E0,0px_2px_4px_-2px_rgba(24,39,75,0.02),0px_4px_4px_-2px_rgba(24,39,75,0.06)]\">\n          <div className=\"flex min-w-0 flex-1 items-center gap-x-1\">\n            <svg width=\"14\" height=\"14\" fill=\"none\" className=\"shrink-0\">\n              <rect\n                x=\"2\"\n                y=\"1\"\n                width=\"10\"\n                height=\"12\"\n                rx=\"2.5\"\n                stroke=\"#232529\"\n                stroke-width=\"1.1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              ></rect>\n              <rect\n                x=\"2\"\n                y=\"1\"\n                width=\"10\"\n                height=\"9\"\n                rx=\"2.5\"\n                stroke=\"#232529\"\n                stroke-width=\"1.1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              ></rect>\n              <path\n                d=\"M5.333 3.166v4.667m0-1.667 1.053-1m0 0 2.105-2m-2.105 2 2.28 2.667\"\n                stroke=\"#232529\"\n                stroke-width=\"1.1\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              ></path>\n            </svg>\n            <span className=\"min-w-0 flex-1 truncate text-[14px] leading-5 font-medium tracking-[-0.28px]\">\n              Quick actions\n            </span>\n          </div>\n          <div className=\"flex min-w-[20px] shrink-0 justify-center rounded-md border border-[#E6E7EA] p-[3px]\">\n            <span className=\"text-center text-[11px] leading-3 font-normal tracking-[0.22px] text-[#75777C]\">\n              K\n            </span>\n          </div>\n        </div>\n        <div className=\"mt-2.5 flex flex-col gap-[9px]\">\n          {/* Main Navigation */}\n          <div className=\"flex flex-col\">\n            <ul className=\"flex flex-col gap-px\">\n              {navigationItems.map((item) => (\n                <NavigationItem key={item.id} item={item} />\n              ))}\n            </ul>\n          </div>\n\n          {/* Favorites Section */}\n          <NavigationSection title=\"Favorites\" items={favoritesItems} />\n\n          {/* Records Section */}\n          <NavigationSection title=\"Records\" items={recordsItems} />\n\n          {/* Lists Section */}\n          <NavigationSection title=\"Lists\" items={listsItems} />\n        </div>\n      </div>\n\n      {/* Resize Handle */}\n      <div\n        className=\"absolute top-0 -right-0.5 h-full w-1 cursor-col-resize bg-transparent transition-colors duration-200 hover:bg-[#266DF0] active:bg-[#266DF0]\"\n        onMouseDown={handleMouseDown}\n      />\n    </div>\n  );\n};\n",
    "/use-resizable-sidebar.ts": "import { useEffect, useRef } from \"react\";\n\ninterface UseResizableSidebarOptions {\n  defaultWidth?: number;\n  minWidth?: number;\n  maxWidth?: number;\n}\n\nexport const useResizableSidebar = ({\n  defaultWidth = 240,\n  minWidth = 100,\n  maxWidth = 300,\n}: UseResizableSidebarOptions = {}) => {\n  const startXRef = useRef<number>(0);\n  const startWidthRef = useRef<number>(0);\n  const isResizingRef = useRef<boolean>(false);\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    isResizingRef.current = true;\n    startXRef.current = e.clientX;\n    // Get current width from CSS variable\n    const currentWidth = parseInt(\n      getComputedStyle(document.documentElement)\n        .getPropertyValue(\"--sidebar-width\")\n        .replace(\"px\", \"\") || defaultWidth.toString(),\n    );\n    startWidthRef.current = currentWidth;\n  };\n\n  useEffect(() => {\n    // Set initial CSS variable value\n    document.documentElement.style.setProperty(\n      \"--sidebar-width\",\n      `${defaultWidth}px`,\n    );\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isResizingRef.current) return;\n\n      const deltaX = e.clientX - startXRef.current;\n      const newWidth = startWidthRef.current + deltaX;\n      const clampedWidth = Math.min(Math.max(newWidth, minWidth), maxWidth);\n\n      // Set CSS variable directly\n      document.documentElement.style.setProperty(\n        \"--sidebar-width\",\n        `${clampedWidth}px`,\n      );\n    };\n\n    const handleMouseUp = () => {\n      if (isResizingRef.current) {\n        isResizingRef.current = false;\n        document.body.style.cursor = \"\";\n        document.body.style.userSelect = \"\";\n      }\n    };\n\n    const handleMouseDownGlobal = () => {\n      if (isResizingRef.current) {\n        document.body.style.cursor = \"col-resize\";\n        document.body.style.userSelect = \"none\";\n      }\n    };\n\n    // Add event listeners\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n    document.addEventListener(\"mousedown\", handleMouseDownGlobal);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n      document.removeEventListener(\"mousedown\", handleMouseDownGlobal);\n      document.body.style.cursor = \"\";\n      document.body.style.userSelect = \"\";\n    };\n  }, [defaultWidth, minWidth, maxWidth]);\n\n  return {\n    handleMouseDown,\n  };\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { Dashboard } from \"./dashboard\";\nimport { Sidebar } from \"./sidebar\";\n\nconst Preview = () => {\n  return (\n    <div\n      className=\"relative grid h-full w-full overflow-hidden\"\n      style={{ gridTemplateColumns: \"var(--sidebar-width, 280px) 1fr\" }}\n    >\n      <Sidebar />\n      <Dashboard />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "radial-slider",
  "nextSlug": "snail-timer"
},
  "snail-timer": {
  "name": "Snail Timer",
  "description": "Fastest countdown ever",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/snail-timer/snail-timer.mp4",
  "coverType": "video",
  "tags": [
    "utilities",
    "silly",
    "effects"
  ],
  "slug": "snail-timer",
  "type": "local",
  "dependencies": {
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/snail-timer.css": "/* CSS custom properties and animations for SnailTimer */\n:root {\n  --snail-move-duration: 45s;\n  --snail-eye-duration: 1s;\n  --snail-scale-duration: 1s;\n  --snail-dust-duration: 1s;\n}\n\n@keyframes snail-move {\n  from {\n    transform: translateX(100vw);\n  }\n  to {\n    transform: translateX(0);\n  }\n}\n\n@keyframes snail-scale {\n  0% {\n    transform: scaleX(1);\n  }\n  50% {\n    transform: scaleX(0.95);\n  }\n  100% {\n    transform: scaleX(1);\n  }\n}\n\n@keyframes snail-eye {\n  0% {\n    transform: translate(0);\n  }\n  50% {\n    transform: translate(3px, 0);\n  }\n  100% {\n    transform: translate(0);\n  }\n}\n\n@keyframes snail-dust {\n  100% {\n    background-position-x: right;\n  }\n}\n\n.snail-timer__track {\n  animation: snail-move var(--snail-move-duration) linear 1 both;\n}\n\n.snail .right-eye {\n  animation: snail-eye var(--snail-eye-duration) ease infinite;\n  animation-delay: 0.1s;\n}\n\n.snail .body {\n  animation: snail-scale var(--snail-scale-duration) ease infinite;\n  animation-delay: 0.1s;\n}\n\n.snail .shell {\n  animation: snail-scale var(--snail-scale-duration) ease infinite;\n}\n\n.snail-timer__dust {\n  width: 197px;\n  height: 66px;\n  background-image: url(\"https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/snail-timer/dust.svg\");\n  background-size: 5910px 67px;\n  animation: snail-dust var(--snail-dust-duration) steps(29) infinite forwards;\n  transform: translate(-20px, 10px);\n}\n\n/* Pause all animations when not started */\n.snail-timer.is-paused .snail-timer__track,\n.snail-timer.is-paused .snail .right-eye,\n.snail-timer.is-paused .snail .body,\n.snail-timer.is-paused .snail .shell,\n.snail-timer.is-paused .snail-timer__dust {\n  animation-play-state: paused !important;\n}\n",
    "/snail-timer.tsx": "import React, { useEffect, useState } from \"react\";\n\nimport \"./snail-timer.css\";\n\ntype Props = {\n  started?: boolean;\n  initialSeconds?: number;\n  shouldCallTimeout?: boolean;\n  onTimeout?: () => void;\n};\n\nexport const SnailTimer = ({\n  started = true,\n  initialSeconds = 45,\n  onTimeout = () => {},\n}: Props) => {\n  const [seconds, setSeconds] = useState(initialSeconds);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n\n    if (started) {\n      interval = setInterval(() => {\n        if (seconds !== 1) {\n          setSeconds((seconds) => seconds - 1);\n        } else {\n          onTimeout();\n          clearInterval(interval);\n        }\n      }, 1000);\n    }\n\n    return () => clearInterval(interval);\n  }, [started, seconds]);\n\n  return (\n    <div\n      className={`snail-timer pointer-events-none absolute right-0 bottom-5 left-0 overflow-hidden ${\n        started ? \"\" : \"is-paused\"\n      }`}\n    >\n      <div\n        className=\"snail-timer__track\"\n        style={{ [\"--snail-move-duration\" as any]: `${initialSeconds}s` }}\n      >\n        <div className=\"flex items-end\">\n          <div className=\"snail\">\n            <SnailSvg />\n          </div>\n          <div className=\"snail-timer__dust\" aria-hidden=\"true\" />\n        </div>\n        <div className=\"text-muted-foreground mt-1 ml-2 text-xs\">\n          {seconds} seconds remaining\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst SnailSvg = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"138\"\n    height=\"67\"\n    viewBox=\"0 0 138 67\"\n  >\n    <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(2 2)\">\n      <g className=\"left-eye\">\n        <g transform=\"translate(0 17.101)\">\n          <path\n            fill=\"#FFF\"\n            d=\"M22,11.3988978 C22,17.4738978 17.075,22.3988978 11,22.3988978 C4.925,22.3988978 0,17.4738978 0,11.3988978 C0,5.32389785 4.925,0.398897849 11,0.398897849 C17.075,0.398897849 22,5.32389785 22,11.3988978\"\n          />\n          <path\n            stroke=\"#7247FF\"\n            strokeWidth=\"4\"\n            d=\"M22,11.3988978 C22,17.4738978 17.075,22.3988978 11,22.3988978 C4.925,22.3988978 0,17.4738978 0,11.3988978 C0,5.32389785 4.925,0.398897849 11,0.398897849 C17.075,0.398897849 22,5.32389785 22,11.3988978 Z\"\n          />\n          <path\n            fill=\"#000\"\n            d=\"M12.5,12.8988978 C12.5,15.6608978 10.933,17.8988978 9,17.8988978 C7.067,17.8988978 5.5,15.6608978 5.5,12.8988978 C5.5,10.1368978 7.067,7.89889785 9,7.89889785 C10.933,7.89889785 12.5,10.1368978 12.5,12.8988978\"\n          />\n          <path\n            fill=\"#9A70EA\"\n            d=\"M11.231,10.9769978 L0.882,13.7729978 C0.46,12.2159978 0.377,10.5889978 0.638,9.00599785 C1.616,3.08099785 7.202,-0.904002151 13.014,0.176997849 C17.044,0.926997849 20.353,3.95999785 21.523,7.97899785 L11.231,10.9769978 Z\"\n          />\n          <path\n            stroke=\"#7247FF\"\n            strokeWidth=\"4\"\n            d=\"M11.231,10.9769978 L0.882,13.7729978 C0.46,12.2159978 0.377,10.5889978 0.638,9.00599785 C1.616,3.08099785 7.202,-0.904002151 13.014,0.176997849 C17.044,0.926997849 20.353,3.95999785 21.523,7.97899785 L11.231,10.9769978 Z\"\n          />\n          <path\n            fill=\"#7247FF\"\n            d=\"M15.8379,27.5687978 L12.0089,22.6057978 L19.4229,16.8857978 L23.2519,21.8487978 C24.8319,23.8957978 24.4519,26.8367978 22.4049,28.4157978 C20.3579,29.9957978 17.4179,29.6157978 15.8379,27.5687978\"\n          />\n        </g>\n      </g>\n      <g className=\"body\">\n        <g transform=\"translate(16.943 41.912)\">\n          <path\n            stroke=\"#7247FF\"\n            strokeWidth=\"5\"\n            d=\"M4.737,19.5 C2.121,19.5 8.52651283e-14,17.379 8.52651283e-14,14.763 C8.52651283e-14,7.161 6.161,4.54747351e-13 13.762,4.54747351e-13 L95.5,4.54747351e-13 C105.745,4.54747351e-13 113.106,7.242 116.407,15.936 C117.061,17.657 115.75,19.5 113.908,19.5 L4.737,19.5 Z\"\n          />\n          <path\n            fill=\"#9A70EA\"\n            d=\"M15.8429,19.2422 C13.4759,19.2422 11.5569,17.9202 11.5569,16.2892 C11.5569,11.5522 17.1319,7.0882 24.0079,7.0882 L97.9539,7.0882 C107.2219,7.0882 113.8819,11.6012 116.8679,17.0202 C117.4599,18.0942 116.2739,19.2422 114.6079,19.2422 L15.8429,19.2422 Z\"\n          />\n        </g>\n      </g>\n      <g className=\"right-eye\">\n        <g transform=\"translate(6 16.101)\">\n          <path\n            fill=\"#FFF\"\n            d=\"M22,11.3988978 C22,17.4738978 17.075,22.3988978 11,22.3988978 C4.925,22.3988978 0,17.4738978 0,11.3988978 C0,5.32389785 4.925,0.398897849 11,0.398897849 C17.075,0.398897849 22,5.32389785 22,11.3988978\"\n          />\n          <path\n            stroke=\"#7247FF\"\n            strokeWidth=\"4\"\n            d=\"M22,11.3988978 C22,17.4738978 17.075,22.3988978 11,22.3988978 C4.925,22.3988978 0,17.4738978 0,11.3988978 C0,5.32389785 4.925,0.398897849 11,0.398897849 C17.075,0.398897849 22,5.32389785 22,11.3988978 Z\"\n          />\n          <path\n            fill=\"#000\"\n            d=\"M12.5,12.8988978 C12.5,15.6608978 10.933,17.8988978 9,17.8988978 C7.067,17.8988978 5.5,15.6608978 5.5,12.8988978 C5.5,10.1368978 7.067,7.89889785 9,7.89889785 C10.933,7.89889785 12.5,10.1368978 12.5,12.8988978\"\n          />\n          <path\n            stroke=\"#7247FF\"\n            strokeWidth=\"4\"\n            d=\"M11.231,10.9769978 L0.882,13.7729978 C0.46,12.2159978 0.377,10.5889978 0.638,9.00599785 C1.616,3.08099785 7.202,-0.904002151 13.014,0.176997849 C17.044,0.926997849 20.353,3.95999785 21.523,7.97899785 L11.231,10.9769978 Z\"\n          />\n          <path\n            fill=\"#7247FF\"\n            d=\"M15.8379,27.5687978 L12.0089,22.6057978 L19.4229,16.8857978 L23.2519,21.8487978 C24.8319,23.8957978 24.4519,26.8367978 22.4049,28.4157978 C20.3579,29.9957978 17.4179,29.6157978 15.8379,27.5687978\"\n          />\n          <path\n            fill=\"#9A70EA\"\n            d=\"M11.231,10.9769978 L0.882,13.7729978 C0.46,12.2159978 0.377,10.5889978 0.638,9.00599785 C1.616,3.08099785 7.202,-0.904002151 13.014,0.176997849 C17.044,0.926997849 20.353,3.95999785 21.523,7.97899785 L11.231,10.9769978 Z\"\n          />\n        </g>\n      </g>\n      <g className=\"shell\">\n        <g strokeLinecap=\"round\" transform=\"translate(48.357 .18)\">\n          <path\n            stroke=\"#9A70EA\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"2\"\n            d=\"M16.0033626,9.63291273 C16.1763626,9.93291273 22.2683626,5.87991273 22.3263626,5.98291273 C22.3383626,6.00291273 0.761362599,23.8309127 1.1423626,24.4909127 C1.6783626,25.4199127 43.0693626,-0.781087271 43.5313626,0.0179127286 C44.0943626,0.992912729 3.7573626,30.0919127 4.0333626,30.5699127 C4.3803626,31.1699127 53.0443626,1.97991273 53.1703626,2.19991273 C53.2003626,2.25191273 -0.409637401,38.7729127 0.00236259944,39.4859127 C0.605362599,40.5299127 59.5263626,3.54891273 60.2073626,4.72691273 C60.7243626,5.62291273 11.9393626,37.8099127 12.6913626,39.1119127 C12.9233626,39.5149127 65.9643626,8.34791273 65.9673626,8.35391273 C66.3013626,8.93091273 22.6833626,38.4489127 23.0793626,39.1349127 C23.5083626,39.8779127 67.0573626,12.2429127 67.7073626,13.3679127 C68.1923626,14.2099127 26.5803626,42.7639127 27.2403626,43.9059127 C27.6733626,44.6569127 72.3033626,15.9939127 73.1243626,17.4149127 C73.8003626,18.5869127 28.5813626,47.7239127 29.2603626,48.8999127 C29.3993626,49.1389127 71.0653626,24.0769127 71.3623626,24.5919127 C71.9703626,25.6439127 27.7703626,56.1919127 27.9103626,56.4349127 C28.4413626,57.3559127 73.2133626,28.9199127 73.8013626,29.9399127 C74.3493626,30.8879127 33.3113626,58.8449127 33.6013626,59.3469127 C33.8473626,59.7729127 76.3823626,34.1119127 76.6143626,34.5139127 C76.8813626,34.9769127 37.8373626,62.5979127 38.2013626,63.2279127 C38.4243626,63.6129127 67.8783626,45.4039127 68.1763626,45.9209127\"\n          />\n          <path\n            stroke=\"#7247FF\"\n            strokeWidth=\"5\"\n            d=\"M1.6429626,39.3195127 C1.9699626,36.3825127 -0.857037401,22.8195127 16.6429626,9.31951273 C27.9219626,0.619512729 40.9809626,0.325512729 44.6429626,0.319480661 C49.6539626,0.311512729 55.7319626,1.79851273 63.1429626,6.81951273 C64.4599626,7.71251273 75.8079626,15.6825127 76.1429626,29.8195127 C76.4399626,42.3755127 67.8259626,50.3395127 65.1429626,52.8195127 C62.2099626,55.5315127 54.2939626,62.8485127 43.1429626,61.8195127 C35.5579626,61.1195127 24.3289626,56.3575127 22.1429626,45.8195127 C20.2179626,36.5385127 26.3509626,27.8065127 33.1429626,23.8195127 C37.8959626,21.0295127 42.6289626,20.7635127 45.1429626,20.8195127\"\n          />\n        </g>\n      </g>\n    </g>\n  </svg>\n);\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { SnailTimer } from \"./snail-timer\";\n\nconst Preview = () => {\n  const [started, setStarted] = React.useState(false);\n\n  const handleToggleStarted = () => {\n    setStarted((prev) => !prev);\n  };\n\n  return (\n    <div className=\"flex h-screen items-center justify-center\">\n      <button onClick={handleToggleStarted}>\n        {started ? \"Stop Timer\" : \"Start Countdown\"}\n      </button>\n      <SnailTimer started={started} />\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "sidebar",
  "nextSlug": "sphere"
},
  "sphere": {
  "name": "3D Animated Sphere",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/sphere/sphere.mp4",
  "coverType": "video",
  "tags": [
    "entertainment",
    "geometric",
    "effects"
  ],
  "slug": "sphere",
  "type": "local",
  "dependencies": {
    "react": "*",
    "react-dom": "*",
    "three": "^0.180.0"
  },
  "devDependencies": {},
  "sourceCode": {
    "/sphere.tsx": "import React, { useEffect } from \"react\";\nimport * as THREE from \"three\";\n\nexport const Sphere = () => {\n  const rootRef = React.useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const container = rootRef.current;\n    if (!container) return;\n\n    const scene = new THREE.Scene();\n\n    const getSize = () => ({\n      width: container.clientWidth || window.innerWidth,\n      height: container.clientHeight || window.innerHeight,\n    });\n\n    const { width: initialWidth, height: initialHeight } = getSize();\n\n    const camera = new THREE.PerspectiveCamera(\n      75,\n      initialWidth / initialHeight,\n      0.1,\n      1000,\n    );\n    camera.position.z = 3;\n\n    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(initialWidth, initialHeight);\n    container.appendChild(renderer.domElement);\n\n    const radius = 1.5;\n    const detail = 40;\n    const particleSizeMin = 0.01;\n    const particleSizeMax = 0.08;\n\n    const geometry = new THREE.IcosahedronGeometry(1, detail);\n    const texture = createDotTexture(32, \"#FFFFFF\");\n    const material = new THREE.PointsMaterial({\n      map: texture,\n      blending: THREE.AdditiveBlending,\n      color: 0x101a88,\n      depthTest: false,\n    });\n\n    setupPointsShader(material, { radius, particleSizeMin, particleSizeMax });\n\n    const points = new THREE.Points(geometry, material);\n    scene.add(points);\n\n    let animationFrameId = 0;\n    const animate = (timeMs: number) => {\n      const time = timeMs * 0.001;\n      points.rotation.set(0, time * 0.2, 0);\n      const shader = (material as any).userData?.shader;\n      if (shader) shader.uniforms.time.value = time;\n      renderer.render(scene, camera);\n      animationFrameId = requestAnimationFrame(animate);\n    };\n    animationFrameId = requestAnimationFrame(animate);\n\n    const handleResize = () => {\n      const { width, height } = getSize();\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n      renderer.setSize(width, height);\n    };\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n      window.removeEventListener(\"resize\", handleResize);\n      scene.remove(points);\n      geometry.dispose();\n      material.dispose();\n      texture.dispose();\n      renderer.dispose();\n      if (renderer.domElement.parentElement === container) {\n        container.removeChild(renderer.domElement);\n      }\n    };\n  }, []);\n\n  return (\n    <div\n      ref={rootRef}\n      className=\"h-full w-full bg-[radial-gradient(circle_farthest-corner,_#060a33,_#000000)]\"\n    />\n  );\n};\n\nfunction createDotTexture(size = 32, color = \"#FFFFFF\"): THREE.CanvasTexture {\n  const radius = size * 0.5;\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = size;\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new Error(\"2D canvas context not available\");\n\n  const circle = new Path2D();\n  circle.arc(radius, radius, radius, 0, 2 * Math.PI);\n  ctx.fillStyle = color;\n  ctx.fill(circle);\n\n  return new THREE.CanvasTexture(canvas);\n}\n\nfunction setupPointsShader(\n  material: THREE.PointsMaterial,\n  opts: { radius: number; particleSizeMin: number; particleSizeMax: number },\n) {\n  const { radius, particleSizeMin, particleSizeMax } = opts;\n  material.onBeforeCompile = (shader: any) => {\n    shader.uniforms.time = { value: 0 } as { value: number };\n    shader.uniforms.radius = { value: radius } as { value: number };\n    shader.uniforms.particleSizeMin = { value: particleSizeMin } as {\n      value: number;\n    };\n    shader.uniforms.particleSizeMax = { value: particleSizeMax } as {\n      value: number;\n    };\n    shader.vertexShader =\n      \"uniform float particleSizeMax;\\n\" + shader.vertexShader;\n    shader.vertexShader =\n      \"uniform float particleSizeMin;\\n\" + shader.vertexShader;\n    shader.vertexShader = \"uniform float radius;\\n\" + shader.vertexShader;\n    shader.vertexShader = \"uniform float time;\\n\" + shader.vertexShader;\n    shader.vertexShader = webGlNoise + \"\\n\" + shader.vertexShader;\n    shader.vertexShader = shader.vertexShader.replace(\n      \"#include <begin_vertex>\",\n      `\n          vec3 p = position;\n          float n = snoise( vec3( p.x*.6 + time*0.2, p.y*0.4 + time*0.3, p.z*.2 + time*0.2) );\n          p += n *0.4;\n\n          float l = radius / length(p);\n          p *= l;\n          float s = mix(particleSizeMin, particleSizeMax, n);\n          vec3 transformed = vec3( p.x, p.y, p.z );\n        `,\n    );\n    shader.vertexShader = shader.vertexShader.replace(\n      \"gl_PointSize = size;\",\n      \"gl_PointSize = s;\",\n    );\n\n    (material as any).userData.shader = shader;\n  };\n}\n\nconst webGlNoise = `\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\n  float snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n              i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.5 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 105.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n`;\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { Sphere } from \"./sphere\";\n\nconst Preview = () => {\n  return <Sphere />;\n};\n\nexport default Preview;\n",
  "previousSlug": "snail-timer",
  "nextSlug": "spreadsheet"
},
  "spreadsheet": {
  "name": "Spreadsheet",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/spreadsheet/spreadsheet-data-enrichment.mp4",
  "coverType": "video",
  "defaultSize": "full",
  "tags": [
    "business",
    "minimal",
    "tables"
  ],
  "slug": "spreadsheet",
  "type": "local",
  "dependencies": {
    "@ai-sdk/react": "^2.0.119",
    "@loremllm/transport": "^0.5.1",
    "@tanstack/react-table": "^8.21.3",
    "@tanstack/react-virtual": "^3.13.14",
    "react": "*",
    "react-dom": "*",
    "zod": "*",
    "zustand": "^5.0.9",
    "@headless-tree/core": "^1.6.1",
    "@headless-tree/react": "^1.6.1",
    "@hookform/resolvers": "^5.2.2",
    "class-variance-authority": "^0.7.1",
    "cmdk": "^1.1.1",
    "date-fns": "^4.1.0",
    "lucide-react": "^0.544.0",
    "motion": "^12.23.26",
    "next-themes": "^0.4.6",
    "radix-ui": "^1.4.3",
    "react-day-picker": "^9.13.0",
    "react-hook-form": "^7.69.0",
    "shiki": "^3.20.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.4.0",
    "tw-animate-css": "^1.4.0",
    "vaul": "^1.1.2"
  },
  "devDependencies": {},
  "sourceCode": {
    "/components/memoized-table-body.tsx": "\"use client\";\n\nimport React from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\nimport { flexRender } from \"@tanstack/react-table\";\n\nimport type { SpreadsheetRow } from \"../lib/spreadsheet-store\";\nimport type { Table } from \"@tanstack/react-table\";\nimport type { VirtualItem } from \"@tanstack/react-virtual\";\n\ninterface MemoizedTableBodyProps<TRow extends SpreadsheetRow> {\n  virtualItems: VirtualItem[];\n  table: Table<TRow>;\n  selectedCells: Set<string>;\n  getRowCells: (rowId: string) => string[];\n  handleMouseDown: (\n    e: React.MouseEvent,\n    rowId: string,\n    columnId: string,\n  ) => void;\n  handleMouseMove: (\n    e: React.MouseEvent,\n    rowId: string,\n    columnId: string,\n  ) => void;\n  showRowNumbers?: boolean;\n  renderRowNumber?: (rowIndex: number) => React.ReactNode;\n  renderRowActions?: (row: TRow, rowIndex: number) => React.ReactNode;\n}\n\nfunction MemoizedTableBodyInner<TRow extends SpreadsheetRow>({\n  virtualItems,\n  table,\n  selectedCells,\n  getRowCells,\n  handleMouseDown,\n  handleMouseMove,\n  showRowNumbers = true,\n  renderRowNumber,\n  renderRowActions,\n}: MemoizedTableBodyProps<TRow>) {\n  return (\n    <>\n      {virtualItems.map((virtualRow) => {\n        const row = table.getRowModel().rows[virtualRow.index];\n        const rowIndex = virtualRow.index;\n        const rowId = row?.original?.id;\n        if (!rowId) return null;\n\n        const rowCells = getRowCells(rowId);\n        const isRowSelected = rowCells.every((cell) => selectedCells.has(cell));\n\n        return (\n          <div\n            key={row.id}\n            className={cn(\n              \"hover:bg-muted/30 dark:hover:bg-muted/20 absolute top-0 left-0 w-full transition-colors\",\n              isRowSelected && \"bg-muted/50 dark:bg-muted/40\",\n            )}\n            style={{\n              height: `${virtualRow.size}px`,\n              transform: `translateY(${virtualRow.start}px)`,\n            }}\n          >\n            <div className=\"flex h-full\">\n              {/* Row number */}\n              {showRowNumbers && (\n                <div\n                  data-row-number\n                  className={cn(\n                    \"border-border bg-muted/30 text-muted-foreground hover:bg-muted/50 dark:hover:bg-muted/40 flex h-9 w-12 shrink-0 cursor-default items-center justify-center border-r border-b font-mono text-xs transition-colors\",\n                    isRowSelected && \"bg-muted dark:bg-muted/80\",\n                  )}\n                  onMouseDown={(e) => handleMouseDown(e, rowId, \"\")}\n                  onMouseMove={(e) => handleMouseMove(e, rowId, \"\")}\n                >\n                  {renderRowNumber ? renderRowNumber(rowIndex) : rowIndex + 1}\n                </div>\n              )}\n              {row.getVisibleCells().map((cell) => {\n                const cellKey = `${rowId}:${cell.column.id}`;\n                const isCellSelected = selectedCells.has(cellKey);\n\n                return (\n                  <div\n                    key={cell.id}\n                    className={cn(\n                      \"border-border relative flex h-9 shrink-0 cursor-default items-center border-r border-b transition-colors\",\n                      isCellSelected && \"bg-blue-50 dark:bg-blue-950/50\",\n                    )}\n                    style={{\n                      width: `calc(var(--col-${cell.column.id}-size) * 1px)`,\n                    }}\n                    onMouseDown={(e) =>\n                      handleMouseDown(e, rowId, cell.column.id)\n                    }\n                    onMouseMove={(e) =>\n                      handleMouseMove(e, rowId, cell.column.id)\n                    }\n                  >\n                    {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                  </div>\n                );\n              })}\n              {/* Row actions */}\n              {renderRowActions && (\n                <div className=\"border-border flex h-9 shrink-0 items-center justify-center border-b\">\n                  {renderRowActions(row.original, rowIndex)}\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </>\n  );\n}\n\nexport const MemoizedTableBody = React.memo(\n  MemoizedTableBodyInner,\n  (prevProps, nextProps) => {\n    return (\n      prevProps.virtualItems === nextProps.virtualItems &&\n      prevProps.selectedCells === nextProps.selectedCells &&\n      prevProps.getRowCells === nextProps.getRowCells &&\n      prevProps.handleMouseDown === nextProps.handleMouseDown &&\n      prevProps.handleMouseMove === nextProps.handleMouseMove\n    );\n  },\n) as <TRow extends SpreadsheetRow>(\n  props: MemoizedTableBodyProps<TRow>,\n) => React.ReactElement;\n\nMemoizedTableBodyInner.displayName = \"MemoizedTableBodyInner\";\n",
    "/components/resize-handle.tsx": "\"use client\";\n\nimport React, { useRef, useState } from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\n\ninterface ResizeHandleProps {\n  columnId: string;\n  columnWidths: Record<string, number>;\n  handleColumnResize: (columnId: string, width: number) => void;\n  tableContainerRef: React.RefObject<HTMLDivElement | null>;\n  dragLineRef: React.RefObject<HTMLDivElement | null>;\n  setDragLineVisible: (visible: boolean) => void;\n  className?: string;\n}\n\nexport const ResizeHandle = React.forwardRef<HTMLDivElement, ResizeHandleProps>(\n  (\n    {\n      columnId,\n      columnWidths,\n      handleColumnResize,\n      tableContainerRef,\n      dragLineRef,\n      setDragLineVisible,\n      className,\n    },\n    ref,\n  ) => {\n    const [isResizing, setIsResizing] = useState(false);\n    const startXRef = useRef(0);\n    const startWidthRef = useRef(0);\n    const columnStartXRef = useRef(0);\n    const currentMouseXRef = useRef(0);\n\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      setIsResizing(true);\n      setDragLineVisible(true);\n      startXRef.current = e.clientX;\n      startWidthRef.current = columnWidths[columnId];\n\n      const headerElement = e.currentTarget.closest(\n        \"[data-column-id]\",\n      ) as HTMLElement;\n      if (headerElement) {\n        const rect = headerElement.getBoundingClientRect();\n        const tableRect = tableContainerRef.current?.getBoundingClientRect();\n        if (tableRect) {\n          columnStartXRef.current = rect.left - tableRect.left;\n          const initialDragX =\n            columnStartXRef.current + startWidthRef.current - 2; // -2px to center on the 4px wide handle\n          if (dragLineRef.current) {\n            dragLineRef.current.style.left = `${initialDragX}px`;\n          }\n        }\n      }\n\n      const handleMouseMove = (e: MouseEvent) => {\n        currentMouseXRef.current = e.clientX;\n        const deltaX = e.clientX - startXRef.current;\n        const newWidth = Math.max(60, startWidthRef.current + deltaX);\n        const dragX = columnStartXRef.current + newWidth - 2; // Keep drag line centered on resize handle position\n\n        if (dragLineRef.current) {\n          dragLineRef.current.style.left = `${dragX}px`;\n        }\n      };\n\n      const handleMouseUp = () => {\n        setIsResizing(false);\n        setDragLineVisible(false);\n        const deltaX = currentMouseXRef.current - startXRef.current;\n        const newWidth = Math.max(60, startWidthRef.current + deltaX);\n        handleColumnResize(columnId, newWidth);\n        document.removeEventListener(\"mousemove\", handleMouseMove);\n        document.removeEventListener(\"mouseup\", handleMouseUp);\n      };\n\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n    };\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"hover:bg-primary/50 dark:hover:bg-primary/60 absolute top-0 right-0 h-full w-1 cursor-col-resize transition-colors\",\n          isResizing && \"bg-primary dark:bg-primary/80\",\n          className,\n        )}\n        onMouseDown={handleMouseDown}\n      />\n    );\n  },\n);\n\nResizeHandle.displayName = \"ResizeHandle\";\n",
    "/components/toolbar.tsx": "\"use client\";\n\nimport React from \"react\";\nimport { Button } from \"../ui/button.tsx\";\nimport { cn } from \"../ui/utils.tsx\";\n\nexport interface ToolbarProps extends React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\n\nexport const Toolbar = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  ({ children, className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\"flex items-center gap-2 p-2\", className)}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n);\nToolbar.displayName = \"Toolbar\";\n\ntype ToolbarButtonProps = React.ComponentProps<typeof Button>;\n\nexport const ToolbarButton = React.forwardRef<\n  HTMLButtonElement,\n  ToolbarButtonProps\n>(({ children, className, ...props }, ref) => (\n  <Button\n    ref={ref}\n    size=\"sm\"\n    variant=\"outline\"\n    className={cn(className)}\n    {...props}\n  >\n    {children}\n  </Button>\n));\nToolbarButton.displayName = \"ToolbarButton\";\n",
    "/components/spreadsheet.tsx": "\"use client\";\n\nimport React, { useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\nimport {\n  flexRender,\n  getCoreRowModel,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport { useVirtualizer } from \"@tanstack/react-virtual\";\n\nimport type { SpreadsheetRow } from \"../lib/spreadsheet-store\";\nimport type { ColumnInfo } from \"../lib/spreadsheet-utils\";\nimport type { ColumnDef } from \"@tanstack/react-table\";\nimport { useSpreadsheetStore } from \"../lib/spreadsheet-store\";\nimport {\n  createNavigationMap,\n  getColumnSizeVars,\n  getRowCells,\n} from \"../lib/spreadsheet-utils\";\nimport { useSpreadsheetHandlers } from \"../lib/use-spreadsheet-handlers\";\nimport { MemoizedTableBody } from \"./memoized-table-body\";\nimport { ResizeHandle } from \"./resize-handle\";\n\ninterface SpreadsheetProps<TRow extends SpreadsheetRow, TValue = unknown>\n  extends React.HTMLAttributes<HTMLDivElement> {\n  columns: ColumnDef<TRow, TValue>[];\n  showRowNumbers?: boolean;\n  renderRowNumber?: (rowIndex: number) => React.ReactNode;\n  renderRowActions?: (row: TRow, rowIndex: number) => React.ReactNode;\n}\n\nfunction SpreadsheetInner<TRow extends SpreadsheetRow, TValue = unknown>(\n  {\n    className,\n    style,\n    columns,\n    showRowNumbers = true,\n    renderRowNumber,\n    renderRowActions,\n    ...props\n  }: SpreadsheetProps<TRow, TValue>,\n  ref: React.Ref<HTMLDivElement>,\n) {\n  const data = useSpreadsheetStore((state) => state.data);\n  const selectedCells = useSpreadsheetStore((state) => state.selectedCells);\n  const isDragging = useSpreadsheetStore((state) => state.isDragging);\n  const columnWidths = useSpreadsheetStore((state) => state.columnWidths);\n  const setColumnWidths = useSpreadsheetStore((state) => state.setColumnWidths);\n  const deleteRow = useSpreadsheetStore((state) => state.deleteRow);\n  const dragLineVisible = useSpreadsheetStore((state) => state.dragLineVisible);\n  const setDragLineVisible = useSpreadsheetStore(\n    (state) => state.setDragLineVisible,\n  );\n\n  const tableContainerRef = useRef<HTMLDivElement>(null);\n  const dragLineRef = useRef<HTMLDivElement>(null);\n\n  const table = useReactTable({\n    data: data as TRow[],\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n  });\n\n  // Compute column meta locally - no need to store in Zustand\n  const columnMeta = useMemo<ColumnInfo[]>(() => {\n    return table.getAllLeafColumns().map((column) => ({\n      id: column.id,\n      accessorKey:\n        typeof (column.columnDef as any).accessorKey === \"string\"\n          ? (column.columnDef as any).accessorKey\n          : column.id,\n    }));\n  }, [table]);\n\n  // Compute navigation map locally - no need to store in Zustand\n  const navigationMap = useMemo(() => {\n    if (columnMeta.length > 0) {\n      return createNavigationMap(data, columnMeta);\n    }\n    return new Map();\n  }, [data, columnMeta]);\n\n  const columnSizeVars = useMemo(\n    () => getColumnSizeVars(columnWidths),\n    [columnWidths],\n  );\n\n  const { handleMouseDown, handleMouseMove, handleMouseUp, handleKeyDown } =\n    useSpreadsheetHandlers({\n      columns: columnMeta,\n      navigationMap,\n    });\n\n  const handleColumnResize = useCallback(\n    (columnId: string, width: number) => {\n      setColumnWidths((prev) => ({\n        ...prev,\n        [columnId]: Math.max(60, width),\n      }));\n    },\n    [setColumnWidths],\n  );\n\n  const getRowCellsHelper = useCallback(\n    (rowId: string) => {\n      return getRowCells(rowId, columnMeta);\n    },\n    [columnMeta],\n  );\n\n  // Mouseup should be global to handle drag ending outside the spreadsheet\n  useEffect(() => {\n    const handleGlobalMouseUp = () => {\n      handleMouseUp();\n    };\n\n    document.addEventListener(\"mouseup\", handleGlobalMouseUp);\n    return () => {\n      document.removeEventListener(\"mouseup\", handleGlobalMouseUp);\n    };\n  }, [handleMouseUp]);\n\n  const rowVirtualizer = useVirtualizer({\n    count: table.getRowModel().rows.length,\n    getScrollElement: () => tableContainerRef.current,\n    estimateSize: () => 36,\n    overscan: 10,\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex flex-col\",\n        isDragging && \"select-none\",\n        className,\n      )}\n      style={{ ...columnSizeVars, ...style }}\n      tabIndex={0}\n      onKeyDown={handleKeyDown}\n      {...props}\n    >\n      <div\n        ref={dragLineRef}\n        className={cn(\n          \"bg-primary pointer-events-none absolute top-0 bottom-0 z-50 w-0.5 transition-opacity\",\n          dragLineVisible ? \"opacity-100\" : \"opacity-0\",\n        )}\n      />\n\n      <div className=\"bg-muted border-border sticky top-0 z-1 flex border-y\">\n        {showRowNumbers && (\n          <div className=\"border-border bg-muted text-muted-foreground flex h-10 w-12 shrink-0 items-center justify-center border-r text-xs font-medium\">\n            #\n          </div>\n        )}\n        {table.getHeaderGroups()[0].headers.map((header) => (\n          <div\n            key={header.id}\n            data-column-id={header.column.id}\n            data-column-header\n            className=\"border-border bg-muted text-muted-foreground relative flex h-10 shrink-0 cursor-default items-center border-r pl-1 text-left text-xs font-medium transition-colors\"\n            style={{\n              width: `calc(var(--col-${header.column.id}-size) * 1px)`,\n            }}\n            onMouseDown={(e) => handleMouseDown(e, \"\", header.column.id)}\n            onMouseMove={(e) => handleMouseMove(e, \"\", header.column.id)}\n          >\n            {header.isPlaceholder\n              ? null\n              : flexRender(header.column.columnDef.header, header.getContext())}\n            <ResizeHandle\n              columnId={header.column.id}\n              columnWidths={columnWidths}\n              handleColumnResize={handleColumnResize}\n              tableContainerRef={tableContainerRef}\n              dragLineRef={dragLineRef}\n              setDragLineVisible={setDragLineVisible}\n            />\n          </div>\n        ))}\n        {showRowNumbers && (\n          <div className=\"border-border bg-muted text-muted-foreground flex h-10 w-12 shrink-0 items-center justify-center border-r text-xs font-medium\" />\n        )}\n      </div>\n\n      <div ref={tableContainerRef} className=\"flex-1\">\n        <div\n          style={{\n            height: `${rowVirtualizer.getTotalSize()}px`,\n            position: \"relative\",\n          }}\n        >\n          <MemoizedTableBody\n            virtualItems={rowVirtualizer.getVirtualItems()}\n            table={table}\n            selectedCells={selectedCells}\n            getRowCells={getRowCellsHelper}\n            handleMouseDown={handleMouseDown}\n            handleMouseMove={handleMouseMove}\n            showRowNumbers={showRowNumbers}\n            renderRowNumber={renderRowNumber}\n            renderRowActions={renderRowActions}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nSpreadsheetInner.displayName = \"SpreadsheetInner\";\n\nexport const Spreadsheet = React.forwardRef(SpreadsheetInner) as <\n  TRow extends SpreadsheetRow,\n  TValue = unknown,\n>(\n  props: SpreadsheetProps<TRow, TValue> & { ref?: React.Ref<HTMLDivElement> },\n) => React.ReactElement;\n\n(Spreadsheet as unknown as { displayName: string }).displayName = \"Spreadsheet\";\n",
    "/components/status-bar.tsx": "\"use client\";\n\nimport React from \"react\";\nimport { cn } from \"../ui/utils.tsx\";\n\nimport { useSpreadsheetStore } from \"../lib/spreadsheet-store\";\n\nexport interface StatusBarProps extends React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\n\nexport const StatusBar = React.forwardRef<HTMLDivElement, StatusBarProps>(\n  ({ children, className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        \"text-muted-foreground bg-background dark:bg-background/95 sticky bottom-0 flex items-center justify-between border-t p-2 text-xs\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  ),\n);\nStatusBar.displayName = \"StatusBar\";\n\ninterface StatusBarSectionProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nexport const StatusBarSection = React.forwardRef<\n  HTMLDivElement,\n  StatusBarSectionProps\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-1 items-center gap-2\", className)}\n    {...props}\n  />\n));\nStatusBarSection.displayName = \"StatusBarSection\";\n\nexport const StatusBarMessage: React.FC = () => {\n  const editingCell = useSpreadsheetStore((state) => state.editingCell);\n  const selectedCells = useSpreadsheetStore((state) => state.selectedCells);\n  const data = useSpreadsheetStore((state) => state.data);\n  const selectedCellsCount = selectedCells.size;\n\n  if (editingCell) {\n    const rowIndex = data.findIndex((row) => row.id === editingCell.rowId);\n    const displayRowNumber = rowIndex !== -1 ? rowIndex + 1 : \"?\";\n\n    return (\n      <span>\n        Editing row {displayRowNumber}, column {editingCell.columnId}\n      </span>\n    );\n  }\n\n  if (selectedCellsCount > 0) {\n    return (\n      <span>\n        Selected: {selectedCellsCount} cell\n        {selectedCellsCount > 1 ? \"s\" : \"\"}\n      </span>\n    );\n  }\n\n  return <span>Click a cell to select</span>;\n};\n\nexport const StatusBarSummary: React.FC = () => {\n  const data = useSpreadsheetStore((state) => state.data);\n  const rowCount = data.length;\n\n  return (\n    <span>\n      {rowCount} rows  {data[0]?.length} columns\n    </span>\n  );\n};\n",
    "/lib/spreadsheet-utils.ts": "/**\n * Pure utility functions for spreadsheet operations\n */\nexport interface CellPosition {\n  rowId: string;\n  columnId: string;\n}\n\nexport interface ColumnInfo {\n  accessorKey?: string;\n  id?: string;\n}\n\nexport interface NavigationMap {\n  up: string | null;\n  down: string | null;\n  left: string | null;\n  right: string | null;\n  tab: string | null;\n}\n\n/**\n * Get all cells in a row\n */\nexport const getRowCells = (rowId: string, columns: ColumnInfo[]): string[] => {\n  return columns.map((col) => `${rowId}:${col.accessorKey || col.id || \"\"}`);\n};\n\n/**\n * Get all cells in a column\n */\nexport const getColumnCells = (\n  columnId: string,\n  data: Record<string, unknown>[]\n): string[] => {\n  return data.map((row) => `${row.id}:${columnId}`);\n};\n\n/**\n * Get cells in a range between two positions\n */\nexport const getRangeCells = (\n  startRowId: string,\n  startColId: string,\n  endRowId: string,\n  endColId: string,\n  columns: ColumnInfo[],\n  data: Record<string, unknown>[]\n): string[] => {\n  const columnIds = columns.map((col) => col.accessorKey || col.id || \"\");\n  const startColIndex = columnIds.indexOf(startColId);\n  const endColIndex = columnIds.indexOf(endColId);\n\n  const minColIndex = Math.min(startColIndex, endColIndex);\n  const maxColIndex = Math.max(startColIndex, endColIndex);\n\n  // Find the row indices for the start and end rows\n  const startRowIndex = data.findIndex((row) => row.id === startRowId);\n  const endRowIndex = data.findIndex((row) => row.id === endRowId);\n\n  if (startRowIndex === -1 || endRowIndex === -1) return [];\n\n  const minRowIndex = Math.min(startRowIndex, endRowIndex);\n  const maxRowIndex = Math.max(startRowIndex, endRowIndex);\n\n  const cells: string[] = [];\n  for (let rowIndex = minRowIndex; rowIndex <= maxRowIndex; rowIndex++) {\n    for (let colIndex = minColIndex; colIndex <= maxColIndex; colIndex++) {\n      cells.push(`${data[rowIndex].id}:${columnIds[colIndex]}`);\n    }\n  }\n  return cells;\n};\n\n/**\n * Toggle row selection\n */\nexport const toggleRowSelection = (\n  rowId: string,\n  selectedCells: Set<string>,\n  columns: ColumnInfo[]\n): Set<string> => {\n  const rowCells = getRowCells(rowId, columns);\n  const isRowFullySelected = rowCells.every((cell) => selectedCells.has(cell));\n\n  const newSelectedCells = new Set(selectedCells);\n  if (isRowFullySelected) {\n    // Deselect all cells in this row\n    rowCells.forEach((cell) => newSelectedCells.delete(cell));\n  } else {\n    // Select all cells in this row\n    rowCells.forEach((cell) => newSelectedCells.add(cell));\n  }\n  return newSelectedCells;\n};\n\n/**\n * Toggle column selection\n */\nexport const toggleColumnSelection = (\n  columnId: string,\n  selectedCells: Set<string>,\n  data: Record<string, unknown>[]\n): Set<string> => {\n  const columnCells = getColumnCells(columnId, data);\n  const isColumnFullySelected = columnCells.every((cell) =>\n    selectedCells.has(cell)\n  );\n\n  const newSelectedCells = new Set(selectedCells);\n  if (isColumnFullySelected) {\n    // Deselect all cells in this column\n    columnCells.forEach((cell) => newSelectedCells.delete(cell));\n  } else {\n    // Select all cells in this column\n    columnCells.forEach((cell) => newSelectedCells.add(cell));\n  }\n  return newSelectedCells;\n};\n\n/**\n * Toggle single cell selection\n */\nexport const toggleCellSelection = (\n  cellKey: string,\n  selectedCells: Set<string>\n): Set<string> => {\n  const newSelectedCells = new Set(selectedCells);\n  if (newSelectedCells.has(cellKey)) {\n    newSelectedCells.delete(cellKey);\n  } else {\n    newSelectedCells.add(cellKey);\n  }\n  return newSelectedCells;\n};\n\n/**\n * Get the first selected cell position\n */\nexport const getFirstSelectedCell = (\n  selectedCells: Set<string>\n): CellPosition | null => {\n  const firstSelectedCell = Array.from(selectedCells)[0];\n  if (!firstSelectedCell) return null;\n\n  const [rowId, columnId] = firstSelectedCell.split(\":\");\n  return {\n    rowId,\n    columnId,\n  };\n};\n\n/**\n * Get column size CSS variables\n */\nexport const getColumnSizeVars = (\n  columnWidths: Record<string, number>\n): Record<string, number> => {\n  const colSizes: { [key: string]: number } = {};\n  Object.entries(columnWidths).forEach(([columnId, width]) => {\n    colSizes[`--col-${columnId}-size`] = width;\n  });\n  return colSizes;\n};\n\n/**\n * Check if a target element is within a specific data attribute\n */\nexport const isWithinDataAttribute = (\n  target: EventTarget | null,\n  attribute: string\n): boolean => {\n  return (\n    target instanceof HTMLElement && !!target.closest(`[data-${attribute}]`)\n  );\n};\n\n/**\n * Check if editing should be allowed based on current selection\n */\nexport const shouldAllowEditing = (\n  selectedCells: Set<string>,\n  cellKey: string\n): boolean => {\n  return selectedCells.has(cellKey) && selectedCells.size === 1;\n};\n\n/**\n * Create a navigation map for all cells in the spreadsheet\n */\nexport const createNavigationMap = (\n  data: Record<string, unknown>[],\n  columns: ColumnInfo[]\n): Map<string, NavigationMap> => {\n  const navigationMap = new Map<string, NavigationMap>();\n  const columnIds = columns.map((col) => col.accessorKey || col.id || \"\");\n\n  data.forEach((row, rowIndex) => {\n    columnIds.forEach((columnId, colIndex) => {\n      const cellKey = `${row.id}:${columnId}`;\n\n      const navigation: NavigationMap = {\n        up: rowIndex > 0 ? `${data[rowIndex - 1].id}:${columnId}` : null,\n        down:\n          rowIndex < data.length - 1\n            ? `${data[rowIndex + 1].id}:${columnId}`\n            : null,\n        left: colIndex > 0 ? `${row.id}:${columnIds[colIndex - 1]}` : null,\n        right:\n          colIndex < columnIds.length - 1\n            ? `${row.id}:${columnIds[colIndex + 1]}`\n            : null,\n        tab: null, // Will be calculated below\n      };\n\n      // Calculate tab navigation\n      if (colIndex < columnIds.length - 1) {\n        navigation.tab = `${row.id}:${columnIds[colIndex + 1]}`;\n      } else if (rowIndex < data.length - 1) {\n        navigation.tab = `${data[rowIndex + 1].id}:${columnIds[0]}`;\n      }\n\n      navigationMap.set(cellKey, navigation);\n    });\n  });\n\n  return navigationMap;\n};\n\n/**\n * Get next cell position for navigation using pre-calculated map\n */\nexport const getNextCellPositionFromMap = (\n  cellKey: string,\n  direction: \"up\" | \"down\" | \"left\" | \"right\" | \"tab\",\n  navigationMap: Map<string, NavigationMap>\n): CellPosition | null => {\n  const navigation = navigationMap.get(cellKey);\n  if (!navigation) return null;\n\n  const nextCellKey = navigation[direction];\n  if (!nextCellKey) return null;\n\n  const [rowId, columnId] = nextCellKey.split(\":\");\n  return { rowId, columnId };\n};\n",
    "/components/editable-cell.tsx": "\"use client\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport { Input } from \"../ui/input.tsx\";\n\nimport type {\n  Cell,\n  Column,\n  Row,\n  Table,\n  TableMeta,\n} from \"@tanstack/react-table\";\nimport { useSpreadsheetStore } from \"../lib/spreadsheet-store\";\n\ninterface SpreadsheetRow {\n  id: string;\n  [key: string]: unknown;\n}\n\ninterface SpreadsheetTableMeta<TData extends SpreadsheetRow>\n  extends TableMeta<TData> {\n  updateData?: (rowIndex: number, columnId: string, value: unknown) => void;\n}\n\ninterface EditableCellProps<TData extends SpreadsheetRow = SpreadsheetRow> {\n  getValue: () => unknown;\n  row: Row<TData>;\n  column: Column<TData, unknown>;\n  table: Table<TData>;\n}\n\nexport const EditableCell = <TData extends SpreadsheetRow = SpreadsheetRow>({\n  getValue,\n  row,\n  column,\n  table,\n}: EditableCellProps<TData>) => {\n  const editingCell = useSpreadsheetStore((state) => state.editingCell);\n  const setEditingCell = useSpreadsheetStore((state) => state.setEditingCell);\n  const updateData = useSpreadsheetStore((state) => state.updateData);\n  const value = getValue() as string;\n  const isEditing =\n    editingCell?.rowId === row.original.id &&\n    editingCell?.columnId === column.id;\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    updateData(row.original.id, column.id, e.target.value);\n  };\n\n  const onBlur = () => {\n    setEditingCell(null);\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" || e.key === \"Escape\") {\n      setEditingCell(null);\n    }\n    e.stopPropagation();\n  };\n\n  if (isEditing) {\n    return (\n      <Input\n        value={value}\n        onChange={onChange}\n        onBlur={onBlur}\n        onKeyDown={onKeyDown}\n        className=\"h-8 w-full rounded-none border-0 bg-transparent p-1 text-sm focus-visible:ring-blue-600/20 dark:focus-visible:ring-blue-400/30\"\n        autoFocus\n      />\n    );\n  }\n\n  return (\n    <div className=\"h-8 w-full p-1\">\n      <span className=\"text-foreground block truncate text-sm\" title={value}>\n        {value}\n      </span>\n    </div>\n  );\n};\n",
    "/lib/use-ai-enrichment.ts": "import { useCallback, useMemo } from \"react\";\nimport { useChat } from \"@ai-sdk/react\";\nimport { StaticChatTransport } from \"@loremllm/transport\";\n\nimport type { UIMessage } from \"@ai-sdk/react\";\nimport { useSpreadsheetStore } from \"./spreadsheet-store\";\n\ntype CustomUIMessage = UIMessage<\n  unknown,\n  {\n    updateCell: {\n      rowId: string;\n      columnId: string;\n      value: string;\n    };\n  }\n>;\n\n// Generate fake enriched data for a cell based on its column\nconst generateFakeValue = (columnId: string): string => {\n  const fakeData: Record<string, () => string> = {\n    firstName: () => {\n      const names = [\n        \"John\",\n        \"Jane\",\n        \"Michael\",\n        \"Sarah\",\n        \"David\",\n        \"Emily\",\n        \"James\",\n        \"Emma\",\n      ];\n      return names[Math.floor(Math.random() * names.length)];\n    },\n    lastName: () => {\n      const names = [\n        \"Smith\",\n        \"Johnson\",\n        \"Williams\",\n        \"Brown\",\n        \"Jones\",\n        \"Garcia\",\n        \"Miller\",\n        \"Davis\",\n      ];\n      return names[Math.floor(Math.random() * names.length)];\n    },\n    email: () => {\n      const domains = [\"example.com\", \"demo.org\", \"test.io\"];\n      const domain = domains[Math.floor(Math.random() * domains.length)];\n      return `${Math.random().toString(36).substring(2, 15)}@${domain}`;\n    },\n    company: () => {\n      const companies = [\n        \"Acme Corp\",\n        \"Tech Solutions\",\n        \"Global Industries\",\n        \"Digital Ventures\",\n        \"Innovation Labs\",\n        \"Future Systems\",\n      ];\n      return companies[Math.floor(Math.random() * companies.length)];\n    },\n    role: () => {\n      const roles = [\n        \"Software Engineer\",\n        \"Product Manager\",\n        \"Data Scientist\",\n        \"Designer\",\n        \"Marketing Director\",\n        \"Sales Executive\",\n      ];\n      return roles[Math.floor(Math.random() * roles.length)];\n    },\n  };\n\n  const generator = fakeData[columnId];\n  return generator ? generator() : \"\";\n};\n\nconst createTransport = () => {\n  return new StaticChatTransport<CustomUIMessage>({\n    async *mockResponse() {\n      const store = useSpreadsheetStore.getState();\n      const { selectedCells } = store;\n      const cells = Array.from(selectedCells).sort(() => Math.random() - 0.5);\n\n      for (const cellKey of cells) {\n        const [rowId, columnId] = cellKey.split(\":\");\n        const value = generateFakeValue(columnId);\n\n        yield {\n          type: \"data-updateCell\",\n          data: { rowId, columnId, value },\n        };\n      }\n    },\n    chunkDelayMs: [400, 1400],\n  });\n};\n\nexport const useAiEnrichment = () => {\n  const transport = useMemo(() => createTransport(), []);\n\n  const { sendMessage, status } = useChat<CustomUIMessage>({\n    transport,\n    onData: (dataPart) => {\n      if (dataPart.type === \"data-updateCell\") {\n        const { rowId, columnId, value } = dataPart.data;\n        const store = useSpreadsheetStore.getState();\n        store.updateData(rowId, columnId, value);\n      }\n    },\n  });\n\n  const handleEnrich = useCallback(() => {\n    const store = useSpreadsheetStore.getState();\n    store.updateSelectedCellsData(\"Generating...\");\n    void sendMessage({ text: \"enrich\" });\n  }, [sendMessage]);\n\n  const aiGenerating = status === \"streaming\" || status === \"submitted\";\n\n  return {\n    aiGenerating,\n    handleEnrich,\n  };\n};\n",
    "/lib/use-spreadsheet-handlers.ts": "import { useCallback } from \"react\";\n\nimport type { ColumnInfo } from \"./spreadsheet-utils\";\nimport { useSpreadsheetStore } from \"./spreadsheet-store\";\nimport {\n  getColumnCells,\n  getFirstSelectedCell,\n  getNextCellPositionFromMap,\n  getRangeCells,\n  getRowCells,\n  isWithinDataAttribute,\n  shouldAllowEditing,\n  toggleCellSelection,\n  toggleColumnSelection,\n  toggleRowSelection,\n} from \"./spreadsheet-utils\";\n\ninterface UseSpreadsheetHandlersProps {\n  columns: ColumnInfo[];\n  navigationMap: Map<string, any>;\n}\n\nexport const useSpreadsheetHandlers = ({\n  columns,\n  navigationMap,\n}: UseSpreadsheetHandlersProps) => {\n  const data = useSpreadsheetStore((state) => state.data);\n  const selectedCells = useSpreadsheetStore((state) => state.selectedCells);\n  const setSelectedCells = useSpreadsheetStore(\n    (state) => state.setSelectedCells,\n  );\n  const editingCell = useSpreadsheetStore((state) => state.editingCell);\n  const setEditingCell = useSpreadsheetStore((state) => state.setEditingCell);\n  const isDragging = useSpreadsheetStore((state) => state.isDragging);\n  const setIsDragging = useSpreadsheetStore((state) => state.setIsDragging);\n  const dragStartCell = useSpreadsheetStore((state) => state.dragStartCell);\n  const setDragStartCell = useSpreadsheetStore(\n    (state) => state.setDragStartCell,\n  );\n  const updateSelectedCellsData = useSpreadsheetStore(\n    (state) => state.updateSelectedCellsData,\n  );\n  // Note: navigationMap is now passed as a prop, not from store\n  // Mouse down handler for all interactions\n  const handleMouseDown = useCallback(\n    (e: React.MouseEvent, rowId: string, columnId: string) => {\n      if (e.button !== 0) return; // Only left mouse button\n\n      const cellKey = `${rowId}:${columnId}`;\n\n      // Handle row selection (click on row number)\n      if (isWithinDataAttribute(e.target, \"row-number\")) {\n        const rowCells = getRowCells(rowId, columns);\n\n        if (e.ctrlKey || e.metaKey) {\n          // Toggle row selection\n          setSelectedCells((currentSelectedCells) => {\n            const newSelection = toggleRowSelection(\n              rowId,\n              currentSelectedCells,\n              columns,\n            );\n            // Exit edit mode if multiple cells are selected\n            if (newSelection.size > 1 && editingCell) {\n              setEditingCell(null);\n            }\n            return newSelection;\n          });\n        } else {\n          // Select entire row\n          const newSelection = new Set(rowCells);\n          setSelectedCells(newSelection);\n          // Exit edit mode if multiple cells are selected\n          if (newSelection.size > 1 && editingCell) {\n            setEditingCell(null);\n          }\n        }\n        return;\n      }\n\n      // Handle column selection (click on column header)\n      if (isWithinDataAttribute(e.target, \"column-header\")) {\n        const columnCells = getColumnCells(columnId, data);\n\n        if (e.ctrlKey || e.metaKey) {\n          // Toggle column selection\n          setSelectedCells((currentSelectedCells) => {\n            const newSelection = toggleColumnSelection(\n              columnId,\n              currentSelectedCells,\n              data,\n            );\n            // Exit edit mode if multiple cells are selected\n            if (newSelection.size > 1 && editingCell) {\n              setEditingCell(null);\n            }\n            return newSelection;\n          });\n        } else {\n          // Select entire column\n          const newSelection = new Set(columnCells);\n          setSelectedCells(newSelection);\n          // Exit edit mode if multiple cells are selected\n          if (newSelection.size > 1 && editingCell) {\n            setEditingCell(null);\n          }\n        }\n        return;\n      }\n\n      // Handle cell selection\n      if (e.ctrlKey || e.metaKey) {\n        // Toggle cell selection\n        setSelectedCells((currentSelectedCells) => {\n          const newSelection = toggleCellSelection(\n            cellKey,\n            currentSelectedCells,\n          );\n          // Exit edit mode if multiple cells are selected\n          if (newSelection.size > 1 && editingCell) {\n            setEditingCell(null);\n          }\n          return newSelection;\n        });\n      } else if (e.shiftKey) {\n        // Range selection\n        setSelectedCells((currentSelectedCells) => {\n          if (currentSelectedCells.size === 0) return new Set([cellKey]);\n\n          const firstSelectedCell = Array.from(currentSelectedCells)[0];\n          const [firstRowId, firstCol] = firstSelectedCell.split(\":\");\n          const rangeCells = getRangeCells(\n            firstRowId,\n            firstCol,\n            rowId,\n            columnId,\n            columns,\n            data,\n          );\n          const newSelection = new Set(rangeCells);\n          // Exit edit mode if multiple cells are selected\n          if (newSelection.size > 1 && editingCell) {\n            setEditingCell(null);\n          }\n          return newSelection;\n        });\n      } else {\n        // Single cell selection\n        const isCurrentlyEditing =\n          editingCell?.rowId === rowId && editingCell?.columnId === columnId;\n        const isCurrentlySelected =\n          selectedCells.has(cellKey) && selectedCells.size === 1;\n\n        if (isCurrentlyEditing) {\n          // If clicking on the cell that's currently being edited, stop editing\n          setTimeout(() => setEditingCell(null), 0);\n        } else if (isCurrentlySelected) {\n          // If clicking on the cell that's already selected (but not editing), start editing\n          setTimeout(() => setEditingCell({ rowId, columnId }), 0);\n        } else {\n          // Select this cell and enter edit mode\n          setSelectedCells(new Set([cellKey]));\n        }\n      }\n\n      // Start drag selection for potential dragging\n      setIsDragging(true);\n      setDragStartCell({ rowId, columnId });\n    },\n    [\n      selectedCells,\n      columns,\n      data,\n      editingCell,\n      setSelectedCells,\n      setEditingCell,\n      setIsDragging,\n      setDragStartCell,\n    ],\n  );\n\n  const handleMouseMove = useCallback(\n    (e: React.MouseEvent, rowId: string, columnId: string) => {\n      if (!isDragging || !dragStartCell) return;\n\n      // Update selection based on drag range\n      const rangeCells = getRangeCells(\n        dragStartCell.rowId,\n        dragStartCell.columnId,\n        rowId,\n        columnId,\n        columns,\n        data,\n      );\n      const newSelection = new Set(rangeCells);\n      setSelectedCells(newSelection);\n\n      // Exit edit mode if multiple cells are selected during drag\n      if (newSelection.size > 1 && editingCell) {\n        setEditingCell(null);\n      }\n    },\n    [\n      isDragging,\n      dragStartCell,\n      columns,\n      data,\n      editingCell,\n      setSelectedCells,\n      setEditingCell,\n    ],\n  );\n\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n    setDragStartCell(null);\n  }, [setIsDragging, setDragStartCell]);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      const firstSelectedCell = getFirstSelectedCell(selectedCells);\n      if (!firstSelectedCell) return;\n\n      const { rowId, columnId } = firstSelectedCell;\n\n      const activeElement = document.activeElement;\n      if (activeElement && activeElement.tagName === \"INPUT\") {\n        return;\n      }\n\n      switch (e.key) {\n        case \"Enter\":\n          e.preventDefault();\n          if (\n            editingCell?.rowId === rowId &&\n            editingCell?.columnId === columnId\n          ) {\n            setEditingCell(null);\n          } else if (\n            shouldAllowEditing(selectedCells, `${rowId}:${columnId}`)\n          ) {\n            // Only allow editing if exactly one cell is selected\n            setEditingCell({ rowId, columnId });\n          }\n          break;\n        case \"ArrowUp\": {\n          e.preventDefault();\n          const currentCellKey = `${rowId}:${columnId}`;\n          const nextPosition = getNextCellPositionFromMap(\n            currentCellKey,\n            \"up\",\n            navigationMap,\n          );\n          if (nextPosition) {\n            const newCellKey = `${nextPosition.rowId}:${nextPosition.columnId}`;\n            setSelectedCells(new Set([newCellKey]));\n          }\n          break;\n        }\n        case \"ArrowDown\": {\n          e.preventDefault();\n          const currentCellKey = `${rowId}:${columnId}`;\n          const nextPosition = getNextCellPositionFromMap(\n            currentCellKey,\n            \"down\",\n            navigationMap,\n          );\n          if (nextPosition) {\n            const newCellKey = `${nextPosition.rowId}:${nextPosition.columnId}`;\n            setSelectedCells(new Set([newCellKey]));\n          }\n          break;\n        }\n        case \"ArrowLeft\": {\n          e.preventDefault();\n          const currentCellKey = `${rowId}:${columnId}`;\n          const nextPosition = getNextCellPositionFromMap(\n            currentCellKey,\n            \"left\",\n            navigationMap,\n          );\n          if (nextPosition) {\n            const newCellKey = `${nextPosition.rowId}:${nextPosition.columnId}`;\n            setSelectedCells(new Set([newCellKey]));\n          }\n          break;\n        }\n        case \"ArrowRight\": {\n          e.preventDefault();\n          const currentCellKey = `${rowId}:${columnId}`;\n          const nextPosition = getNextCellPositionFromMap(\n            currentCellKey,\n            \"right\",\n            navigationMap,\n          );\n          if (nextPosition) {\n            const newCellKey = `${nextPosition.rowId}:${nextPosition.columnId}`;\n            setSelectedCells(new Set([newCellKey]));\n          }\n          break;\n        }\n        case \"Tab\": {\n          e.preventDefault();\n          const currentCellKey = `${rowId}:${columnId}`;\n          const nextPosition = getNextCellPositionFromMap(\n            currentCellKey,\n            \"tab\",\n            navigationMap,\n          );\n          if (nextPosition) {\n            const newCellKey = `${nextPosition.rowId}:${nextPosition.columnId}`;\n            setSelectedCells(new Set([newCellKey]));\n          }\n          break;\n        }\n        case \"Escape\": {\n          e.preventDefault();\n          if (editingCell) {\n            // If editing, stop editing\n            setEditingCell(null);\n          } else {\n            // If not editing, deselect everything\n            setSelectedCells(new Set());\n          }\n          break;\n        }\n        case \"Delete\":\n        case \"Backspace\": {\n          e.preventDefault();\n          if (selectedCells.size > 0) {\n            updateSelectedCellsData(undefined);\n          }\n          break;\n        }\n      }\n    },\n    [\n      selectedCells,\n      columns,\n      data,\n      editingCell,\n      setEditingCell,\n      setSelectedCells,\n      updateSelectedCellsData,\n      navigationMap,\n    ],\n  );\n\n  return {\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleKeyDown,\n  };\n};\n",
    "/lib/spreadsheet-store.ts": "import { create } from \"zustand\";\n\nexport type SpreadsheetRow = Record<string, any>;\n\nexport interface SpreadsheetStore<\n  TRow extends SpreadsheetRow = SpreadsheetRow,\n> {\n  // Data state\n  data: TRow[];\n  setData: (data: TRow[] | ((prev: TRow[]) => TRow[])) => void;\n\n  // Selection state\n  selectedCells: Set<string>;\n  setSelectedCells: (\n    cells: Set<string> | ((prev: Set<string>) => Set<string>),\n  ) => void;\n\n  // Editing state\n  editingCell: { rowId: string; columnId: string } | null;\n  setEditingCell: (cell: { rowId: string; columnId: string } | null) => void;\n\n  // Drag state\n  isDragging: boolean;\n  setIsDragging: (dragging: boolean) => void;\n  dragStartCell: { rowId: string; columnId: string } | null;\n  setDragStartCell: (cell: { rowId: string; columnId: string } | null) => void;\n\n  // Column widths\n  columnWidths: Record<string, number>;\n  setColumnWidths: (\n    widths:\n      | Record<string, number>\n      | ((prev: Record<string, number>) => Record<string, number>),\n  ) => void;\n\n  // Drag line\n  dragLineVisible: boolean;\n  setDragLineVisible: (visible: boolean) => void;\n\n  // Actions\n  updateData: (rowId: string, columnId: string, value: unknown) => void;\n  updateSelectedCellsData: (\n    value:\n      | unknown\n      | ((options: {\n          row: SpreadsheetRow;\n          columnId: string;\n          currentValue: unknown;\n        }) => unknown),\n  ) => void;\n  addRow: (onCreateRow?: (rowIndex: number) => TRow) => void;\n  deleteRow: (rowId: string, onDeleteRow?: (rowId: string) => void) => void;\n}\n\nexport const useSpreadsheetStore = create<SpreadsheetStore>((set, get) => ({\n  // Initial state\n  data: [],\n  selectedCells: new Set(),\n  editingCell: null,\n  isDragging: false,\n  dragStartCell: null,\n  columnWidths: {},\n  dragLineVisible: false,\n\n  // Setters\n  setData: (data) => {\n    set((state) => ({\n      data: typeof data === \"function\" ? data(state.data) : data,\n    }));\n  },\n\n  setSelectedCells: (cells) => {\n    set((state) => ({\n      selectedCells:\n        typeof cells === \"function\" ? cells(state.selectedCells) : cells,\n    }));\n  },\n\n  setEditingCell: (cell) => set({ editingCell: cell }),\n  setIsDragging: (dragging) => set({ isDragging: dragging }),\n  setDragStartCell: (cell) => set({ dragStartCell: cell }),\n\n  setColumnWidths: (widths) => {\n    set((state) => ({\n      columnWidths:\n        typeof widths === \"function\" ? widths(state.columnWidths) : widths,\n    }));\n  },\n\n  setDragLineVisible: (visible) => set({ dragLineVisible: visible }),\n\n  // Actions\n  updateData: (rowId, columnId, value) => {\n    set((state) => ({\n      data: state.data.map((row) => {\n        if (row.id === rowId) {\n          return { ...row, [columnId]: value };\n        }\n        return row;\n      }),\n    }));\n  },\n\n  updateSelectedCellsData: (value) => {\n    const state = get();\n    if (state.selectedCells.size === 0) return;\n\n    set((state) => {\n      const newData = [...state.data];\n      state.selectedCells.forEach((cellKey) => {\n        const [rowId, columnId] = cellKey.split(\":\");\n        const rowIndex = newData.findIndex((row) => row.id === rowId);\n\n        if (rowIndex >= 0 && rowIndex < newData.length) {\n          const currentRow = newData[rowIndex];\n          const newValue =\n            typeof value === \"function\"\n              ? (\n                  value as (options: {\n                    row: SpreadsheetRow;\n                    columnId: string;\n                    currentValue: unknown;\n                  }) => unknown\n                )({\n                  row: currentRow,\n                  columnId,\n                  currentValue: currentRow?.[columnId],\n                })\n              : value;\n\n          newData[rowIndex] = {\n            ...currentRow,\n            [columnId]: newValue,\n          };\n        }\n      });\n      return { data: newData };\n    });\n  },\n\n  addRow: (onCreateRow) => {\n    set((state) => {\n      const nextRow =\n        onCreateRow?.(state.data.length) ?? ({} as SpreadsheetRow);\n      return { data: [...state.data, nextRow] };\n    });\n  },\n\n  deleteRow: (rowId, onDeleteRow) => {\n    set((state) => {\n      onDeleteRow?.(rowId);\n      return { data: state.data.filter((row) => row.id !== rowId) };\n    });\n  },\n}));\n",
    "/ui/utils.tsx": "import type { CxOptions } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cx } from \"class-variance-authority\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport const cn = (...inputs: CxOptions) => twMerge(cx(inputs));\n\n/**\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/composeRefs.tsx\n */\ntype PossibleRef<T> = React.Ref<T> | undefined;\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef<T>(ref: PossibleRef<T>, value: T) {\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else if (ref !== null && ref !== undefined) {\n    (ref as React.MutableRefObject<T>).current = value;\n  }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nexport function composeRefs<T>(...refs: PossibleRef<T>[]) {\n  return (node: T) => refs.forEach((ref) => setRef(ref, node));\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nexport function useComposedRefs<T>(...refs: PossibleRef<T>[]) {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return React.useCallback(composeRefs(...refs), refs);\n}\n\n/**\n * @see https://github.com/radix-ui/primitives/blob/main/packages/react/use-callback-ref/src/useCallbackRef.tsx\n */\n/**\n * A custom hook that converts a callback to a ref to avoid triggering re-renders when passed as a\n * prop or avoid re-executing effects when passed as a dependency\n */\nexport function useCallbackRef<T extends (...args: never[]) => unknown>(\n  callback: T | undefined,\n): T {\n  const callbackRef = React.useRef(callback);\n\n  React.useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  // https://github.com/facebook/react/issues/19240\n  return React.useMemo(\n    () => ((...args) => callbackRef.current?.(...args)) as T,\n    [],\n  );\n}\n\nexport function useDebounce<T>(value: T, delay?: number): T {\n  const [debouncedValue, setDebouncedValue] = React.useState<T>(value);\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay ?? 500);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function useDebouncedCallback<T extends (...args: never[]) => unknown>(\n  callback: T,\n  delay: number,\n) {\n  const handleCallback = useCallbackRef(callback);\n  const debounceTimerRef = React.useRef(0);\n  React.useEffect(\n    () => () => window.clearTimeout(debounceTimerRef.current),\n    [],\n  );\n\n  const setValue = React.useCallback(\n    (...args: Parameters<T>) => {\n      window.clearTimeout(debounceTimerRef.current);\n      debounceTimerRef.current = window.setTimeout(\n        () => handleCallback(...args),\n        delay,\n      );\n    },\n    [handleCallback, delay],\n  );\n\n  return setValue;\n}\n\nexport function useMediaQuery(query = \"(min-width: 640px)\") {\n  const [value, setValue] = React.useState(false);\n\n  React.useEffect(() => {\n    function onChange(event: MediaQueryListEvent) {\n      setValue(event.matches);\n    }\n\n    const result = matchMedia(query);\n    result.addEventListener(\"change\", onChange);\n    setValue(result.matches);\n\n    return () => result.removeEventListener(\"change\", onChange);\n  }, [query]);\n\n  return value;\n}\n\nexport function formatDate(\n  date: Date | string | number,\n  opts: Intl.DateTimeFormatOptions = {},\n) {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: opts.month ?? \"long\",\n    day: opts.day ?? \"numeric\",\n    year: opts.year ?? \"numeric\",\n    ...opts,\n  }).format(new Date(date));\n}\n\nconst MOBILE_BREAKPOINT = 768;\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(\n    undefined,\n  );\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    mql.addEventListener(\"change\", onChange);\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, []);\n\n  return !!isMobile;\n}\n",
    "/ui/spinner.tsx": "export const Spinner = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path d=\"M2,12A10.94,10.94,0,0,1,5,4.65c-.21-.19-.42-.36-.62-.55h0A11,11,0,0,0,12,23c.34,0,.67,0,1-.05C6,23,2,17.74,2,12Z\">\n      <animateTransform\n        attributeName=\"transform\"\n        type=\"rotate\"\n        dur=\"0.6s\"\n        values=\"0 12 12;360 12 12\"\n        repeatCount=\"indefinite\"\n      />\n    </path>\n  </svg>\n);\n",
    "/ui/button.tsx": "import type { VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cva } from \"class-variance-authority\";\nimport { Slot } from \"radix-ui\";\n\nimport { Spinner } from \"./spinner.tsx\";\nimport { cn } from \"./utils.tsx\";\n\nconst buttonVariants = cva(\n  \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive relative inline-flex shrink-0 items-center justify-center gap-2 rounded-full text-sm font-medium whitespace-nowrap transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-xs\",\n        destructive:\n          \"bg-destructive hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-white shadow-xs\",\n        outline:\n          \"bg-background hover:bg-accent hover:text-accent-foreground border shadow-xs\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-xs\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 gap-1.5 rounded-full px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-full px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n      loading: {\n        true: \"disabled:opacity-100\",\n      },\n    },\n    compoundVariants: [\n      {\n        variant: \"default\",\n        loading: true,\n        className: \"[&>:first-child]:bg-primary\",\n      },\n      {\n        variant: \"destructive\",\n        loading: true,\n        className: \"[&>:first-child]:bg-destructive\",\n      },\n      {\n        variant: \"outline\",\n        loading: true,\n        className: \"[&>:first-child]:bg-background\",\n      },\n      {\n        variant: \"secondary\",\n        loading: true,\n        className: \"[&>:first-child]:bg-secondary\",\n      },\n    ],\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Button = ({\n  className,\n  variant,\n  size,\n  asChild = false,\n  children,\n  disabled,\n  loading,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n    loading?: boolean;\n  }) => {\n  const Comp = asChild ? Slot.Root : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, loading, className }))}\n      disabled={loading ?? disabled}\n      {...props}\n    >\n      {loading && (\n        <span className=\"pointer-events-none absolute inset-0 grid place-items-center rounded-full\">\n          <Spinner className=\"size-4\" />\n        </span>\n      )}\n      <Slot.Slottable>{children}</Slot.Slottable>\n    </Comp>\n  );\n};\n\nexport { Button, buttonVariants };\n",
    "/ui/input.tsx": "import * as React from \"react\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst Input = ({\n  className,\n  type,\n  ...props\n}: React.ComponentProps<\"input\">) => {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport { Input };\n",
    "/ui/dropdown-menu.tsx": "\"use client\";\n\nimport * as React from \"react\";\nimport { cva } from \"class-variance-authority\";\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react\";\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport { cn } from \"./utils.tsx\";\n\nconst DropdownMenu = ({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) => {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />;\n};\n\nconst DropdownMenuPortal = ({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) => {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  );\n};\n\nconst DropdownMenuTrigger = ({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) => {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  );\n};\n\nconst DropdownMenuContent = ({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) => {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  );\n};\n\nconst DropdownMenuGroup = ({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) => {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  );\n};\n\nconst dropdownMenuItemVariants = cva(\n  \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n);\n\nconst DropdownMenuItem = ({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean;\n  variant?: \"default\" | \"destructive\";\n}) => {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(dropdownMenuItemVariants(), className)}\n      {...props}\n    />\n  );\n};\n\nconst DropdownMenuCheckboxItem = ({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) => {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  );\n};\n\nconst DropdownMenuRadioGroup = ({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) => {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  );\n};\n\nconst DropdownMenuRadioItem = ({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) => {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  );\n};\n\nconst DropdownMenuLabel = ({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean;\n}) => {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst DropdownMenuSeparator = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) => {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n};\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nconst DropdownMenuSub = ({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) => {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />;\n};\n\nconst DropdownMenuSubTrigger = ({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean;\n}) => {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  );\n};\n\nconst DropdownMenuSubContent = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) => {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className,\n      )}\n      {...props}\n    />\n  );\n};\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  dropdownMenuItemVariants,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n};\n"
  },
  "previewCode": "\"use client\";\n\nimport React, { useCallback, useMemo } from \"react\";\nimport { Button } from \"./ui/button.tsx\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"./ui/dropdown-menu.tsx\";\nimport { createColumnHelper } from \"@tanstack/react-table\";\nimport {\n  Download,\n  MoreVerticalIcon,\n  Plus,\n  Sparkles,\n  TrashIcon,\n  Upload,\n} from \"lucide-react\";\n\nimport { EditableCell } from \"./components/editable-cell\";\nimport { Spreadsheet } from \"./components/spreadsheet\";\nimport {\n  StatusBar,\n  StatusBarMessage,\n  StatusBarSection,\n  StatusBarSummary,\n} from \"./components/status-bar\";\nimport { Toolbar, ToolbarButton } from \"./components/toolbar\";\nimport { useSpreadsheetStore } from \"./lib/spreadsheet-store\";\nimport { useAiEnrichment } from \"./lib/use-ai-enrichment\";\n\ntype Person = {\n  id: string;\n  linkedinUrl: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  company: string;\n  role: string;\n};\n\nconst columnHelper = createColumnHelper<Person>();\n\nconst generateSamplePeople = (count: number): Person[] => {\n  return Array.from({ length: count }, (_, i) => ({\n    id: `${i + 1}`,\n    linkedinUrl: `https://linkedin.com/in/user-${i + 1}`,\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    company: \"\",\n    role: \"\",\n  }));\n};\n\n// Initialize store outside React\nconst initializeStore = () => {\n  const store = useSpreadsheetStore.getState();\n  if (store.data.length === 0) {\n    store.setData(generateSamplePeople(30));\n  }\n  if (Object.keys(store.columnWidths).length === 0) {\n    store.setColumnWidths({\n      linkedinUrl: 250,\n      firstName: 120,\n      lastName: 120,\n      email: 180,\n      company: 150,\n      role: 150,\n    });\n  }\n};\n\n// Row actions component that uses the spreadsheet context\nconst RowActions = ({ row }: { row: Person }) => {\n  const deleteRow = useSpreadsheetStore((state) => state.deleteRow);\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8\">\n          <MoreVerticalIcon className=\"h-3 w-3\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem\n          onClick={() => deleteRow(row.id)}\n          className=\"text-destructive\"\n        >\n          <TrashIcon className=\"size-4\" />\n          Delete\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst ToolbarButtons = () => {\n  const addRow = useCallback(() => {\n    useSpreadsheetStore.getState().addRow((index) => ({\n      id: `${Date.now()}-${index}`,\n      linkedinUrl: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      company: \"\",\n      role: \"\",\n    }));\n  }, []);\n\n  const { handleEnrich } = useAiEnrichment();\n\n  return (\n    <>\n      <ToolbarButton onClick={() => addRow()}>\n        <Plus className=\"size-4\" />\n        Add Row\n      </ToolbarButton>\n      <ToolbarButton onClick={handleEnrich}>\n        <Sparkles className=\"size-4\" />\n        Enrich\n      </ToolbarButton>\n      <ToolbarButton onClick={() => alert(\"Import\")}>\n        <Upload className=\"size-4\" />\n        Import\n      </ToolbarButton>\n      <ToolbarButton onClick={() => alert(\"Export\")}>\n        <Download className=\"size-4\" />\n        Export\n      </ToolbarButton>\n    </>\n  );\n};\n\nconst Preview = () => {\n  const columns = useMemo(\n    () => [\n      columnHelper.accessor(\"linkedinUrl\", {\n        header: \"LinkedIn URL\",\n        cell: EditableCell,\n      }),\n      columnHelper.accessor(\"firstName\", {\n        header: \"First Name\",\n        cell: EditableCell,\n      }),\n      columnHelper.accessor(\"lastName\", {\n        header: \"Last Name\",\n        cell: EditableCell,\n      }),\n      columnHelper.accessor(\"email\", {\n        header: \"Email\",\n        cell: EditableCell,\n      }),\n      columnHelper.accessor(\"company\", {\n        header: \"Company\",\n        cell: EditableCell,\n      }),\n      columnHelper.accessor(\"role\", {\n        header: \"Role\",\n        cell: EditableCell,\n      }),\n    ],\n    [],\n  );\n\n  return (\n    <>\n      <Toolbar>\n        <ToolbarButtons />\n      </Toolbar>\n      <Spreadsheet\n        columns={columns}\n        showRowNumbers\n        renderRowActions={(row) => <RowActions row={row} />}\n      />\n      <StatusBar>\n        <StatusBarSection>\n          <StatusBarMessage />\n        </StatusBarSection>\n        <StatusBarSection className=\"justify-end\">\n          <StatusBarSummary />\n        </StatusBarSection>\n      </StatusBar>\n    </>\n  );\n};\n\ninitializeStore();\n\nexport default Preview;\n",
  "previousSlug": "sphere",
  "nextSlug": "timeline"
},
  "timeline": {
  "name": "Timeline",
  "tags": [
    "education",
    "minimal",
    "cards"
  ],
  "slug": "timeline",
  "type": "local",
  "dependencies": {
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/timeline.tsx": "import React from \"react\";\n\nexport const Timeline = () => {\n  return <div>Timeline Component coming soon</div>;\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { Timeline } from \"./timeline\";\n\nconst Preview = () => {\n  return <Timeline />;\n};\n\nexport default Preview;\n",
  "previousSlug": "spreadsheet",
  "nextSlug": "tooltip-grid"
},
  "tooltip-grid": {
  "name": "Tooltip Grid",
  "description": "Tooltip with a direction aware pixel grid background animation",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/tooltip-grid/tooltip-grid.mp4",
  "coverType": "video",
  "tags": [
    "productivity",
    "minimal",
    "dropdown-popovers-and-tooltips"
  ],
  "slug": "tooltip-grid",
  "type": "local",
  "dependencies": {
    "@floating-ui/react": "^0.27.16",
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/tooltip.css": ".tooltip {\n  --colors-panel: #020617;\n  --colors-shadowLight: hsl(206 22% 7% / 35%);\n  --colors-shadowDark: hsl(206 22% 7% / 20%);\n\n  background-color: var(--colors-panel);\n  box-shadow:\n    var(--colors-shadowLight) 0px 10px 38px -10px,\n    var(--colors-shadowDark) 0px 10px 20px -15px;\n  border-radius: 4px;\n}\n\n.tooltip.block {\n  background-color: transparent;\n  box-shadow: none;\n}\n\n.tooltip.block .content {\n  position: relative;\n}\n\n.line {\n  --mask-background: #ffffff;\n  --fade-stop: 90%;\n  --border-color: #334155;\n\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  mask-composite: exclude;\n}\n\n.lineV {\n  width: 1px;\n  height: 100%;\n\n  background: linear-gradient(\n    to bottom,\n    var(--border-color),\n    var(--border-color) 50%,\n    transparent 0,\n    transparent\n  );\n  background-size: 1px 5px;\n\n  -webkit-mask:\n    linear-gradient(\n      to top,\n      var(--mask-background) var(--fade-stop),\n      transparent\n    ),\n    linear-gradient(\n      to bottom,\n      var(--mask-background) var(--fade-stop),\n      transparent\n    ),\n    linear-gradient(black, black);\n}\n\n.lineH {\n  width: 100%;\n  height: 1px;\n\n  background: linear-gradient(\n    to right,\n    var(--border-color),\n    var(--border-color) 50%,\n    transparent 0,\n    transparent\n  );\n  background-size: 5px 1px;\n\n  -webkit-mask:\n    linear-gradient(\n      to left,\n      var(--mask-background) var(--fade-stop),\n      transparent\n    ),\n    linear-gradient(\n      to right,\n      var(--mask-background) var(--fade-stop),\n      transparent\n    ),\n    linear-gradient(black, black);\n}\n\n.blocksContainer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: repeat(var(--cols), 1fr);\n  grid-template-rows: repeat(var(--rows), 1fr);\n}\n\n.block {\n  background-color: var(--colors-panel);\n}\n",
    "/tooltip.tsx": "/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\";\n\nimport * as React from \"react\";\nimport {\n  autoUpdate,\n  flip,\n  FloatingPortal,\n  offset,\n  shift,\n  useDismiss,\n  useFloating,\n  useFocus,\n  useHover,\n  useInteractions,\n  useMergeRefs,\n  useRole,\n} from \"@floating-ui/react\";\nimport { AnimatePresence, motion } from \"motion/react\";\n\nimport type { Placement } from \"@floating-ui/react\";\n\nimport \"./tooltip.css\";\n\ntype TooltipOptions = {\n  initialOpen?: boolean;\n  placement?: Placement;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n};\n\nexport const useTooltip = ({\n  initialOpen = false,\n  placement = \"top\",\n  open: controlledOpen,\n  onOpenChange: setControlledOpen,\n}: TooltipOptions = {}) => {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(initialOpen);\n  const [hoverDirection, setHoverDirection] = React.useState<\n    | \"top-left\"\n    | \"top-center\"\n    | \"top-right\"\n    | \"bottom-left\"\n    | \"bottom-center\"\n    | \"bottom-right\"\n    | \"left\"\n    | \"right\"\n  >(\"top-center\");\n\n  const open = controlledOpen ?? uncontrolledOpen;\n  const setOpen = setControlledOpen ?? setUncontrolledOpen;\n\n  const data = useFloating({\n    placement,\n    open,\n    onOpenChange: (isOpen, event) => {\n      if (isOpen && !open && event) {\n        // Tooltip is opening, use the event to determine direction\n        if (data.elements.reference) {\n          console.log(\"data.elements.reference\", data.elements.reference);\n          const rect = data.elements.reference.getBoundingClientRect();\n          const centerX = rect.left + rect.width / 2;\n          const centerY = rect.top + rect.height / 2;\n          const mouseEvent = event as MouseEvent;\n          const mouseX = mouseEvent.clientX;\n          const mouseY = mouseEvent.clientY;\n\n          // Determine which side the mouse entered from with more granular detection\n          const deltaX = mouseX - centerX;\n          const deltaY = mouseY - centerY;\n\n          // Use percentage-based thresholds (25% of trigger dimensions)\n          const thresholdX = rect.width * 0.25;\n          const thresholdY = rect.height * 0.25;\n\n          console.log(\"Mouse position:\", { mouseX, mouseY });\n          console.log(\"Center position:\", { centerX, centerY });\n          console.log(\"Deltas:\", { deltaX, deltaY });\n          console.log(\"Thresholds:\", {\n            absDeltaX: Math.abs(deltaX),\n            absDeltaY: Math.abs(deltaY),\n            thresholdX,\n            thresholdY,\n          });\n\n          if (Math.abs(deltaX) > Math.abs(deltaY)) {\n            // Horizontal entry\n            if (Math.abs(deltaY) < thresholdY) {\n              const direction = deltaX > 0 ? \"right\" : \"left\";\n              console.log(\"Setting horizontal direction:\", direction);\n              setHoverDirection(direction);\n            } else {\n              // Corner entry\n              if (deltaY < 0) {\n                const direction = deltaX > 0 ? \"top-right\" : \"top-left\";\n                console.log(\"Setting top corner direction:\", direction);\n                setHoverDirection(direction);\n              } else {\n                const direction = deltaX > 0 ? \"bottom-right\" : \"bottom-left\";\n                console.log(\"Setting bottom corner direction:\", direction);\n                setHoverDirection(direction);\n              }\n            }\n          } else {\n            // Vertical entry\n            if (Math.abs(deltaX) < thresholdX) {\n              const direction = deltaY > 0 ? \"bottom-center\" : \"top-center\";\n              console.log(\"Setting vertical direction:\", direction);\n              setHoverDirection(direction);\n            } else {\n              // Corner entry\n              if (deltaX < 0) {\n                const direction = deltaY > 0 ? \"bottom-left\" : \"top-left\";\n                console.log(\"Setting left corner direction:\", direction);\n                setHoverDirection(direction);\n              } else {\n                const direction = deltaY > 0 ? \"bottom-right\" : \"top-right\";\n                console.log(\"Setting right corner direction:\", direction);\n                setHoverDirection(direction);\n              }\n            }\n          }\n        }\n      }\n      setOpen(isOpen);\n    },\n    whileElementsMounted: autoUpdate,\n    middleware: [\n      offset(5),\n      flip({\n        fallbackAxisSideDirection: \"start\",\n        padding: 5,\n      }),\n      shift({ padding: 5 }),\n    ],\n  });\n\n  const context = data.context;\n\n  const hover = useHover(context, {\n    move: false,\n    enabled: controlledOpen == null,\n  });\n\n  const focus = useFocus(context, {\n    enabled: controlledOpen == null,\n  });\n  const dismiss = useDismiss(context);\n  const role = useRole(context, { role: \"tooltip\" });\n\n  const interactions = useInteractions([hover, focus, dismiss, role]);\n\n  // Reset direction when tooltip closes\n  React.useEffect(() => {\n    if (!open) {\n      setHoverDirection(\"top-center\");\n    }\n  }, [open]);\n\n  return React.useMemo(\n    () => ({\n      open,\n      setOpen,\n      hoverDirection,\n      ...interactions,\n      ...data,\n    }),\n    [open, setOpen, hoverDirection, interactions, data],\n  );\n};\n\ntype ContextType = ReturnType<typeof useTooltip> | null;\n\nconst TooltipContext = React.createContext<ContextType>(null);\n\nexport const useTooltipContext = () => {\n  const context = React.useContext(TooltipContext);\n\n  if (context == null) {\n    throw new Error(\"Tooltip components must be wrapped in <Tooltip />\");\n  }\n\n  return context;\n};\n\nexport const Tooltip = ({\n  children,\n  ...options\n}: { children: React.ReactNode } & TooltipOptions) => {\n  const tooltip = useTooltip(options);\n\n  return (\n    <TooltipContext.Provider value={tooltip}>\n      {children}\n    </TooltipContext.Provider>\n  );\n};\n\nexport const TooltipTrigger = React.forwardRef<\n  HTMLElement,\n  React.HTMLProps<HTMLElement> & { asChild?: boolean }\n>(({ children, asChild = false, ...props }, propRef) => {\n  const context = useTooltipContext();\n  const childrenRef = (children as any).ref;\n  const ref = useMergeRefs([context.refs.setReference, propRef, childrenRef]);\n\n  // `asChild` allows the user to pass any element as the anchor\n  if (asChild && React.isValidElement(children)) {\n    return React.cloneElement(\n      children,\n      context.getReferenceProps({\n        ref,\n        ...props,\n        ...(children.props as object),\n        // @ts-expect-error data-state and data-side are valid props\n        \"data-state\": context.open ? \"open\" : \"closed\",\n        \"data-side\": context.placement.split(\"-\")[0],\n      }),\n    );\n  }\n\n  return (\n    <button\n      ref={ref}\n      // The user can style the trigger based on the state\n      data-state={context.open ? \"open\" : \"closed\"}\n      data-side={context.placement.split(\"-\")[0]}\n      {...context.getReferenceProps(props)}\n    >\n      {children}\n    </button>\n  );\n});\n\nTooltipTrigger.displayName = \"TooltipTrigger\";\n\nexport const TooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLProps<HTMLDivElement> & {\n    type?: \"default\" | \"block\";\n  }\n>(({ className, type = \"default\", ...props }, propRef) => {\n  const context = useTooltipContext();\n  const ref = useMergeRefs([context.refs.setFloating, propRef]);\n  const { children: floatingPropsChildren, ...floatingProps } =\n    context.getFloatingProps(props);\n  const children = floatingPropsChildren as React.ReactNode;\n  const blockType = type === \"block\";\n\n  const tooltipMotionProps = blockType\n    ? {}\n    : {\n        initial: { opacity: 0 },\n        animate: { opacity: 1 },\n        exit: { opacity: 0 },\n        transition: { duration: 0.23 },\n      };\n\n  const contentMotionProps = blockType\n    ? {\n        initial: { opacity: 0 },\n        animate: {\n          opacity: 1,\n          transition: {\n            delay: context.hoverDirection.includes(\"top\")\n              ? totalDelay * 2\n              : totalDelay,\n          },\n        },\n        exit: { opacity: 0 },\n      }\n    : {};\n\n  return (\n    <FloatingPortal>\n      <AnimatePresence>\n        {context.open && (\n          <motion.div\n            className={`${\"tooltip\"} ${blockType ? \"block\" : \"\"} ${className ?? \"\"}`}\n            ref={ref}\n            style={context.floatingStyles}\n            {...tooltipMotionProps}\n            {...floatingProps}\n          >\n            {blockType && <TooltipBlocks context={context} />}\n            <motion.div className={\"content\"} {...contentMotionProps}>\n              {children}\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      {blockType && (\n        <AnimatePresence>\n          {context.open && <TooltipLines context={context} />}\n        </AnimatePresence>\n      )}\n    </FloatingPortal>\n  );\n});\n\nTooltipContent.displayName = \"TooltipContent\";\n\nconst easeInOutQuint = (x: number) => {\n  return x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2;\n};\n\nconst TooltipLines = ({ context }: { context: ContextType }) => {\n  const floatingEl = context?.elements.floating;\n\n  if (!floatingEl || !context.x || !context.y) return null;\n\n  return (\n    <>\n      <motion.div\n        className={`${\"line\"} ${\"lineH\"}`}\n        initial={{ opacity: 0, top: -1 }}\n        animate={{ opacity: 1, top: context.y }}\n        exit={{ opacity: 0, top: -1 }}\n        transition={{\n          ease: easeInOutQuint,\n          duration: 1,\n        }}\n      />\n      <motion.div\n        className={`${\"line\"} ${\"lineH\"}`}\n        initial={{ opacity: 0, top: \"100dvh\" }}\n        animate={{ opacity: 1, top: context.y + floatingEl.offsetHeight }}\n        exit={{ opacity: 0, top: \"100dvh\" }}\n        transition={{\n          ease: easeInOutQuint,\n          duration: 1,\n        }}\n      />\n      <motion.div\n        className={`${\"line\"} ${\"lineV\"}`}\n        style={{ height: document.documentElement.scrollHeight }}\n        initial={{ opacity: 0, left: -1 }}\n        animate={{ opacity: 1, left: context.x }}\n        exit={{ opacity: 0, left: -1 }}\n        transition={{\n          ease: easeInOutQuint,\n          duration: 1,\n        }}\n      />\n      <motion.div\n        className={`${\"line\"} ${\"lineV\"}`}\n        style={{ height: document.documentElement.scrollHeight }}\n        initial={{ opacity: 0, left: \"100dvw\" }}\n        animate={{ opacity: 1, left: context.x + floatingEl.offsetWidth }}\n        exit={{ opacity: 0, left: \"100dvw\" }}\n        transition={{\n          ease: easeInOutQuint,\n          duration: 1,\n        }}\n      />\n    </>\n  );\n};\n\nconst cols = 11;\nconst rows = 8;\nconst duration = 0.07;\nconst baseDelay = duration / 2;\nconst blocks = Array.from({ length: cols * rows }, (_, i) => i);\n\nconst calculateDelay = (n: number) =>\n  baseDelay * Math.floor(n / cols) + baseDelay * (n % cols);\n\n// Calculate total delay for the default top direction\nconst totalDelay = calculateDelay(cols * rows);\n\nconst TooltipBlocks = ({ context }: { context: ContextType }) => {\n  if (!context?.x || !context?.y) return null;\n\n  const getDirectionalDelay = (n: number) => {\n    const row = Math.floor(n / cols);\n    const col = n % cols;\n\n    switch (context.hoverDirection) {\n      case \"left\":\n        // Animate from left edge outward\n        return baseDelay * col + baseDelay * row;\n      case \"right\":\n        // Animate from right edge outward\n        return baseDelay * (cols - 1 - col) + baseDelay * row;\n      case \"top-center\":\n        // Animate from top-center outward\n        const centerCol = Math.floor(cols / 2);\n        const distanceFromCenter = Math.abs(col - centerCol);\n        return baseDelay * row + baseDelay * distanceFromCenter;\n      case \"bottom-center\":\n        // Animate from bottom-center outward\n        const bottomCenterCol = Math.floor(cols / 2);\n        const distanceFromBottomCenter = Math.abs(col - bottomCenterCol);\n        return (\n          baseDelay * (rows - 1 - row) + baseDelay * distanceFromBottomCenter\n        );\n      case \"top-left\":\n        // Animate from top-left outward\n        return baseDelay * row + baseDelay * col;\n      case \"top-right\":\n        // Animate from top-right outward\n        return baseDelay * row + baseDelay * (cols - 1 - col);\n      case \"bottom-left\":\n        // Animate from bottom-left outward\n        return baseDelay * (rows - 1 - row) + baseDelay * col;\n      case \"bottom-right\":\n        // Animate from bottom-right outward\n        return baseDelay * (rows - 1 - row) + baseDelay * (cols - 1 - col);\n      default:\n        // Fallback to top-center behavior\n        const fallbackCenterCol = Math.floor(cols / 2);\n        const fallbackDistanceFromCenter = Math.abs(col - fallbackCenterCol);\n        return baseDelay * row + baseDelay * fallbackDistanceFromCenter;\n    }\n  };\n\n  return (\n    <div\n      className={`${\"blocksContainer\"}`}\n      style={{ \"--cols\": cols, \"--rows\": rows } as React.CSSProperties}\n    >\n      {blocks.map((i) => (\n        <motion.div\n          key={i}\n          className={`${\"block\"}`}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{\n            duration,\n            delay: getDirectionalDelay(i),\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"./tooltip\";\n\nconst Preview = () => {\n  return (\n    <div className=\"flex h-screen items-center justify-center bg-slate-800 text-slate-50\">\n      <Tooltip>\n        <TooltipTrigger className=\"p-4\">Hover</TooltipTrigger>\n        <TooltipContent type=\"block\">\n          <div style={{ width: 200, aspectRatio: \"16/9\" }} />\n        </TooltipContent>\n      </Tooltip>\n    </div>\n  );\n};\n\nexport default Preview;\n",
  "previousSlug": "timeline",
  "nextSlug": "voice-dictator"
},
  "voice-dictator": {
  "name": "Voice Dictator",
  "coverUrl": "https://zmdrwswxugswzmcokvff.supabase.co/storage/v1/object/public/uicapsule/voice-dictator/voice-dictator.mp4",
  "coverType": "video",
  "tags": [
    "webgl",
    "audio"
  ],
  "slug": "voice-dictator",
  "type": "local",
  "dependencies": {
    "motion": "^12.23.26",
    "react": "*",
    "react-dom": "*"
  },
  "devDependencies": {},
  "sourceCode": {
    "/voice-dictator.tsx": "\"use client\";\n\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { motion } from \"motion/react\";\n\nconst TRANSCRIPT_LIBRARY = [\n  \"The warrior should be cloaked in obsidian armor with faint runes pulsing across each plate, wind tearing through the cape as petals scatter around the scene.\",\n  \"Let's add a soft volumetric glow behind the subject to carve out the silhouette and make the cliff edge feel like it's dissolving into the clouds below.\",\n  \"Scatter bright motes of dust around the character so it feels like the air is alive, and make the sunset bleed into saturated oranges and violets.\",\n  \"Bring in a shallow depth of field with a wide cinematic crop, keeping the focus on the warrior's profile while the background blurs into abstract shapes.\",\n  \"Introduce a faint aurora stretching across the horizon to hint at ancient magic awakening right behind the hero.\",\n] as const;\n\ntype WebGLResources = {\n  gl: WebGLRenderingContext;\n  program: WebGLProgram;\n  uniforms: {\n    time: WebGLUniformLocation | null;\n    amplitude: WebGLUniformLocation | null;\n    resolution: WebGLUniformLocation | null;\n  };\n};\n\ntype TimeoutHandle = ReturnType<typeof setTimeout> | null;\n\nconst pickRandom = <T,>(items: readonly T[], exclude?: T) => {\n  if (items.length === 0) {\n    throw new Error(\"Cannot pick from an empty collection\");\n  }\n\n  if (items.length === 1) {\n    return items[0]!;\n  }\n\n  let candidate = items[Math.floor(Math.random() * items.length)]!;\n  if (exclude !== undefined) {\n    let safety = 0;\n    while (candidate === exclude && safety < 10) {\n      candidate = items[Math.floor(Math.random() * items.length)]!;\n      safety += 1;\n    }\n  }\n\n  return candidate;\n};\n\nexport const VoiceDictator: React.FC = () => {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const buttonRef = useRef<HTMLButtonElement | null>(null);\n  const webglRef = useRef<WebGLResources | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n\n  const amplitudeRef = useRef(0.08);\n  const targetAmplitudeRef = useRef(0.08);\n\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState(\n    \"Generate expressive prompts by speaking naturally. We will render a faux transcript here.\",\n  );\n\n  const listeningRef = useRef(false);\n  const scriptRef = useRef<string[]>([]);\n  const wordIndexRef = useRef(0);\n  const wordTimeoutRef = useRef<TimeoutHandle>(null);\n  const pulseTimeoutRef = useRef<TimeoutHandle>(null);\n\n  const initialiseWebGL = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const gl = canvas.getContext(\"webgl\", {\n      antialias: false,\n      premultipliedAlpha: false,\n      preserveDrawingBuffer: false,\n    });\n\n    if (!gl) return;\n\n    const vertexShaderSource = `\n      attribute vec2 aPosition;\n\n      void main() {\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n      }\n    `;\n\n    const fragmentShaderSource = `\n      precision highp float;\n\n      uniform float uTime;\n      uniform float uAmplitude;\n      uniform vec2 uResolution;\n\n      float bayerDither(vec2 coord) {\n        vec2 p = floor(mod(coord, 8.0));\n        float x = p.x;\n        float y = p.y;\n\n        float index =\n          1.0 * mod(x, 2.0) +\n          2.0 * mod(y, 2.0) +\n          4.0 * mod(floor(x / 2.0), 2.0) +\n          8.0 * mod(floor(y / 2.0), 2.0) +\n          16.0 * mod(floor(x / 4.0), 2.0) +\n          32.0 * mod(floor(y / 4.0), 2.0);\n\n        return (index + 0.5) / 64.0;\n      }\n\n      void main() {\n        vec2 normalized = gl_FragCoord.xy / uResolution;\n        vec2 uv = normalized * 2.0 - 1.0;\n        uv.x *= uResolution.x / uResolution.y;\n\n        float time = uTime * 0.5;\n        float amplitude = clamp(uAmplitude, 0.0, 1.2);\n\n        float radius = 0.21 + amplitude * 0.11 + sin(time * 0.9) * 0.012;\n        float thickness = 0.07 + amplitude * 0.05 + sin(time * 0.63) * 0.009;\n\n        float dist = length(uv);\n        float ring = smoothstep(radius + thickness, radius, dist) - smoothstep(radius, radius - thickness, dist);\n        float glow = exp(-14.0 * abs(dist - radius));\n        float halo = exp(-6.5 * dist * (1.0 + amplitude * 0.35));\n\n        float intensity = clamp(ring * 0.75 + glow * 0.5 + halo * 0.08, 0.0, 1.0);\n\n        float threshold = bayerDither(gl_FragCoord.xy);\n        float shade = step(threshold, intensity);\n\n        gl_FragColor = vec4(vec3(shade), 1.0);\n      }\n    `;\n\n    const createShader = (type: GLenum, source: string) => {\n      const shader = gl.createShader(type);\n      if (!shader) throw new Error(\"Unable to create shader\");\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      const compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n      if (!compiled) {\n        const info = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error(info ?? \"Unknown shader compilation error\");\n      }\n      return shader;\n    };\n\n    const vertexShader = createShader(gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = createShader(\n      gl.FRAGMENT_SHADER,\n      fragmentShaderSource,\n    );\n\n    const program = gl.createProgram();\n    if (!program) throw new Error(\"Unable to create WebGL program\");\n\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n\n    const linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n      const info = gl.getProgramInfoLog(program);\n      gl.deleteProgram(program);\n      gl.deleteShader(vertexShader);\n      gl.deleteShader(fragmentShader);\n      throw new Error(info ?? \"Unknown WebGL linking error\");\n    }\n\n    gl.deleteShader(vertexShader);\n    gl.deleteShader(fragmentShader);\n\n    const buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    const vertices = new Float32Array([\n      -1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1,\n    ]);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    const positionLocation = gl.getAttribLocation(program, \"aPosition\");\n    gl.enableVertexAttribArray(positionLocation);\n    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    gl.useProgram(program);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.CULL_FACE);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    const uniforms = {\n      time: gl.getUniformLocation(program, \"uTime\"),\n      amplitude: gl.getUniformLocation(program, \"uAmplitude\"),\n      resolution: gl.getUniformLocation(program, \"uResolution\"),\n    };\n\n    webglRef.current = { gl, program, uniforms };\n\n    const resize = () => {\n      if (!canvas) return;\n      const rect = canvas.getBoundingClientRect();\n      const pixelRatio = window.devicePixelRatio || 1;\n      const width = Math.round(rect.width * pixelRatio);\n      const height = Math.round(rect.height * pixelRatio);\n      if (canvas.width !== width || canvas.height !== height) {\n        canvas.width = width;\n        canvas.height = height;\n      }\n      gl.viewport(0, 0, width, height);\n    };\n\n    resize();\n\n    const render = (time: number) => {\n      animationFrameRef.current = requestAnimationFrame(render);\n      const resources = webglRef.current;\n      if (!resources) return;\n      const {\n        gl: context,\n        program: shaderProgram,\n        uniforms: shaderUniforms,\n      } = resources;\n\n      resize();\n      context.useProgram(shaderProgram);\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      const smoothing = 0.95; // Increased smoothing for smoother animations\n      const amplitude =\n        amplitudeRef.current +\n        (targetAmplitudeRef.current - amplitudeRef.current) * (1 - smoothing);\n      amplitudeRef.current = amplitude;\n\n      if (shaderUniforms.time) {\n        context.uniform1f(shaderUniforms.time, time * 0.001);\n      }\n      if (shaderUniforms.amplitude) {\n        context.uniform1f(shaderUniforms.amplitude, amplitude);\n      }\n      if (shaderUniforms.resolution) {\n        context.uniform2f(\n          shaderUniforms.resolution,\n          context.drawingBufferWidth,\n          context.drawingBufferHeight,\n        );\n      }\n\n      const button = buttonRef.current;\n      if (button) {\n        const scale = 1 + amplitude * 0.12;\n        const glow = 12 + amplitude * 80;\n        const opacity = 0.08 + amplitude * 0.22;\n        button.style.transform = `scale(${scale})`;\n        button.style.boxShadow = `0 0 ${glow.toFixed(1)}px rgba(255, 255, 255, ${opacity.toFixed(3)})`;\n      }\n\n      context.drawArrays(context.TRIANGLES, 0, 6);\n    };\n\n    render(0);\n\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      animationFrameRef.current = null;\n    };\n  }, []);\n\n  useEffect(() => {\n    try {\n      const cleanup = initialiseWebGL();\n      return () => {\n        if (cleanup) cleanup();\n        webglRef.current = null;\n      };\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  }, [initialiseWebGL]);\n\n  useEffect(() => {\n    listeningRef.current = isListening;\n  }, [isListening]);\n\n  const stopDictation = useCallback((completed = false) => {\n    listeningRef.current = false;\n    setIsListening(false);\n    targetAmplitudeRef.current = completed ? 0.12 : 0.06;\n  }, []);\n\n  useEffect(() => {\n    if (!isListening) {\n      if (pulseTimeoutRef.current) {\n        clearTimeout(pulseTimeoutRef.current);\n        pulseTimeoutRef.current = null;\n      }\n      targetAmplitudeRef.current = 0.06;\n      return;\n    }\n\n    const pump = () => {\n      if (!listeningRef.current) return;\n      targetAmplitudeRef.current = 0.25 + Math.random() * 0.7;\n      const delay = 120 + Math.random() * 80; // More consistent timing\n      pulseTimeoutRef.current = setTimeout(pump, delay);\n    };\n\n    pump();\n\n    return () => {\n      if (pulseTimeoutRef.current) {\n        clearTimeout(pulseTimeoutRef.current);\n        pulseTimeoutRef.current = null;\n      }\n    };\n  }, [isListening]);\n\n  useEffect(() => {\n    if (!isListening) {\n      if (wordTimeoutRef.current) {\n        clearTimeout(wordTimeoutRef.current);\n        wordTimeoutRef.current = null;\n      }\n      return;\n    }\n\n    const transcriptScript = pickRandom(TRANSCRIPT_LIBRARY);\n    scriptRef.current = transcriptScript.split(\" \");\n    wordIndexRef.current = 0;\n    setTranscript(\"\");\n\n    const deliver = () => {\n      if (!listeningRef.current) return;\n      if (wordIndexRef.current >= scriptRef.current.length) {\n        stopDictation(true);\n        return;\n      }\n\n      const nextWord = scriptRef.current[wordIndexRef.current];\n      if (nextWord) {\n        wordIndexRef.current += 1;\n        setTranscript((previous) =>\n          previous.length > 0 ? `${previous} ${nextWord}` : nextWord,\n        );\n        targetAmplitudeRef.current = 0.32 + Math.random() * 0.6;\n      }\n\n      const delay = 160 + Math.random() * 200; // More consistent word timing\n      wordTimeoutRef.current = setTimeout(deliver, delay);\n    };\n\n    const initialDelay = 220 + Math.random() * 220;\n    wordTimeoutRef.current = setTimeout(deliver, initialDelay);\n\n    return () => {\n      if (wordTimeoutRef.current) {\n        clearTimeout(wordTimeoutRef.current);\n        wordTimeoutRef.current = null;\n      }\n    };\n  }, [isListening, stopDictation]);\n\n  useEffect(() => {\n    return () => {\n      if (wordTimeoutRef.current) {\n        clearTimeout(wordTimeoutRef.current);\n      }\n      if (pulseTimeoutRef.current) {\n        clearTimeout(pulseTimeoutRef.current);\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  const handleToggle = useCallback(() => {\n    if (listeningRef.current) {\n      stopDictation(false);\n      return;\n    }\n\n    listeningRef.current = true;\n    setIsListening(true);\n  }, [stopDictation]);\n\n  return (\n    <div className=\"relative flex h-dvh w-dvw flex-col items-center justify-center overflow-hidden bg-black text-white\">\n      <canvas ref={canvasRef} className=\"absolute inset-0 h-full w-full\" />\n\n      <motion.button\n        ref={buttonRef}\n        type=\"button\"\n        onClick={handleToggle}\n        className=\"absolute top-1/2 left-1/2 h-8 w-8 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white/80\"\n        animate={{\n          scale: isListening ? [1, 1.1, 1] : 1,\n          opacity: isListening ? 0.9 : 0.6,\n        }}\n        transition={{\n          scale: {\n            duration: 0.6,\n            repeat: isListening ? Infinity : 0,\n            ease: \"easeInOut\",\n          },\n          opacity: {\n            duration: 0.3,\n            ease: \"easeInOut\",\n          },\n        }}\n        whileHover={{ scale: 1.05 }}\n        whileTap={{ scale: 0.95 }}\n      />\n\n      <motion.p\n        className=\"absolute bottom-20 z-10 max-w-2xl text-base leading-7 text-pretty text-white/70 sm:text-lg\"\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{\n          duration: 0.4,\n          ease: \"easeInOut\",\n        }}\n      >\n        {transcript}\n      </motion.p>\n\n      <motion.div\n        className=\"pointer-events-none absolute inset-x-0 bottom-0 z-10 h-48 bg-gradient-to-t from-black via-black/40 to-transparent\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.5 }}\n      />\n    </div>\n  );\n};\n"
  },
  "previewCode": "import React from \"react\";\n\nimport { VoiceDictator } from \"./voice-dictator\";\n\nconst Preview = () => {\n  return <VoiceDictator />;\n};\n\nexport default Preview;\n",
  "previousSlug": "tooltip-grid"
},
};

export const getContentComponent = (slug: string): ContentComponent | undefined => {
  return contentComponents[slug];
};

export const getAllContentSlugs = (): readonly string[] => {
  return contentSlugs;
};

export const getAllContentComponents = (filterTags?: string[]): ContentComponent[] => {
  const allComponents = Object.values(contentComponents);

  if (filterTags && filterTags.length > 0) {
    // Filter components that have any of the filter tags
    return allComponents.filter((component) => {
      const componentTags = component.tags ?? [];
      return filterTags.some((filterTag) =>
        componentTags.includes(filterTag),
      );
    });
  }

  return allComponents;
};
